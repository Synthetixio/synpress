LavaPack.loadBundle([[10,{"../../../shared/constants/metametrics":4063,"../../../shared/modules/hexstring-utils":4095,"@metamask/base-controller":1078,"@metamask/controller-utils":1083,"@metamask/message-manager":1311,"@metamask/utils":1786,buffer:2448,events:2868,loglevel:3447},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.isEIP1024EncryptedMessage=r.getDefaultState=r.default=void 0;var n=d(e("events")),s=d(e("loglevel")),i=e("@metamask/message-manager"),o=e("@metamask/base-controller"),a=e("@metamask/controller-utils"),c=e("@metamask/utils"),u=e("../../../shared/constants/metametrics"),l=e("../../../shared/modules/hexstring-utils");function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const f={unapprovedDecryptMsgs:{persist:!1,anonymous:!1},unapprovedDecryptMsgCount:{persist:!1,anonymous:!1}},p=e=>!!((0,c.isObject)(e.data)&&(0,c.hasProperty)(e.data,"version")&&(0,c.hasProperty)(e.data,"nonce")&&(0,c.hasProperty)(e.data,"ephemPublicKey")&&(0,c.hasProperty)(e.data,"ciphertext"));r.isEIP1024EncryptedMessage=p;const m=()=>({unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0});r.getDefaultState=m;class g extends o.BaseController{constructor({getState:e,metricsEvent:t,messenger:r}){super({metadata:f,messenger:r,name:"DecryptMessageController",state:{unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0}}),h(this,"hub",void 0),h(this,"_getState",void 0),h(this,"_metricsEvent",void 0),h(this,"_decryptMessageManager",void 0),this._getState=e,this._metricsEvent=t,this.hub=new n.default,this._decryptMessageManager=new i.DecryptMessageManager(undefined,undefined,undefined,["decrypted"]),this._decryptMessageManager.hub.on("updateBadge",(()=>{this.hub.emit("updateBadge")})),this._decryptMessageManager.hub.on("unapprovedMessage",(e=>{this._requestApproval(e)})),this._subscribeToMessageState(this._decryptMessageManager,((e,t,r)=>{e.unapprovedDecryptMsgs=t,e.unapprovedDecryptMsgCount=r}))}get unapprovedDecryptMsgCount(){return this._decryptMessageManager.getUnapprovedMessagesCount()}resetState(){this.update((()=>({unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0})))}clearUnapproved(){this._decryptMessageManager.update({unapprovedMessages:{},unapprovedMessagesCount:0})}async newRequestDecryptMessage(e,t){return this._decryptMessageManager.addUnapprovedMessageAsync(e,t)}async decryptMessage(e){const t=e.metamaskId;try{const r=await this._decryptMessageManager.approveMessage(e);if(r.data=this._parseMessageData(r.data),!p(r))throw new Error("Invalid encrypted data.");const n=await this.messagingSystem.call("KeyringController:decryptMessage",r);this._decryptMessageManager.setMessageStatusAndResult(t,n,"decrypted"),this._acceptApproval(t)}catch(e){throw s.default.info("MetaMaskController - eth_decrypt failed.",e),this._cancelAbstractMessage(this._decryptMessageManager,t),e}return this._getState()}async decryptMessageInline(e){const t=e.metamaskId;if(e.data=this._parseMessageData(e.data),!p(e))throw new Error("Invalid encrypted data.");const r=await this.messagingSystem.call("KeyringController:decryptMessage",e);return this._decryptMessageManager.setResult(t,r),this._getState()}cancelDecryptMessage(e){return this._decryptMessageManager.rejectMessage(e),this._rejectApproval(e),this._getState()}rejectUnapproved(e){Object.keys(this._decryptMessageManager.getUnapprovedMessages()).forEach((t=>{this._cancelAbstractMessage(this._decryptMessageManager,t,e)}))}_acceptApproval(e){this.messagingSystem.call("ApprovalController:acceptRequest",e)}_cancelAbstractMessage(e,t,r){return r&&this._metricsEvent({event:r,category:u.MetaMetricsEventCategory.Messages,properties:{action:"Decrypt Message Request"}}),e.rejectMessage(t),this._rejectApproval(t),this._getState()}_subscribeToMessageState(e,t){e.subscribe((e=>{const r=this._migrateMessages(e.unapprovedMessages);this.update((n=>{t(n,r,e.unapprovedMessagesCount)}))}))}_migrateMessages(e){const t={};for(const r of Object.keys(e)){const n=e[r],s=this._migrateMessage(n);t[r]=s}return t}_migrateMessage(e){const{messageParams:t,...r}=e;return{...r,rawSig:e.rawSig,msgParams:t,origin:t.origin}}_requestApproval(e){const t=e.metamaskId,r=e.origin||a.ORIGIN_METAMASK;try{this.messagingSystem.call("ApprovalController:addRequest",{id:t,origin:r,type:a.ApprovalType.EthDecrypt},!0)}catch(e){s.default.info("Error adding request to approval controller",e)}}_parseMessageData(e){const r=(0,l.stripHexPrefix)(e),n=t.from(r,"hex");return JSON.parse(n.toString("utf8"))}_rejectApproval(e){try{this.messagingSystem.call("ApprovalController:rejectRequest",e,"Cancel")}catch(e){s.default.info("Error rejecting request to approval controller",e)}}}r.default=g}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"app/scripts/controllers/decrypt-message.ts"}],[100,{"@metamask/transaction-controller":1733,lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),s=e("lodash");r.default={version:15,migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=15;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=r;t.TransactionController.transactions=e.map((e=>e.err?("Gave up submitting tx."===e.err.message&&(e.status=n.TransactionStatus.failed),e):e))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #15${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/015.js"}],[1004,{"./utils":1006,"@metamask/base-controller":1010,"@metamask/eth-snap-keyring":1132,"@metamask/keyring-api":1261,"@metamask/keyring-controller":1287,"ethereumjs-util":2816,uuid:4001},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,o,a,c,u,l,d,h,f=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},p=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.AccountsController=void 0;const m=e("@metamask/base-controller"),g=e("@metamask/eth-snap-keyring"),y=e("@metamask/keyring-api"),w=e("@metamask/keyring-controller"),v=e("ethereumjs-util"),b=e("uuid"),k=e("./utils"),_="AccountsController",S={internalAccounts:{persist:!0,anonymous:!1}},T={internalAccounts:{accounts:{},selectedAccount:""}};class E extends m.BaseControllerV2{constructor({messenger:e,state:t}){super({messenger:e,name:_,metadata:S,state:Object.assign(Object.assign({},T),t)}),n.add(this),this.messagingSystem.subscribe("SnapController:stateChange",(e=>p(this,n,"m",c).call(this,e))),this.messagingSystem.subscribe("KeyringController:stateChange",(e=>p(this,n,"m",a).call(this,e))),p(this,n,"m",h).call(this)}getAccount(e){return this.state.internalAccounts.accounts[e]}listAccounts(){return Object.values(this.state.internalAccounts.accounts)}getAccountExpect(e){if(!e)return{id:"",address:"",options:{},methods:[],type:y.EthAccountType.Eoa,metadata:{name:"",keyring:{type:""}}};const t=this.getAccount(e);if(t===undefined)throw new Error(`Account Id ${e} not found`);return t}getSelectedAccount(){return this.getAccountExpect(this.state.internalAccounts.selectedAccount)}getAccountByAddress(e){return this.listAccounts().find((t=>t.address.toLowerCase()===e.toLowerCase()))}setSelectedAccount(e){const t=this.getAccount(e);this.update((e=>{t?(e.internalAccounts.accounts[t.id].metadata.lastSelected=Date.now(),e.internalAccounts.selectedAccount=t.id):e.internalAccounts.selectedAccount=""})),t&&this.messagingSystem.publish("AccountsController:selectedAccountChange",t)}setAccountName(e,t){const r=this.getAccountExpect(e);if(this.listAccounts().find((r=>r.metadata.name===t&&r.id!==e)))throw new Error("Account name already exists");this.update((n=>{const s=Object.assign(Object.assign({},r),{metadata:Object.assign(Object.assign({},r.metadata),{name:t})});n.internalAccounts.accounts[e]=s}))}updateAccounts(){return f(this,void 0,void 0,(function*(){const e=yield p(this,n,"m",i).call(this),t=(yield p(this,n,"m",o).call(this)).filter((t=>!e.find((e=>e.address===t.address)))),r=new Map,s=this.state.internalAccounts.accounts,a=[...t,...e].reduce(((e,t)=>{var n,i;const o=(0,k.keyringTypeToName)(t.metadata.keyring.type),a=null!==(n=r.get(o))&&void 0!==n?n:0;a?r.set(o,a+1):r.set(o,1);const c=s[t.id];return e[t.id]=Object.assign(Object.assign({},t),{metadata:Object.assign(Object.assign({},t.metadata),{name:c&&""!==c.metadata.name?c.metadata.name:`${o} ${a+1}`,lastSelected:null===(i=null==c?void 0:c.metadata)||void 0===i?void 0:i.lastSelected})}),e}),{});this.update((e=>{e.internalAccounts.accounts=a}))}))}loadBackup(e){e.internalAccounts&&this.update((t=>{t.internalAccounts=e.internalAccounts}))}}r.AccountsController=E,n=new WeakSet,s=function(e,t){return{id:(0,k.getUUIDFromAddressOfNormalAccount)(e),address:e,options:{},methods:["personal_sign","eth_sign","eth_signTransaction","eth_signTypedData_v1","eth_signTypedData_v3","eth_signTypedData_v4"],type:y.EthAccountType.Eoa,metadata:{name:"",keyring:{type:t}}}},i=function(){return f(this,void 0,void 0,(function*(){const[e]=this.messagingSystem.call("KeyringController:getKeyringsByType",g.SnapKeyring.type);if(!e)return[];return e.listAccounts()}))},o=function(){return f(this,void 0,void 0,(function*(){const e=yield this.messagingSystem.call("KeyringController:getAccounts"),t=[];for(const r of e){const e=yield this.messagingSystem.call("KeyringController:getKeyringForAccount",r),n={random:(0,v.sha256FromString)(r).slice(0,16)};t.push({id:(0,b.v4)(n),address:r,options:{},methods:["personal_sign","eth_sign","eth_signTransaction","eth_signTypedData_v1","eth_signTypedData_v3","eth_signTypedData_v4"],type:y.EthAccountType.Eoa,metadata:{name:"",keyring:{type:e.type}}})}return t.filter((e=>e.metadata.keyring.type!==w.KeyringTypes.snap))}))},a=function(e){if(e.isUnlocked){const t=[],r=[];for(const n of e.keyrings)n.type===w.KeyringTypes.snap?r.push(...n.accounts.map((e=>({address:e,type:n.type})))):t.push(...n.accounts.map((e=>({address:e,type:n.type}))));const{previousNormalInternalAccounts:s,previousSnapInternalAccounts:i}=this.listAccounts().reduce(((e,t)=>(t.metadata.keyring.type===w.KeyringTypes.snap?e.previousSnapInternalAccounts.push(t):e.previousNormalInternalAccounts.push(t),e)),{previousNormalInternalAccounts:[],previousSnapInternalAccounts:[]}),o=[],a=[];for(const e of t)this.state.internalAccounts.accounts[(0,k.getUUIDFromAddressOfNormalAccount)(e.address)]||o.push(e);for(const e of r)i.find((t=>t.address.toLowerCase()===e.address.toLowerCase()))||o.push(e);for(const e of s)t.find((({address:t})=>t.toLowerCase()===e.address.toLowerCase()))||a.push(e);for(const e of i)r.find((({address:t})=>t.toLowerCase()===e.address.toLowerCase()))||a.push(e);if(a.length>0)for(const e of a)p(this,n,"m",d).call(this,e.id);if(o.length>0)for(const e of o)p(this,n,"m",l).call(this,e);if(!this.getAccount(this.state.internalAccounts.selectedAccount)){const[e]=this.listAccounts().sort(((e,t)=>{var r,n;return(null!==(r=t.metadata.lastSelected)&&void 0!==r?r:0)-(null!==(n=e.metadata.lastSelected)&&void 0!==n?n:0)}));this.setSelectedAccount(null==e?void 0:e.id)}}},c=function(e){const{snaps:t}=e,r=this.listAccounts().filter((e=>e.metadata.snap));this.update((e=>{r.forEach((r=>{const n=e.internalAccounts.accounts[r.id];if(n.metadata.snap){const e=n.metadata.snap.id,r=t[e];r&&(n.metadata.snap.enabled=r.enabled&&!r.blocked)}}))}))},u=function(e){const t=(0,k.keyringTypeToName)(e),r=this.listAccounts().filter((t=>e===w.KeyringTypes.hd||e===w.KeyringTypes.simple?t.metadata.keyring.type===w.KeyringTypes.hd||t.metadata.keyring.type===w.KeyringTypes.simple:t.metadata.keyring.type===e)),n=r.filter((e=>new RegExp(`${t} \\d+$`,"u").test(e.metadata.name))).map((e=>{const t=e.metadata.name.split(" ");return parseInt(t[t.length],10)})).sort(((e,t)=>t-e))[0]||0,s=Math.max(r.length+1,n+1);return{accountPrefix:t,indexToUse:s}},l=function(e){let t;if(e.type!==w.KeyringTypes.snap)t=p(this,n,"m",s).call(this,e.address,e.type);else{const[r]=this.messagingSystem.call("KeyringController:getKeyringsByType",g.SnapKeyring.type);if(t=r.getAccountByAddress(e.address),!t)return}const{accountPrefix:r,indexToUse:i}=p(this,n,"m",u).call(this,t.metadata.keyring.type),o=`${r} ${i}`;this.update((e=>{e.internalAccounts.accounts[t.id]=Object.assign(Object.assign({},t),{metadata:Object.assign(Object.assign({},t.metadata),{name:o,lastSelected:Date.now()})})})),this.setSelectedAccount(t.id)},d=function(e){this.update((t=>{delete t.internalAccounts.accounts[e]}))},h=function(){this.messagingSystem.registerActionHandler(`${_}:setSelectedAccount`,this.setSelectedAccount.bind(this)),this.messagingSystem.registerActionHandler(`${_}:listAccounts`,this.listAccounts.bind(this)),this.messagingSystem.registerActionHandler(`${_}:setAccountName`,this.setAccountName.bind(this)),this.messagingSystem.registerActionHandler(`${_}:updateAccounts`,this.updateAccounts.bind(this)),this.messagingSystem.registerActionHandler(`${_}:getSelectedAccount`,this.getSelectedAccount.bind(this)),this.messagingSystem.registerActionHandler(`${_}:getAccountByAddress`,this.getAccountByAddress.bind(this))}}}},{package:"@metamask/accounts-controller",file:"node_modules/@metamask/accounts-controller/dist/AccountsController.js"}],[1005,{"./AccountsController":1004,"./utils":1006},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./AccountsController"),r),s(e("./utils"),r)}}},{package:"@metamask/accounts-controller",file:"node_modules/@metamask/accounts-controller/dist/index.js"}],[1006,{"@metamask/keyring-controller":1287,"ethereumjs-util":2816,uuid:4001},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getUUIDFromAddressOfNormalAccount=r.keyringTypeToName=void 0;const n=e("@metamask/keyring-controller"),s=e("ethereumjs-util"),i=e("uuid");r.keyringTypeToName=function(e){switch(e){case n.KeyringTypes.simple:case n.KeyringTypes.hd:return"Account";case n.KeyringTypes.trezor:return"Trezor";case n.KeyringTypes.ledger:return"Ledger";case n.KeyringTypes.lattice:return"Lattice";case n.KeyringTypes.qr:return"QR";case n.KeyringTypes.snap:return"Snap Account";case n.KeyringTypes.custody:case"Custody - JSONRPC":return"Custody";default:throw new Error(`Unknown keyring ${e}`)}},r.getUUIDFromAddressOfNormalAccount=function(e){const t={random:(0,s.sha256FromString)(e).slice(0,16)};return(0,i.v4)(t)}}}},{package:"@metamask/accounts-controller",file:"node_modules/@metamask/accounts-controller/dist/utils.js"}],[1007,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BaseController=void 0;class n{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e in this.internalConfig)void 0!==this.internalConfig[e]&&(this[e]=this.internalConfig[e])}else for(const t in e)void 0!==this.internalConfig[t]&&(this.internalConfig[t]=e[t],this[t]=e[t])}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}}r.BaseController=n,r.default=n}}},{package:"@metamask/accounts-controller>@metamask/base-controller",file:"node_modules/@metamask/accounts-controller/node_modules/@metamask/base-controller/dist/BaseController.js"}],[1008,{immer:3190},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseController=void 0;const n=e("immer");(0,n.enablePatches)();function s(e,t,r){return Object.keys(e).reduce(((n,s)=>{try{const i=t[s];if(!i)throw new Error(`No metadata found for '${s}'`);const o=i[r],a=e[s];return"function"==typeof o?n[s]=o(a):o&&(n[s]=a),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:n}){this.messagingSystem=e,this.name=r,this.internalState=n,this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state))}get state(){return this.internalState}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,s]=n.produceWithPatches(this.internalState,e);return this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:s}}applyPatches(e){const t=(0,n.applyPatches)(this.internalState,e);this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return s(e,t,"anonymous")},r.getPersistentState=function(e,t){return s(e,t,"persist")}}}},{package:"@metamask/accounts-controller>@metamask/base-controller",file:"node_modules/@metamask/accounts-controller/node_modules/@metamask/base-controller/dist/BaseControllerV2.js"}],[1009,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ControllerMessenger=r.RestrictedControllerMessenger=void 0;class n{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:n}){this.controllerMessenger=e,this.controllerName=t,this.allowedActions=r||null,this.allowedEvents=n||null}registerActionHandler(e,t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed registering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.registerActionHandler(e,t)}unregisterActionHandler(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed unregistering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.unregisterActionHandler(e)}call(e,...t){if(null===this.allowedActions)throw new Error("No actions allowed");if(!this.allowedActions.includes(e))throw new Error(`Action missing from allow list: ${e}`);return this.controllerMessenger.call(e,...t)}publish(e,...t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed publishing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.publish(e,...t)}subscribe(e,t,r){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);return r?this.controllerMessenger.subscribe(e,t,r):this.controllerMessenger.subscribe(e,t)}unsubscribe(e,t){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);this.controllerMessenger.unsubscribe(e,t)}clearEventSubscriptions(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed clearing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.clearEventSubscriptions(e)}}r.RestrictedControllerMessenger=n;r.ControllerMessenger=class{constructor(){this.actions=new Map,this.events=new Map,this.eventPayloadCache=new Map}registerActionHandler(e,t){if(this.actions.has(e))throw new Error(`A handler for ${e} has already been registered`);this.actions.set(e,t)}unregisterActionHandler(e){this.actions.delete(e)}clearActions(){this.actions.clear()}call(e,...t){const r=this.actions.get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}publish(e,...t){const r=this.events.get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=this.eventPayloadCache.get(e),s=n(...t);s!==r&&(this.eventPayloadCache.set(e,s),e(s,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=this.events.get(e);n||(n=new Map,this.events.set(e,n)),n.set(t,r)}unsubscribe(e,t){const r=this.events.get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&this.eventPayloadCache.delete(t),r.delete(t)}clearEventSubscriptions(e){this.events.delete(e)}clearSubscriptions(){this.events.clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new n({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/accounts-controller>@metamask/base-controller",file:"node_modules/@metamask/accounts-controller/node_modules/@metamask/base-controller/dist/ControllerMessenger.js"}],[101,{"@metamask/transaction-controller":1733,lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),s=e("lodash");r.default={version:16,migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=16;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>e.err?("transaction with the same hash was already imported."===e.err&&(e.status=n.TransactionStatus.submitted,delete e.err),e):e))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #16${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/016.js"}],[1010,{"./BaseController":1007,"./BaseControllerV2":1008,"./ControllerMessenger":1009},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseControllerV2=r.BaseController=void 0;var i=e("./BaseController");Object.defineProperty(r,"BaseController",{enumerable:!0,get:function(){return i.BaseController}});var o=e("./BaseControllerV2");Object.defineProperty(r,"BaseControllerV2",{enumerable:!0,get:function(){return o.BaseController}}),Object.defineProperty(r,"getAnonymizedState",{enumerable:!0,get:function(){return o.getAnonymizedState}}),Object.defineProperty(r,"getPersistentState",{enumerable:!0,get:function(){return o.getPersistentState}}),s(e("./ControllerMessenger"),r)}}},{package:"@metamask/accounts-controller>@metamask/base-controller",file:"node_modules/@metamask/accounts-controller/node_modules/@metamask/base-controller/dist/index.js"}],[1011,{"@metamask/base-controller":1016,"@metamask/controller-utils":1018},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AddressBookController=r.AddressType=void 0;const n=e("@metamask/controller-utils"),s=e("@metamask/base-controller");!function(e){e.externallyOwnedAccounts="EXTERNALLY_OWNED_ACCOUNTS",e.contractAccounts="CONTRACT_ACCOUNTS",e.nonAccounts="NON_ACCOUNTS"}(r.AddressType||(r.AddressType={}));class i extends s.BaseController{constructor(e,t){super(e,t),this.name="AddressBookController",this.defaultState={addressBook:{}},this.initialize()}clear(){this.update({addressBook:{}})}delete(e,t){if(t=(0,n.toChecksumHexAddress)(t),!(0,n.isValidHexAddress)(t)||!this.state.addressBook[e]||!this.state.addressBook[e][t])return!1;const r=Object.assign({},this.state.addressBook);return delete r[e][t],0===Object.keys(r[e]).length&&delete r[e],this.update({addressBook:r}),!0}set(e,t,r=(0,n.toHex)(1),s="",i){if(e=(0,n.toChecksumHexAddress)(e),!(0,n.isValidHexAddress)(e))return!1;const o={address:e,chainId:r,isEns:!1,memo:s,name:t,addressType:i},a=(0,n.normalizeEnsName)(t);return a&&(o.name=a,o.isEns=!0),this.update({addressBook:Object.assign(Object.assign({},this.state.addressBook),{[r]:Object.assign(Object.assign({},this.state.addressBook[r]),{[e]:o})})}),!0}}r.AddressBookController=i,r.default=i}}},{package:"@metamask/address-book-controller",file:"node_modules/@metamask/address-book-controller/dist/AddressBookController.js"}],[1012,{"./AddressBookController":1011},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./AddressBookController"),r)}}},{package:"@metamask/address-book-controller",file:"node_modules/@metamask/address-book-controller/dist/index.js"}],[1013,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BaseController=void 0;class n{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e in this.internalConfig)void 0!==this.internalConfig[e]&&(this[e]=this.internalConfig[e])}else for(const t in e)void 0!==this.internalConfig[t]&&(this.internalConfig[t]=e[t],this[t]=e[t])}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}}r.BaseController=n,r.default=n}}},{package:"@metamask/address-book-controller>@metamask/base-controller",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/base-controller/dist/BaseController.js"}],[1014,{immer:3190},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseController=void 0;const n=e("immer");(0,n.enablePatches)();function s(e,t,r){return Object.keys(e).reduce(((n,s)=>{try{const i=t[s];if(!i)throw new Error(`No metadata found for '${s}'`);const o=i[r],a=e[s];return"function"==typeof o?n[s]=o(a):o&&(n[s]=a),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:n}){this.messagingSystem=e,this.name=r,this.internalState=n,this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state))}get state(){return this.internalState}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,s]=n.produceWithPatches(this.internalState,e);return this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:s}}applyPatches(e){const t=(0,n.applyPatches)(this.internalState,e);this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return s(e,t,"anonymous")},r.getPersistentState=function(e,t){return s(e,t,"persist")}}}},{package:"@metamask/address-book-controller>@metamask/base-controller",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/base-controller/dist/BaseControllerV2.js"}],[1015,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ControllerMessenger=r.RestrictedControllerMessenger=void 0;class n{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:n}){this.controllerMessenger=e,this.controllerName=t,this.allowedActions=r||null,this.allowedEvents=n||null}registerActionHandler(e,t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed registering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.registerActionHandler(e,t)}unregisterActionHandler(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed unregistering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.unregisterActionHandler(e)}call(e,...t){if(null===this.allowedActions)throw new Error("No actions allowed");if(!this.allowedActions.includes(e))throw new Error(`Action missing from allow list: ${e}`);return this.controllerMessenger.call(e,...t)}publish(e,...t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed publishing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.publish(e,...t)}subscribe(e,t,r){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);return r?this.controllerMessenger.subscribe(e,t,r):this.controllerMessenger.subscribe(e,t)}unsubscribe(e,t){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);this.controllerMessenger.unsubscribe(e,t)}clearEventSubscriptions(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed clearing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.clearEventSubscriptions(e)}}r.RestrictedControllerMessenger=n;r.ControllerMessenger=class{constructor(){this.actions=new Map,this.events=new Map,this.eventPayloadCache=new Map}registerActionHandler(e,t){if(this.actions.has(e))throw new Error(`A handler for ${e} has already been registered`);this.actions.set(e,t)}unregisterActionHandler(e){this.actions.delete(e)}clearActions(){this.actions.clear()}call(e,...t){const r=this.actions.get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}publish(e,...t){const r=this.events.get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=this.eventPayloadCache.get(e),s=n(...t);s!==r&&(this.eventPayloadCache.set(e,s),e(s,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=this.events.get(e);n||(n=new Map,this.events.set(e,n)),n.set(t,r)}unsubscribe(e,t){const r=this.events.get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&this.eventPayloadCache.delete(t),r.delete(t)}clearEventSubscriptions(e){this.events.delete(e)}clearSubscriptions(){this.events.clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new n({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/address-book-controller>@metamask/base-controller",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/base-controller/dist/ControllerMessenger.js"}],[1016,{"./BaseController":1013,"./BaseControllerV2":1014,"./ControllerMessenger":1015},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseControllerV2=r.BaseController=void 0;var i=e("./BaseController");Object.defineProperty(r,"BaseController",{enumerable:!0,get:function(){return i.BaseController}});var o=e("./BaseControllerV2");Object.defineProperty(r,"BaseControllerV2",{enumerable:!0,get:function(){return o.BaseController}}),Object.defineProperty(r,"getAnonymizedState",{enumerable:!0,get:function(){return o.getAnonymizedState}}),Object.defineProperty(r,"getPersistentState",{enumerable:!0,get:function(){return o.getPersistentState}}),s(e("./ControllerMessenger"),r)}}},{package:"@metamask/address-book-controller>@metamask/base-controller",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/base-controller/dist/index.js"}],[1017,{"./types":1021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.NETWORK_ID_TO_ETHERS_NETWORK_NAME_MAP=r.ApprovalType=r.ORIGIN_METAMASK=r.OPENSEA_TEST_API_URL=r.OPENSEA_API_URL=r.OPENSEA_PROXY_URL=r.BUILT_IN_NETWORKS=r.TESTNET_TICKER_SYMBOLS=r.ASSET_TYPES=r.GWEI=r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID=r.ERC1155_METADATA_URI_INTERFACE_ID=r.ERC1155_INTERFACE_ID=r.ERC721_ENUMERABLE_INTERFACE_ID=r.ERC721_METADATA_INTERFACE_ID=r.ERC721_INTERFACE_ID=r.ERC20=r.ERC1155=r.ERC721=r.MAX_SAFE_CHAIN_ID=r.GANACHE_CHAIN_ID=r.IPFS_DEFAULT_GATEWAY_URL=r.FALL_BACK_VS_CURRENCY=r.RPC=void 0;const n=e("./types");r.RPC="rpc",r.FALL_BACK_VS_CURRENCY="ETH",r.IPFS_DEFAULT_GATEWAY_URL="https://cloudflare-ipfs.com/ipfs/",r.GANACHE_CHAIN_ID="0x539",r.MAX_SAFE_CHAIN_ID=0xfffffffffffec,r.ERC721="ERC721",r.ERC1155="ERC1155",r.ERC20="ERC20",r.ERC721_INTERFACE_ID="0x80ac58cd",r.ERC721_METADATA_INTERFACE_ID="0x5b5e139f",r.ERC721_ENUMERABLE_INTERFACE_ID="0x780e9d63",r.ERC1155_INTERFACE_ID="0xd9b67a26",r.ERC1155_METADATA_URI_INTERFACE_ID="0x0e89341c",r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID="0x4e2312e0",r.GWEI="gwei",r.ASSET_TYPES={NATIVE:"NATIVE",TOKEN:"TOKEN",NFT:"NFT",UNKNOWN:"UNKNOWN"},r.TESTNET_TICKER_SYMBOLS={GOERLI:"GoerliETH",SEPOLIA:"SepoliaETH",LINEA_GOERLI:"LineaETH"},r.BUILT_IN_NETWORKS={[n.NetworkType.goerli]:{chainId:n.ChainId.goerli,ticker:n.NetworksTicker.goerli,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.goerli}.etherscan.io`}},[n.NetworkType.sepolia]:{chainId:n.ChainId.sepolia,ticker:n.NetworksTicker.sepolia,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.sepolia}.etherscan.io`}},[n.NetworkType.mainnet]:{chainId:n.ChainId.mainnet,ticker:n.NetworksTicker.mainnet,rpcPrefs:{blockExplorerUrl:"https://etherscan.io"}},[n.NetworkType["linea-goerli"]]:{chainId:n.ChainId["linea-goerli"],ticker:n.NetworksTicker["linea-goerli"],rpcPrefs:{blockExplorerUrl:"https://explorer.goerli.linea.build"}},[n.NetworkType["linea-mainnet"]]:{chainId:n.ChainId["linea-mainnet"],ticker:n.NetworksTicker["linea-mainnet"],rpcPrefs:{blockExplorerUrl:"https://lineascan.build"}},[n.NetworkType.rpc]:{chainId:undefined,blockExplorerUrl:undefined,rpcPrefs:undefined}},r.OPENSEA_PROXY_URL="https://proxy.metafi.codefi.network/opensea/v1/api/v1",r.OPENSEA_API_URL="https://api.opensea.io/api/v1",r.OPENSEA_TEST_API_URL="https://testnets-api.opensea.io/api/v1",r.ORIGIN_METAMASK="metamask",function(e){e.AddEthereumChain="wallet_addEthereumChain",e.ConnectAccounts="connect_accounts",e.EthDecrypt="eth_decrypt",e.EthGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.EthSign="eth_sign",e.EthSignTypedData="eth_signTypedData",e.PersonalSign="personal_sign",e.ResultError="result_error",e.ResultSuccess="result_success",e.SnapDialogAlert="snap_dialog:alert",e.SnapDialogConfirmation="snap_dialog:confirmation",e.SnapDialogPrompt="snap_dialog:prompt",e.SwitchEthereumChain="wallet_switchEthereumChain",e.Transaction="transaction",e.Unlock="unlock",e.WalletConnect="wallet_connect",e.WalletRequestPermissions="wallet_requestPermissions",e.WatchAsset="wallet_watchAsset"}(r.ApprovalType||(r.ApprovalType={})),r.NETWORK_ID_TO_ETHERS_NETWORK_NAME_MAP={[n.NetworkId.goerli]:n.NetworkType.goerli,[n.NetworkId.sepolia]:n.NetworkType.sepolia,[n.NetworkId.mainnet]:n.NetworkType.mainnet,[n.NetworkId["linea-goerli"]]:n.NetworkType["linea-goerli"],[n.NetworkId["linea-mainnet"]]:n.NetworkType["linea-mainnet"]}}}},{package:"@metamask/address-book-controller>@metamask/controller-utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/dist/constants.js"}],[1018,{"./constants":1017,"./siwe":1020,"./types":1021,"./util":1022},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./constants"),r),s(e("./util"),r),s(e("./types"),r),s(e("./siwe"),r)}}},{package:"@metamask/address-book-controller>@metamask/controller-utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/dist/index.js"}],[1019,{"@metamask/utils":1031},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("controller-utils")}}},{package:"@metamask/address-book-controller>@metamask/controller-utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/dist/logger.js"}],[102,{"@metamask/transaction-controller":1733,lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),s=e("lodash");r.default={version:17,migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=17;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>(!e.status===n.TransactionStatus.failed||e.retryCount>0&&e.retryCount<2&&(e.status=n.TransactionStatus.submitted,delete e.err),e)))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #17${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/017.js"}],[1020,{"./logger":1019,"@spruceid/siwe-parser":1976,buffer:2448,"ethereumjs-util":2816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.detectSIWE=r.isValidSIWEOrigin=r.parseDomainParts=void 0;const n=e("@spruceid/siwe-parser"),s=e("ethereumjs-util"),i=e("./logger"),o=(0,i.createModuleLogger)(i.projectLogger,"detect-siwe");function a(e){try{const n="string"!=typeof(r=e)?r:(0,s.isHexPrefixed)(r)?r.slice(2):r,i=t.from(n,"hex");return 32===i.length?e:i.toString("utf8")}catch(t){return o(t),e}var r}const c={"http:":"80","https:":"443"};r.parseDomainParts=(e,t)=>e.match(/^[^/:]*:\/\//u)?new URL(e):new URL(`${t}//${e}`);r.isValidSIWEOrigin=e=>{var t;try{const{origin:n,siwe:s}=e;if(!n||!(null===(t=null==s?void 0:s.parsedMessage)||void 0===t?void 0:t.domain))return!1;const i=new URL(n),o=(0,r.parseDomainParts)(s.parsedMessage.domain,i.protocol);return 0===o.hostname.localeCompare(i.hostname,undefined,{sensitivity:"accent"})&&(""!==o.port&&o.port!==i.port?""===i.port&&o.port===c[i.protocol]:""===o.username||o.username===i.username)}catch(e){return o(e),!1}};r.detectSIWE=e=>{try{const{data:t}=e,r=a(t);return{isSIWEMessage:!0,parsedMessage:new n.ParsedMessage(r)}}catch(e){return{isSIWEMessage:!1,parsedMessage:null}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/address-book-controller>@metamask/controller-utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/dist/siwe.js"}],[1021,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n;Object.defineProperty(r,"__esModule",{value:!0}),r.NetworksTicker=r.NetworkId=r.ChainId=r.BuiltInNetworkName=r.isNetworkType=r.NetworkType=r.InfuraNetworkType=void 0,r.InfuraNetworkType={mainnet:"mainnet",goerli:"goerli",sepolia:"sepolia","linea-goerli":"linea-goerli","linea-mainnet":"linea-mainnet"},r.NetworkType=Object.assign(Object.assign({},r.InfuraNetworkType),{rpc:"rpc"}),r.isNetworkType=function(e){return Object.values(r.NetworkType).includes(e)},function(e){e.Mainnet="mainnet",e.Goerli="goerli",e.Sepolia="sepolia",e.LineaGoerli="linea-goerli",e.LineaMainnet="linea-mainnet",e.Aurora="aurora"}(n=r.BuiltInNetworkName||(r.BuiltInNetworkName={})),r.ChainId={[n.Mainnet]:"0x1",[n.Goerli]:"0x5",[n.Sepolia]:"0xaa36a7",[n.Aurora]:"0x4e454152",[n.LineaGoerli]:"0xe704",[n.LineaMainnet]:"0xe708"},r.NetworkId={[r.InfuraNetworkType.mainnet]:"1",[r.InfuraNetworkType.goerli]:"5",[r.InfuraNetworkType.sepolia]:"11155111",[r.InfuraNetworkType["linea-goerli"]]:"59140",[r.InfuraNetworkType["linea-mainnet"]]:"59144"},function(e){e.mainnet="ETH",e.goerli="GoerliETH",e.sepolia="SepoliaETH",e["linea-goerli"]="LineaETH",e["linea-mainnet"]="ETH",e.rpc=""}(r.NetworksTicker||(r.NetworksTicker={}))}}},{package:"@metamask/address-book-controller>@metamask/controller-utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/dist/types.js"}],[1022,{"./constants":1017,"@metamask/utils":1031,buffer:2448,"eth-ens-namehash":2726,"ethereumjs-util":2816,"ethjs-unit":2862,"fast-deep-equal":2896},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.isValidJson=r.isNonEmptyArray=r.isPlainObject=r.convertHexToDecimal=r.query=r.normalizeEnsName=r.timeoutFetch=r.fetchWithErrorHandling=r.handleFetch=r.successfulFetch=r.isSmartContractCode=r.isValidHexAddress=r.toChecksumHexAddress=r.safelyExecuteWithTimeout=r.safelyExecute=r.toHex=r.fromHex=r.hexToText=r.hexToBN=r.getBuyURL=r.weiHexToGweiDec=r.gweiDecToWEIBN=r.fractionBN=r.BNToHex=r.isSafeChainId=void 0;const i=e("@metamask/utils"),o=s(e("eth-ens-namehash")),a=e("ethereumjs-util"),c=e("ethjs-unit"),u=s(e("fast-deep-equal")),l=e("./constants"),d=new Error("timeout");function h(e){return e?new a.BN((0,a.stripHexPrefix)(e),16):new a.BN(0)}function f(e,t){return n(this,void 0,void 0,(function*(){const r=yield fetch(e,t);if(!r.ok)throw new Error(`Fetch failed with status '${r.status}' for request '${e}'`);return r}))}function p(e,t){return n(this,void 0,void 0,(function*(){const r=yield f(e,t);return yield r.json()}))}r.isSafeChainId=function(e){if(!(0,a.isHexString)(e))return!1;const t=Number.parseInt(e);return Number.isSafeInteger(t)&&t>0&&t<=l.MAX_SAFE_CHAIN_ID},r.BNToHex=function(e){return(0,a.addHexPrefix)(e.toString(16))},r.fractionBN=function(e,t,r){const n=new a.BN(t),s=new a.BN(r);return e.mul(n).div(s)},r.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new a.BN(0);const t=e.toString().split("."),r=t[0]||"0";let n=t[1]||"";if(!n)return(0,c.toWei)(r,"gwei");if(n.length<=9)return(0,c.toWei)(`${r}.${n}`,"gwei");const s=n.slice(9)[0];n=n.slice(0,9);let i=(0,c.toWei)(`${r}.${n}`,"gwei");return Number(s)>=5&&(i=i.add(new a.BN(1))),i},r.weiHexToGweiDec=function(e){const t=new a.BN((0,a.stripHexPrefix)(e),16);return(0,c.fromWei)(t,"gwei").toString(10)},r.getBuyURL=function(e="1",t,r=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${r}&address=${t}&crypto_currency=ETH`;case"5":return"https://goerli-faucet.slock.it/";case"11155111":return"https://sepoliafaucet.net/";default:return undefined}},r.hexToBN=h,r.hexToText=function(e){try{const r=(0,a.stripHexPrefix)(e);return t.from(r,"hex").toString("utf8")}catch(t){return e}},r.fromHex=function(e){return a.BN.isBN(e)?e:new a.BN(h(e).toString(10))},r.toHex=function(e){return"string"==typeof e&&(0,i.isStrictHexString)(e)?e:`0x${a.BN.isBN(e)?e.toString(16):new a.BN(e.toString(),10).toString(16)}`},r.safelyExecute=function(e,t=!1){return n(this,void 0,void 0,(function*(){try{return yield e()}catch(e){return t&&console.error(e),undefined}}))},r.safelyExecuteWithTimeout=function(e,t=!1,r=500){return n(this,void 0,void 0,(function*(){try{return yield Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(d)}),r)))])}catch(e){return t&&console.error(e),undefined}}))},r.toChecksumHexAddress=function(e){const t=(0,a.addHexPrefix)(e);return(0,a.isHexString)(t)?(0,a.toChecksumAddress)(t):t},r.isValidHexAddress=function(e,{allowNonPrefixed:t=!0}={}){const r=t?(0,a.addHexPrefix)(e):e;return!!(0,a.isHexString)(r)&&(0,a.isValidAddress)(r)},r.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},r.successfulFetch=f,r.handleFetch=p,r.fetchWithErrorHandling=function({url:e,options:t,timeout:r,errorCodesToCatch:s}){return n(this,void 0,void 0,(function*(){let n;try{n=r?Promise.race([yield p(e,t),new Promise(((e,t)=>setTimeout((()=>{t(d)}),r)))]):yield p(e,t)}catch(e){!function(e,t=[]){var r;if(!e)return;const n=t.some((t=>{var r;return null===(r=e.message)||void 0===r?void 0:r.includes(`Fetch failed with status '${t}'`)}));if(!(e instanceof Error&&(n||(null===(r=e.message)||void 0===r?void 0:r.includes("Failed to fetch"))||e===d)))throw e;console.error(e)}(e,s)}return n}))},r.timeoutFetch=function(e,t,r=500){return n(this,void 0,void 0,(function*(){return Promise.race([f(e,t),new Promise(((e,t)=>setTimeout((()=>{t(d)}),r)))])}))},r.normalizeEnsName=function(e){if(e&&"string"==typeof e)try{const t=o.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},r.query=function(e,t,r=[]){return new Promise(((n,s)=>{const i=(e,t)=>{e?s(e):n(t)};t in e&&"function"==typeof e[t]?e[t](...r,i):e.sendAsync({method:t,params:r},i)}))};r.convertHexToDecimal=(e="0x0")=>(0,a.isHexString)(e)?parseInt(e,16):Number(e)?Number(e):0,r.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)},r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isValidJson=function(e){try{return(0,u.default)(e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/address-book-controller>@metamask/controller-utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/dist/util.js"}],[1023,{superstruct:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.assertExhaustive=r.assertStruct=r.assert=r.AssertionError=void 0;const n=e("superstruct");function s(e,t){return r=e,Boolean("string"==typeof r?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var r}class i extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}r.AssertionError=i,r.assert=function(e,t="Assertion failed.",r=i){if(!e){if(t instanceof Error)throw t;throw s(r,t)}},r.assertStruct=function(e,t,r="Assertion failed",o=i){try{(0,n.assert)(e,t)}catch(e){throw s(o,`${r}: ${function(e){const t=function(e){return"object"==typeof e&&null!==e&&"message"in e}(e)?e.message:String(e);return t.endsWith(".")?t.slice(0,-1):t}(e)}.`)}},r.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/assert.js"}],[1024,{"./assert":1023,superstruct:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.base64=void 0;const n=e("superstruct"),s=e("./assert");r.base64=(e,t={})=>{const r=t.paddingRequired??!1,i=t.characterSet??"base64";let o,a;return"base64"===i?o=String.raw`[A-Za-z0-9+\/]`:((0,s.assert)("base64url"===i),o=String.raw`[-_A-Za-z0-9]`),a=r?new RegExp(`^(?:${o}{4})*(?:${o}{3}=|${o}{2}==)?$`,"u"):new RegExp(`^(?:${o}{4})*(?:${o}{2,3}|${o}{3}=|${o}{2}==)?$`,"u"),(0,n.pattern)(e,a)}}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/base64.js"}],[1025,{"./assert":1023,"./hex":1030,buffer:2448},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.createDataView=r.concatBytes=r.valueToBytes=r.stringToBytes=r.numberToBytes=r.signedBigIntToBytes=r.bigIntToBytes=r.hexToBytes=r.bytesToString=r.bytesToNumber=r.bytesToSignedBigInt=r.bytesToBigInt=r.bytesToHex=r.assertIsBytes=r.isBytes=void 0;const n=e("./assert"),s=e("./hex"),i=48,o=58,a=87;const c=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function u(e){return e instanceof Uint8Array}function l(e){(0,n.assert)(u(e),"Value must be a Uint8Array.")}function d(e){if(l(e),0===e.length)return"0x";const t=c(),r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[e[n]];return(0,s.add0x)(r.join(""))}function h(e){l(e);const t=d(e);return BigInt(t)}function f(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,s.assertIsHexString)(e);const t=(0,s.remove0x)(e).toLowerCase(),r=t.length%2==0?t:`0${t}`,n=new Uint8Array(r.length/2);for(let e=0;e<n.length;e++){const t=r.charCodeAt(2*e),s=r.charCodeAt(2*e+1),c=t-(t<o?i:a),u=s-(s<o?i:a);n[e]=16*c+u}return n}function p(e){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return f(e.toString(16))}function m(e){(0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return f(e.toString(16))}function g(e){return(0,n.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function y(e){if("bigint"==typeof e)return p(e);if("number"==typeof e)return m(e);if("string"==typeof e)return e.startsWith("0x")?f(e):g(e);if(u(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}r.isBytes=u,r.assertIsBytes=l,r.bytesToHex=d,r.bytesToBigInt=h,r.bytesToSignedBigInt=function(e){l(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)},r.bytesToNumber=function(e){l(e);const t=h(e);return(0,n.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},r.bytesToString=function(e){return l(e),(new TextDecoder).decode(e)},r.hexToBytes=f,r.bigIntToBytes=p,r.signedBigIntToBytes=function(e,t){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)("number"==typeof t,"Byte length must be a number."),(0,n.assert)(t>0,"Byte length must be greater than 0."),(0,n.assert)(function(e,t){(0,n.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let r=e;const s=new Uint8Array(t);for(let e=0;e<s.length;e++)s[e]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return s.reverse()},r.numberToBytes=m,r.stringToBytes=g,r.valueToBytes=y,r.concatBytes=function(e){const t=new Array(e.length);let r=0;for(let n=0;n<e.length;n++){const s=y(e[n]);t[n]=s,r+=s.length}const n=new Uint8Array(r);for(let e=0,r=0;e<t.length;e++)n.set(t[e],r),r+=t[e].length;return n},r.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/bytes.js"}],[1026,{"./base64":1024,superstruct:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ChecksumStruct=void 0;const n=e("superstruct"),s=e("./base64");r.ChecksumStruct=(0,n.size)((0,s.base64)((0,n.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/checksum.js"}],[1027,{"./assert":1023,"./bytes":1025,"./hex":1030,superstruct:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createHex=r.createBytes=r.createBigInt=r.createNumber=void 0;const n=e("superstruct"),s=e("./assert"),i=e("./bytes"),o=e("./hex"),a=(0,n.union)([(0,n.number)(),(0,n.bigint)(),(0,n.string)(),o.StrictHexStruct]),c=(0,n.coerce)((0,n.number)(),a,Number),u=(0,n.coerce)((0,n.bigint)(),a,BigInt),l=((0,n.union)([o.StrictHexStruct,(0,n.instance)(Uint8Array)]),(0,n.coerce)((0,n.instance)(Uint8Array),(0,n.union)([o.StrictHexStruct]),i.hexToBytes)),d=(0,n.coerce)(o.StrictHexStruct,(0,n.instance)(Uint8Array),i.bytesToHex);r.createNumber=function(e){try{const t=(0,n.create)(e,c);return(0,s.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof n.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},r.createBigInt=function(e){try{return(0,n.create)(e,u)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},r.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,n.create)(e,l)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},r.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,n.create)(e,d)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/coercers.js"}],[1028,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},o=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.FrozenSet=r.FrozenMap=void 0;class a{constructor(e){n.set(this,void 0),i(this,n,new Map(e),"f"),Object.freeze(this)}get size(){return o(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return o(this,n,"f")[Symbol.iterator]()}entries(){return o(this,n,"f").entries()}forEach(e,t){return o(this,n,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}get(e){return o(this,n,"f").get(e)}has(e){return o(this,n,"f").has(e)}keys(){return o(this,n,"f").keys()}values(){return o(this,n,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}r.FrozenMap=a;class c{constructor(e){s.set(this,void 0),i(this,s,new Set(e),"f"),Object.freeze(this)}get size(){return o(this,s,"f").size}[(s=new WeakMap,Symbol.iterator)](){return o(this,s,"f")[Symbol.iterator]()}entries(){return o(this,s,"f").entries()}forEach(e,t){return o(this,s,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}has(e){return o(this,s,"f").has(e)}keys(){return o(this,s,"f").keys()}values(){return o(this,s,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}r.FrozenSet=c,Object.freeze(a),Object.freeze(a.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/collections.js"}],[1029,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/encryption-types.js"}],[103,{"fast-json-patch":2902,lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("fast-json-patch"))&&n.__esModule?n:{default:n},i=e("lodash");r.default={version:18,migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=18;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>{if(!e.history||0===e.history.length){const t=function(e){const t={...e};return delete t.history,(0,i.cloneDeep)(t)}(e);return e.history=[t],e}const t=(r=e.history,r.map(((e,t)=>0===t?e:function(e,t,r){const n=s.default.compare(e,t);return n[0]&&(r&&(n[0].note=r),n[0].timestamp=Date.now()),n}(r[t-1],e)))).filter((e=>!Array.isArray(e)||e.length>0));var r;return e.history=t,e}))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #18${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/018.js"}],[1030,{"./assert":1023,"./bytes":1025,"@noble/hashes/sha3":1822,superstruct:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.remove0x=r.add0x=r.isValidChecksumAddress=r.getChecksumAddress=r.isValidHexAddress=r.assertIsStrictHexString=r.assertIsHexString=r.isStrictHexString=r.isHexString=r.HexChecksumAddressStruct=r.HexAddressStruct=r.StrictHexStruct=r.HexStruct=void 0;const n=e("@noble/hashes/sha3"),s=e("superstruct"),i=e("./assert"),o=e("./bytes");function a(e){return(0,s.is)(e,r.HexStruct)}function c(e){return(0,s.is)(e,r.StrictHexStruct)}function u(e){(0,i.assert)((0,s.is)(e,r.HexChecksumAddressStruct),"Invalid hex address.");const t=d(e.toLowerCase()),a=d((0,o.bytesToHex)((0,n.keccak_256)(t)));return`0x${t.split("").map(((e,t)=>{const r=a[t];return(0,i.assert)((0,s.is)(r,(0,s.string)()),"Hash shorter than address."),parseInt(r,16)>7?e.toUpperCase():e})).join("")}`}function l(e){return!!(0,s.is)(e,r.HexChecksumAddressStruct)&&u(e)===e}function d(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}r.HexStruct=(0,s.pattern)((0,s.string)(),/^(?:0x)?[0-9a-f]+$/iu),r.StrictHexStruct=(0,s.pattern)((0,s.string)(),/^0x[0-9a-f]+$/iu),r.HexAddressStruct=(0,s.pattern)((0,s.string)(),/^0x[0-9a-f]{40}$/u),r.HexChecksumAddressStruct=(0,s.pattern)((0,s.string)(),/^0x[0-9a-fA-F]{40}$/u),r.isHexString=a,r.isStrictHexString=c,r.assertIsHexString=function(e){(0,i.assert)(a(e),"Value must be a hexadecimal string.")},r.assertIsStrictHexString=function(e){(0,i.assert)(c(e),'Value must be a hexadecimal string, starting with "0x".')},r.isValidHexAddress=function(e){return(0,s.is)(e,r.HexAddressStruct)||l(e)},r.getChecksumAddress=u,r.isValidChecksumAddress=l,r.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},r.remove0x=d}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/hex.js"}],[1031,{"./assert":1023,"./base64":1024,"./bytes":1025,"./checksum":1026,"./coercers":1027,"./collections":1028,"./encryption-types":1029,"./hex":1030,"./json":1032,"./keyring":1033,"./logging":1034,"./misc":1035,"./number":1036,"./opaque":1037,"./time":1038,"./transaction-types":1039,"./versions":1040},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./assert"),r),s(e("./base64"),r),s(e("./bytes"),r),s(e("./checksum"),r),s(e("./coercers"),r),s(e("./collections"),r),s(e("./encryption-types"),r),s(e("./hex"),r),s(e("./json"),r),s(e("./keyring"),r),s(e("./logging"),r),s(e("./misc"),r),s(e("./number"),r),s(e("./opaque"),r),s(e("./time"),r),s(e("./transaction-types"),r),s(e("./versions"),r)}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/index.js"}],[1032,{"./assert":1023,superstruct:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getJsonRpcIdValidator=r.assertIsJsonRpcError=r.isJsonRpcError=r.assertIsJsonRpcFailure=r.isJsonRpcFailure=r.assertIsJsonRpcSuccess=r.isJsonRpcSuccess=r.assertIsJsonRpcResponse=r.isJsonRpcResponse=r.assertIsPendingJsonRpcResponse=r.isPendingJsonRpcResponse=r.JsonRpcResponseStruct=r.JsonRpcFailureStruct=r.JsonRpcSuccessStruct=r.PendingJsonRpcResponseStruct=r.assertIsJsonRpcRequest=r.isJsonRpcRequest=r.assertIsJsonRpcNotification=r.isJsonRpcNotification=r.JsonRpcNotificationStruct=r.JsonRpcRequestStruct=r.JsonRpcParamsStruct=r.JsonRpcErrorStruct=r.JsonRpcIdStruct=r.JsonRpcVersionStruct=r.jsonrpc2=r.getJsonSize=r.getSafeJson=r.isValidJson=r.JsonStruct=r.UnsafeJsonStruct=void 0;const n=e("superstruct"),s=e("./assert");function i(e){return(0,n.create)(e,r.JsonStruct)}r.UnsafeJsonStruct=(0,n.union)([(0,n.literal)(null),(0,n.boolean)(),(0,n.define)("finite number",(e=>(0,n.is)(e,(0,n.number)())&&Number.isFinite(e))),(0,n.string)(),(0,n.array)((0,n.lazy)((()=>r.UnsafeJsonStruct))),(0,n.record)((0,n.string)(),(0,n.lazy)((()=>r.UnsafeJsonStruct)))]),r.JsonStruct=(0,n.coerce)(r.UnsafeJsonStruct,(0,n.any)(),(e=>((0,s.assertStruct)(e,r.UnsafeJsonStruct),JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t)))))),r.isValidJson=function(e){try{return i(e),!0}catch{return!1}},r.getSafeJson=i,r.getJsonSize=function(e){(0,s.assertStruct)(e,r.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},r.jsonrpc2="2.0",r.JsonRpcVersionStruct=(0,n.literal)(r.jsonrpc2),r.JsonRpcIdStruct=(0,n.nullable)((0,n.union)([(0,n.number)(),(0,n.string)()])),r.JsonRpcErrorStruct=(0,n.object)({code:(0,n.integer)(),message:(0,n.string)(),data:(0,n.optional)(r.JsonStruct),stack:(0,n.optional)((0,n.string)())}),r.JsonRpcParamsStruct=(0,n.optional)((0,n.union)([(0,n.record)((0,n.string)(),r.JsonStruct),(0,n.array)(r.JsonStruct)])),r.JsonRpcRequestStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:r.JsonRpcParamsStruct}),r.JsonRpcNotificationStruct=(0,n.omit)(r.JsonRpcRequestStruct,["id"]),r.isJsonRpcNotification=function(e){return(0,n.is)(e,r.JsonRpcNotificationStruct)},r.assertIsJsonRpcNotification=function(e,t){(0,s.assertStruct)(e,r.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},r.isJsonRpcRequest=function(e){return(0,n.is)(e,r.JsonRpcRequestStruct)},r.assertIsJsonRpcRequest=function(e,t){(0,s.assertStruct)(e,r.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},r.PendingJsonRpcResponseStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:(0,n.optional)((0,n.unknown)()),error:(0,n.optional)(r.JsonRpcErrorStruct)}),r.JsonRpcSuccessStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:r.JsonStruct}),r.JsonRpcFailureStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,error:r.JsonRpcErrorStruct}),r.JsonRpcResponseStruct=(0,n.union)([r.JsonRpcSuccessStruct,r.JsonRpcFailureStruct]),r.isPendingJsonRpcResponse=function(e){return(0,n.is)(e,r.PendingJsonRpcResponseStruct)},r.assertIsPendingJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},r.isJsonRpcResponse=function(e){return(0,n.is)(e,r.JsonRpcResponseStruct)},r.assertIsJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},r.isJsonRpcSuccess=function(e){return(0,n.is)(e,r.JsonRpcSuccessStruct)},r.assertIsJsonRpcSuccess=function(e,t){(0,s.assertStruct)(e,r.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},r.isJsonRpcFailure=function(e){return(0,n.is)(e,r.JsonRpcFailureStruct)},r.assertIsJsonRpcFailure=function(e,t){(0,s.assertStruct)(e,r.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},r.isJsonRpcError=function(e){return(0,n.is)(e,r.JsonRpcErrorStruct)},r.assertIsJsonRpcError=function(e,t){(0,s.assertStruct)(e,r.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},r.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:r,permitNull:n}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(r||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||n&&null===e)}}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/json.js"}],[1033,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/keyring.js"}],[1034,{debug:2674},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.createProjectLogger=void 0;const s=(0,n(e("debug")).default)("metamask");r.createProjectLogger=function(e){return s.extend(e)},r.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/logging.js"}],[1035,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.calculateNumberSize=r.calculateStringSize=r.isASCII=r.isPlainObject=r.ESCAPE_CHARACTERS_REGEXP=r.JsonSize=r.hasProperty=r.isObject=r.isNullOrUndefined=r.isNonEmptyArray=void 0,r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isNullOrUndefined=function(e){return null===e||e===undefined},r.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function n(e){return e.charCodeAt(0)<=127}r.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(r.JsonSize||(r.JsonSize={})),r.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,r.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},r.isASCII=n,r.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>n(t)?e+1:e+2),0)+(e.match(r.ESCAPE_CHARACTERS_REGEXP)??[]).length},r.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/misc.js"}],[1036,{"./assert":1023,"./hex":1030},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hexToBigInt=r.hexToNumber=r.bigIntToHex=r.numberToHex=void 0;const n=e("./assert"),s=e("./hex");r.numberToHex=e=>((0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,s.add0x)(e.toString(16)));r.bigIntToHex=e=>((0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=0,"Value must be a non-negative bigint."),(0,s.add0x)(e.toString(16)));r.hexToNumber=e=>{(0,s.assertIsHexString)(e);const t=parseInt(e,16);return(0,n.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};r.hexToBigInt=e=>((0,s.assertIsHexString)(e),BigInt((0,s.add0x)(e)))}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/number.js"}],[1037,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/opaque.js"}],[1038,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.timeSince=r.inMilliseconds=r.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(r.Duration||(r.Duration={}));const n=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};r.inMilliseconds=function(e,t){return n(e,"count"),e*t},r.timeSince=function(e){return n(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/time.js"}],[1039,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/transaction-types.js"}],[104,{"@metamask/transaction-controller":1733,lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),s=e("lodash");r.default={version:19,migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=19;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map(((e,t,r)=>{if(e.status!==n.TransactionStatus.submitted)return e;const s=function(e){const t=e.map((e=>{const{nonce:t}=e.txParams;return parseInt(t||"0x0",16)}));return Math.max.apply(null,t)}(r.filter((e=>e.status===n.TransactionStatus.confirmed)).filter((t=>t.txParams.from===e.txParams.from)).filter((t=>t.metamaskNetworkId.from===e.metamaskNetworkId.from))),i=function(e,t){const r=e.map((e=>{const{nonce:t}=e.txParams;return parseInt(t,16)}));let n=t;for(;r.includes(n);)n+=1;return n}(r.filter((e=>e.status===n.TransactionStatus.submitted)).filter((t=>t.txParams.from===e.txParams.from)).filter((t=>t.metamaskNetworkId.from===e.metamaskNetworkId.from)),s),o=Math.max(i,s);return parseInt(e.txParams.nonce,16)>o+1&&(e.status=n.TransactionStatus.failed,e.err={message:"nonce too high",note:"migration 019 custom error"}),e}))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #19${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/019.js"}],[1040,{"./assert":1023,semver:3872,superstruct:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.satisfiesVersionRange=r.gtRange=r.gtVersion=r.assertIsSemVerRange=r.assertIsSemVerVersion=r.isValidSemVerRange=r.isValidSemVerVersion=r.VersionRangeStruct=r.VersionStruct=void 0;const n=e("semver"),s=e("superstruct"),i=e("./assert");r.VersionStruct=(0,s.refine)((0,s.string)(),"Version",(e=>null!==(0,n.valid)(e)||`Expected SemVer version, got "${e}"`)),r.VersionRangeStruct=(0,s.refine)((0,s.string)(),"Version range",(e=>null!==(0,n.validRange)(e)||`Expected SemVer range, got "${e}"`)),r.isValidSemVerVersion=function(e){return(0,s.is)(e,r.VersionStruct)},r.isValidSemVerRange=function(e){return(0,s.is)(e,r.VersionRangeStruct)},r.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,r.VersionStruct)},r.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,r.VersionRangeStruct)},r.gtVersion=function(e,t){return(0,n.gt)(e,t)},r.gtRange=function(e,t){return(0,n.gtr)(e,t)},r.satisfiesVersionRange=function(e,t){return(0,n.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/versions.js"}],[1041,{"@metamask/base-controller":1078},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.AnnouncementController=void 0;const o=e("@metamask/base-controller"),a={announcements:{}},c={announcements:{persist:!0,anonymous:!0}};class u extends o.BaseController{constructor({messenger:e,state:t,allAnnouncements:r}){const o=Object.assign(Object.assign({},a),t);super({messenger:e,metadata:c,name:"AnnouncementController",state:o}),n.add(this),i(this,n,"m",s).call(this,r)}updateViewed(e){this.update((({announcements:t})=>{for(const r of Object.keys(e).map(Number))t[r].isShown=e[r]}))}}r.AnnouncementController=u,n=new WeakSet,s=function(e){this.update((t=>{Object.values(e).forEach((e=>{var r;t.announcements[e.id]=null!==(r=t.announcements[e.id])&&void 0!==r?r:Object.assign(Object.assign({},e),{isShown:!1})}))}))}}}},{package:"@metamask/announcement-controller",file:"node_modules/@metamask/announcement-controller/dist/AnnouncementController.js"}],[1042,{"./AnnouncementController":1041},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./AnnouncementController"),r)}}},{package:"@metamask/announcement-controller",file:"node_modules/@metamask/announcement-controller/dist/index.js"}],[1043,{"./errors":1044,"@metamask/base-controller":1078,"@metamask/rpc-errors":1505,nanoid:1046},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,o,a,c,u,l,d,h,f,p,m=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},g=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},y=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.ApprovalController=r.APPROVAL_TYPE_RESULT_SUCCESS=r.APPROVAL_TYPE_RESULT_ERROR=r.ORIGIN_METAMASK=void 0;const w=e("@metamask/base-controller"),v=e("@metamask/rpc-errors"),b=e("nanoid"),k=e("./errors");r.ORIGIN_METAMASK="metamask",r.APPROVAL_TYPE_RESULT_ERROR="result_error",r.APPROVAL_TYPE_RESULT_SUCCESS="result_success";const _="ApprovalController",S={pendingApprovals:{persist:!1,anonymous:!0},pendingApprovalCount:{persist:!1,anonymous:!1},approvalFlows:{persist:!1,anonymous:!1}};class T extends w.BaseController{constructor({messenger:e,showApprovalRequest:t,state:r={},typesExcludedFromRateLimiting:c=[]}){super({name:_,metadata:S,messenger:e,state:Object.assign(Object.assign({},{pendingApprovals:{},pendingApprovalCount:0,approvalFlows:[]}),r)}),n.add(this),s.set(this,void 0),i.set(this,void 0),o.set(this,void 0),a.set(this,void 0),g(this,s,new Map,"f"),g(this,i,new Map,"f"),g(this,o,t,"f"),g(this,a,c,"f"),this.registerMessageHandlers()}registerMessageHandlers(){this.messagingSystem.registerActionHandler(`${_}:clearRequests`,this.clear.bind(this)),this.messagingSystem.registerActionHandler(`${_}:addRequest`,((e,t)=>t?this.addAndShowApprovalRequest(e):this.add(e))),this.messagingSystem.registerActionHandler(`${_}:hasRequest`,this.has.bind(this)),this.messagingSystem.registerActionHandler(`${_}:acceptRequest`,this.accept.bind(this)),this.messagingSystem.registerActionHandler(`${_}:rejectRequest`,this.reject.bind(this)),this.messagingSystem.registerActionHandler(`${_}:updateRequestState`,this.updateRequestState.bind(this)),this.messagingSystem.registerActionHandler(`${_}:startFlow`,this.startFlow.bind(this)),this.messagingSystem.registerActionHandler(`${_}:endFlow`,this.endFlow.bind(this)),this.messagingSystem.registerActionHandler(`${_}:setFlowLoadingText`,this.setFlowLoadingText.bind(this)),this.messagingSystem.registerActionHandler(`${_}:showSuccess`,this.success.bind(this)),this.messagingSystem.registerActionHandler(`${_}:showError`,this.error.bind(this))}addAndShowApprovalRequest(e){const t=y(this,n,"m",c).call(this,e.origin,e.type,e.id,e.requestData,e.requestState,e.expectsResult);return y(this,o,"f").call(this),t}add(e){return y(this,n,"m",c).call(this,e.origin,e.type,e.id,e.requestData,e.requestState,e.expectsResult)}get(e){return this.state.pendingApprovals[e]}getApprovalCount(e={}){var t;if(!e.origin&&!e.type)throw new Error("Must specify origin, type, or both.");const{origin:r,type:n}=e;if(r&&n)return(null===(t=y(this,i,"f").get(r))||void 0===t?void 0:t.get(n))||0;if(r)return Array.from((y(this,i,"f").get(r)||new Map).values()).reduce(((e,t)=>e+t),0);let s=0;for(const e of Object.values(this.state.pendingApprovals))e.type===n&&(s+=1);return s}getTotalApprovalCount(){return this.state.pendingApprovalCount}has(e={}){var t;const{id:r,origin:n,type:o}=e;if(r){if("string"!=typeof r)throw new Error("May not specify non-string id.");return y(this,s,"f").has(r)}if(o&&"string"!=typeof o)throw new Error("May not specify non-string type.");if(n){if("string"!=typeof n)throw new Error("May not specify non-string origin.");return o?Boolean(null===(t=y(this,i,"f").get(n))||void 0===t?void 0:t.get(o)):y(this,i,"f").has(n)}if(o){for(const e of Object.values(this.state.pendingApprovals))if(e.type===o)return!0;return!1}throw new Error("Must specify a valid combination of id, origin, and type.")}accept(e,t,r){const s=this.get(e),i=y(this,n,"m",f).call(this,e);return new Promise(((n,o)=>{const a={success:e=>n({value:e}),error:o};if((null==r?void 0:r.waitForResult)&&!s.expectsResult)return void o(new k.ApprovalRequestNoResultSupportError(e));const c=(null==r?void 0:r.waitForResult)?a:undefined,u=s.expectsResult?{value:t,resultCallbacks:c}:t;i.resolve(u),(null==r?void 0:r.waitForResult)||n({value:undefined})}))}reject(e,t){y(this,n,"m",f).call(this,e).reject(t)}clear(e){for(const t of y(this,s,"f").keys())this.reject(t,e);y(this,i,"f").clear(),this.update((e=>{e.pendingApprovals={},e.pendingApprovalCount=0}))}updateRequestState(e){if(!this.state.pendingApprovals[e.id])throw new k.ApprovalRequestNotFoundError(e.id);this.update((t=>{t.pendingApprovals[e.id].requestState=e.requestState}))}startFlow(e={}){var t,r;const n=null!==(t=e.id)&&void 0!==t?t:(0,b.nanoid)(),s=null!==(r=e.loadingText)&&void 0!==r?r:null;return this.update((e=>{e.approvalFlows.push({id:n,loadingText:s})})),!1!==e.show&&y(this,o,"f").call(this),{id:n,loadingText:s}}endFlow({id:e}){if(!this.state.approvalFlows.length)throw new k.NoApprovalFlowsError;if(e!==this.state.approvalFlows.slice(-1)[0].id)throw new k.EndInvalidFlowError(e,this.state.approvalFlows.map((e=>e.id)));this.update((e=>{e.approvalFlows.pop()}))}setFlowLoadingText({id:e,loadingText:t}){const r=this.state.approvalFlows.findIndex((t=>t.id===e));if(-1===r)throw new k.MissingApprovalFlowError(e);this.update((e=>{e.approvalFlows[r].loadingText=t}))}success(e={}){return m(this,void 0,void 0,(function*(){return yield y(this,n,"m",p).call(this,r.APPROVAL_TYPE_RESULT_SUCCESS,e,{message:e.message,header:e.header,title:e.title,icon:e.icon}),{}}))}error(e={}){return m(this,void 0,void 0,(function*(){return yield y(this,n,"m",p).call(this,r.APPROVAL_TYPE_RESULT_ERROR,e,{error:e.error,header:e.header,title:e.title,icon:e.icon}),{}}))}}r.ApprovalController=T,s=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,n=new WeakSet,c=function(e,t,r=(0,b.nanoid)(),i,o,c){if(y(this,n,"m",u).call(this,r,e,t,i,o),!y(this,a,"f").includes(t)&&this.has({origin:e,type:t}))throw v.rpcErrors.resourceUnavailable(((e,t)=>`Request of type '${t}' already pending for origin ${e}. Please wait.`)(e,t));return new Promise(((a,u)=>{y(this,s,"f").set(r,{resolve:a,reject:u}),y(this,n,"m",l).call(this,e,t),y(this,n,"m",d).call(this,r,e,t,i,o,c)}))},u=function(e,t,r,n,i){let o=null;if(e&&"string"==typeof e?y(this,s,"f").has(e)?o=`Approval request with id '${e}' already exists.`:t&&"string"==typeof t?r&&"string"==typeof r?n&&("object"!=typeof n||Array.isArray(n))?o="Request data must be a plain object if specified.":i&&("object"!=typeof i||Array.isArray(i))&&(o="Request state must be a plain object if specified."):o="Must specify non-empty string type.":o="Must specify non-empty string origin.":o="Must specify non-empty string id.",o)throw v.rpcErrors.internal(o)},l=function(e,t){let r=y(this,i,"f").get(e);r||(r=new Map,y(this,i,"f").set(e,r));const n=r.get(t)||0;r.set(t,n+1)},d=function(e,t,r,n,s,i){const o={id:e,origin:t,type:r,time:Date.now(),requestData:n||null,requestState:s||null,expectsResult:i||!1};this.update((t=>{t.pendingApprovals[e]=o,t.pendingApprovalCount=Object.keys(t.pendingApprovals).length}))},h=function(e){y(this,s,"f").delete(e);const{origin:t,type:r}=this.state.pendingApprovals[e],n=y(this,i,"f").get(t),o=this.getApprovalCount({origin:t}),a=n.get(r);1===o?y(this,i,"f").delete(t):n.set(r,a-1),this.update((t=>{delete t.pendingApprovals[e],t.pendingApprovalCount=Object.keys(t.pendingApprovals).length}))},f=function(e){const t=y(this,s,"f").get(e);if(!t)throw new k.ApprovalRequestNotFoundError(e);return y(this,n,"m",h).call(this,e),t},p=function(e,t,n){return m(this,void 0,void 0,(function*(){try{yield this.addAndShowApprovalRequest({origin:r.ORIGIN_METAMASK,type:e,requestData:n})}catch(e){console.info("Failed to display result page",e)}finally{if(t.flowToEnd)try{this.endFlow({id:t.flowToEnd})}catch(e){console.info("Failed to end flow",{id:t.flowToEnd,error:e})}}}))},r.default=T}}},{package:"@metamask/approval-controller",file:"node_modules/@metamask/approval-controller/dist/ApprovalController.js"}],[1044,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MissingApprovalFlowError=r.EndInvalidFlowError=r.NoApprovalFlowsError=r.ApprovalRequestNoResultSupportError=r.ApprovalRequestNotFoundError=void 0;class n extends Error{constructor(e){super(`Approval request with id '${e}' not found.`)}}r.ApprovalRequestNotFoundError=n;class s extends Error{constructor(e){super(`Approval acceptance requested result but request with id '${e}' does not support it.`)}}r.ApprovalRequestNoResultSupportError=s;class i extends Error{constructor(){super("No approval flows found.")}}r.NoApprovalFlowsError=i;class o extends Error{constructor(e,t){super(`Attempted to end flow with id '${e}' which does not match current flow with id '${t.slice(-1)[0]}'. All Flows: ${t.join(", ")}`)}}r.EndInvalidFlowError=o;class a extends Error{constructor(e){super(`No approval flows found with id '${e}'.`)}}r.MissingApprovalFlowError=a}}},{package:"@metamask/approval-controller",file:"node_modules/@metamask/approval-controller/dist/errors.js"}],[1045,{"./ApprovalController":1043,"./errors":1044},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./ApprovalController"),r),s(e("./errors"),r)}}},{package:"@metamask/approval-controller",file:"node_modules/@metamask/approval-controller/dist/index.js"}],[1046,{"./url-alphabet/index.cjs":1047},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){let{urlAlphabet:n}=e("./url-alphabet/index.cjs"),s=e=>crypto.getRandomValues(new Uint8Array(e)),i=(e,t,r)=>{let n=(2<<Math.log(e.length-1)/Math.LN2)-1,s=-~(1.6*n*t/e.length);return(i=t)=>{let o="";for(;;){let t=r(s),a=s;for(;a--;)if(o+=e[t[a]&n]||"",o.length===i)return o}}};t.exports={nanoid:(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),""),customAlphabet:(e,t=21)=>i(e,t,s),customRandom:i,urlAlphabet:n,random:s}}}},{package:"@metamask/approval-controller>nanoid",file:"node_modules/@metamask/approval-controller/node_modules/nanoid/index.browser.cjs"}],[1047,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={urlAlphabet:"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"}}}},{package:"@metamask/approval-controller>nanoid",file:"node_modules/@metamask/approval-controller/node_modules/nanoid/url-alphabet/index.cjs"}],[105,{lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:20,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=20;try{const e=function(e){const t=e;"metamask"in t&&!("firstTimeInfo"in t.metamask)&&(t.metamask.firstTimeInfo={version:"3.12.0",date:Date.now()});return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #20${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/020.js"}],[106,{lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:21,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=21;try{const e=function(e){const t=e;return delete t.BlacklistController,delete t.RecentBlocks,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #21${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/021.js"}],[107,{"@metamask/transaction-controller":1733,lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),s=e("lodash");r.default={version:22,migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=22;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>(e.status!==n.TransactionStatus.submitted||e.submittedTime||(e.submittedTime=(new Date).getTime()),e)))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #22${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/022.js"}],[1079,{"@metamask/utils":1786,buffer:2448},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.isVaultUpdated=r.updateVaultWithDetail=r.updateVault=r.generateSalt=r.serializeBufferForStorage=r.serializeBufferFromStorage=r.keyFromPassword=r.exportKey=r.importKey=r.decryptWithKey=r.decryptWithDetail=r.decrypt=r.encryptWithKey=r.encryptWithDetail=r.encrypt=void 0;const n=e("@metamask/utils"),s="jwk",i="AES-GCM",o="utf-8",a={algorithm:"PBKDF2",params:{iterations:1e4}},c={algorithm:"PBKDF2",params:{iterations:9e5}};async function u(e,t,r,n=g(),s=c){const i=r||await m(e,n,!1,s),o=await d(i,t);return o.salt=n,JSON.stringify(o)}async function l(e,t,r=g(),n=c){const s=await m(e,r,!0,n),i=await p(s);return{vault:await u(e,t,s,r),exportedKeyString:i}}async function d(e,r){const n=JSON.stringify(r),s=t.from(n,o),a=global.crypto.getRandomValues(new Uint8Array(16)),c=v(e),u=await global.crypto.subtle.encrypt({name:i,iv:a},c,s),l=new Uint8Array(u),d=t.from(a).toString("base64"),h={data:t.from(l).toString("base64"),iv:d};return y(e)&&(h.keyMetadata=e.derivationOptions),h}async function h(e,t,r){const n=JSON.parse(t),{salt:s,keyMetadata:i}=n,o=v(r||await m(e,s,!1,i));return await f(o,n)}async function f(e,r){const n=t.from(r.data,"base64"),s=t.from(r.iv,"base64"),a=v(e);let c;try{const e=await crypto.subtle.decrypt({name:i,iv:s},a,n),r=new Uint8Array(e),u=t.from(r).toString(o);c=JSON.parse(u)}catch(e){throw new Error("Incorrect password")}return c}async function p(e){return y(e)?JSON.stringify({key:await window.crypto.subtle.exportKey(s,e.key),derivationOptions:e.derivationOptions}):JSON.stringify(await window.crypto.subtle.exportKey(s,e))}async function m(e,r,n=!1,s=a){const c=t.from(e,o),u=t.from(r,"base64"),l=await global.crypto.subtle.importKey("raw",c,{name:"PBKDF2"},!1,["deriveBits","deriveKey"]),d=await global.crypto.subtle.deriveKey({name:"PBKDF2",salt:u,iterations:s.params.iterations,hash:"SHA-256"},l,{name:i,length:256},n,["encrypt","decrypt"]);return s?{key:d,derivationOptions:s}:d}function g(e=32){const t=new Uint8Array(e);global.crypto.getRandomValues(t);return btoa(String.fromCharCode.apply(null,t))}function y(e){return(0,n.isPlainObject)(e)&&(0,n.hasProperty)(e,"key")&&(0,n.hasProperty)(e,"derivationOptions")&&e.key instanceof CryptoKey&&w(e.derivationOptions)}function w(e){return(0,n.isPlainObject)(e)&&(0,n.hasProperty)(e,"algorithm")&&(0,n.hasProperty)(e,"params")}function v(e){return y(e)?e.key:e}function b(e,t=c){const{keyMetadata:r}=JSON.parse(e);return w(r)&&r.algorithm===t.algorithm&&r.params.iterations===t.params.iterations}r.encrypt=u,r.encryptWithDetail=l,r.encryptWithKey=d,r.decrypt=h,r.decryptWithDetail=async function(e,t){const r=JSON.parse(t),{salt:n,keyMetadata:s}=r,i=await m(e,n,!0,s);return{exportedKeyString:await p(i),vault:await h(e,t,i),salt:n}},r.decryptWithKey=f,r.importKey=async function(e){const t=JSON.parse(e);return r=t,(0,n.isPlainObject)(r)&&(0,n.hasProperty)(r,"key")&&(0,n.hasProperty)(r,"derivationOptions")&&w(r.derivationOptions)?{key:await window.crypto.subtle.importKey(s,t.key,i,!0,["encrypt","decrypt"]),derivationOptions:t.derivationOptions}:await window.crypto.subtle.importKey(s,t,i,!0,["encrypt","decrypt"]);var r},r.exportKey=p,r.keyFromPassword=m,r.serializeBufferFromStorage=function(e){const t="0x"===e.slice(0,2)?e.slice(2):e,r=new Uint8Array(t.length/2);for(let e=0;e<t.length;e+=2){const n=t.substr(e,2);r[e/2]=parseInt(n,16)}return r},r.serializeBufferForStorage=function(e){let t="0x";return e.forEach((e=>{t+=function(e){let t=e.toString(16);for(;t.length<2;)t=`0${t}`;return t}(e)})),t},r.generateSalt=g,r.updateVault=async function(e,t,r=c){return b(e,r)?e:u(t,await h(t,e),undefined,undefined,r)},r.updateVaultWithDetail=async function(e,t,r=c){return b(e.vault,r)?e:l(t,await h(t,e.vault),undefined,r)},r.isVaultUpdated=b}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/browser-passworder",file:"node_modules/@metamask/browser-passworder/dist/index.js"}],[108,{"@metamask/transaction-controller":1733,lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/transaction-controller");r.default={version:23,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=23;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;if(e.length<=40)return t;const r=e.reverse();let n=!0;for(;r.length>40&&n;){const e=r.findIndex((e=>e.status===s.TransactionStatus.failed||e.status===s.TransactionStatus.rejected||e.status===s.TransactionStatus.confirmed||e.status===s.TransactionStatus.dropped));e<0?n=!1:r.splice(e,1)}t.TransactionController.transactions=r.reverse()}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #23${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/023.js"}],[1088,{"@ethereumjs/util":399,"@metamask/eth-sig-util":1122,"@metamask/scure-bip39":1508,"@metamask/scure-bip39/dist/wordlists/english":1509,"@metamask/utils":1786,buffer:2448,"ethereum-cryptography/hdkey":2782,"ethereum-cryptography/keccak":2783,"ethereum-cryptography/utils":2790},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){const{HDKey:n}=e("ethereum-cryptography/hdkey"),{keccak256:s}=e("ethereum-cryptography/keccak"),{bytesToHex:i}=e("ethereum-cryptography/utils"),{privateToPublic:o,publicToAddress:a,ecsign:c,arrToBufArr:u,bufferToHex:l}=e("@ethereumjs/util"),d=e("@metamask/scure-bip39"),{wordlist:h}=e("@metamask/scure-bip39/dist/wordlists/english"),{concatSig:f,decrypt:p,getEncryptionPublicKey:m,normalize:g,personalSign:y,signTypedData:w,SignTypedDataVersion:v}=e("@metamask/eth-sig-util"),{assertIsHexString:b,remove0x:k}=e("@metamask/utils"),_="HD Key Tree";class S{constructor(e={}){this.type=_,this._wallets=[],this.deserialize(e)}generateRandomMnemonic(){this._initFromMnemonic(d.generateMnemonic(h))}_uint8ArrayToString(e){return Array.from(new Uint16Array(new Uint8Array(e).buffer)).map((e=>h[e])).join(" ")}_stringToUint8Array(e){const t=e.split(" ").map((e=>h.indexOf(e)));return new Uint8Array(new Uint16Array(t).buffer)}_mnemonicToUint8Array(e){let t=e;if(e&&e.type&&"Buffer"===e.type&&(t=e.data),"string"==typeof t||r.isBuffer(t)||Array.isArray(t)){let e=t;return Array.isArray(t)?e=r.from(t).toString():r.isBuffer(t)&&(e=t.toString()),this._stringToUint8Array(e)}return t instanceof Object&&!(t instanceof Uint8Array)?Uint8Array.from(Object.values(t)):t}serialize(){const e=this._uint8ArrayToString(this.mnemonic),t=new TextEncoder("utf-8").encode(e);return Promise.resolve({mnemonic:Array.from(t),numberOfAccounts:this._wallets.length,hdPath:this.hdPath})}deserialize(e={}){if(e.numberOfAccounts&&!e.mnemonic)throw new Error("Eth-Hd-Keyring: Deserialize method cannot be called with an opts value for numberOfAccounts and no menmonic");if(this.root)throw new Error("Eth-Hd-Keyring: Secret recovery phrase already provided");return this.opts=e,this._wallets=[],this.mnemonic=null,this.root=null,this.hdPath=e.hdPath||"m/44'/60'/0'/0",e.mnemonic&&this._initFromMnemonic(e.mnemonic),e.numberOfAccounts?this.addAccounts(e.numberOfAccounts):Promise.resolve([])}addAccounts(e=1){if(!this.root)throw new Error("Eth-Hd-Keyring: No secret recovery phrase provided");const t=this._wallets.length,r=[];for(let n=t;n<e+t;n++){const e=this.root.deriveChild(n);r.push(e),this._wallets.push(e)}const n=r.map((e=>this._addressfromPublicKey(e.publicKey)));return Promise.resolve(n)}getAccounts(){return this._wallets.map((e=>this._addressfromPublicKey(e.publicKey)))}async getAppKeyAddress(e,t){if(!t||"string"!=typeof t)throw new Error("'origin' must be a non-empty string");const r=this._getWalletForAccount(e,{withAppKeyOrigin:t});return g(a(r.publicKey).toString("hex"))}async exportAccount(e,t={}){const r=this._getWalletForAccount(e,t);return i(r.privateKey)}async signTransaction(e,t,r={}){const n=this._getPrivateKeyFor(e,r),s=t.sign(n);return s===undefined?t:s}async signMessage(e,t,n={}){b(t);const s=k(t),i=this._getPrivateKeyFor(e,n),o=c(r.from(s,"hex"),i);return f(o.v,o.r,o.s)}async signPersonalMessage(e,t,n={}){const s=this._getPrivateKeyFor(e,n),i=r.from(s,"hex");return y({privateKey:i,data:t})}async decryptMessage(e,t){const n=this._getWalletForAccount(e),{privateKey:s}=n,i=r.from(s).toString("hex");return p({privateKey:i,encryptedData:t})}async signTypedData(e,t,r={version:v.V1}){const n=Object.keys(v).includes(r.version)?r.version:v.V1,s=this._getPrivateKeyFor(e,r);return w({privateKey:s,data:t,version:n})}removeAccount(e){const t=g(e);if(!this._wallets.map((({publicKey:e})=>this._addressfromPublicKey(e))).includes(t))throw new Error(`Address ${t} not found in this keyring`);this._wallets=this._wallets.filter((({publicKey:e})=>this._addressfromPublicKey(e)!==t))}async getEncryptionPublicKey(e,t={}){const r=this._getPrivateKeyFor(e,t);return m(r)}_getPrivateKeyFor(e,t={}){if(!e)throw new Error("Must specify address.");return this._getWalletForAccount(e,t).privateKey}_getWalletForAccount(e,t={}){const n=g(e);let i=this._wallets.find((({publicKey:e})=>this._addressfromPublicKey(e)===n));if(!i)throw new Error("HD Keyring - Unable to find matching address.");if(t.withAppKeyOrigin){const{privateKey:e}=i,n=r.from(t.withAppKeyOrigin,"utf8"),a=r.concat([e,n]),c=u(s(a,256));i={privateKey:c,publicKey:o(c)}}return i}_initFromMnemonic(e){if(this.root)throw new Error("Eth-Hd-Keyring: Secret recovery phrase already provided");this.mnemonic=this._mnemonicToUint8Array(e);if(!d.validateMnemonic(this.mnemonic,h))throw new Error("Eth-Hd-Keyring: Invalid secret recovery phrase provided");const t=d.mnemonicToSeedSync(this.mnemonic,h);this.hdWallet=n.fromMasterSeed(t),this.root=this.hdWallet.derive(this.hdPath)}_addressfromPublicKey(e){return l(a(r.from(e),!0)).toLowerCase()}}S.type=_,t.exports=S}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-hd-keyring",file:"node_modules/@metamask/eth-hd-keyring/index.js"}],[1089,{"./fetch-config-from-req":1091,"./logging-utils":1093,"@metamask/json-rpc-engine":1217,"@metamask/rpc-errors":1505,"node-fetch":3513},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createInfuraMiddleware=void 0;const s=e("@metamask/json-rpc-engine"),i=e("@metamask/rpc-errors"),o=n(e("node-fetch")),a=e("./fetch-config-from-req"),c=e("./logging-utils"),u=(0,c.createModuleLogger)(c.projectLogger,"create-infura-middleware"),l=["Gateway timeout","ETIMEDOUT","ECONNRESET","SyntaxError"];async function d(e,t,r,n,s,c){const{fetchUrl:u,fetchParams:l}=(0,a.fetchConfigFromReq)({network:e,projectId:t,extraHeaders:r,req:n,source:c}),d=await(0,o.default)(u,l),f=await d.text();if(!d.ok)switch(d.status){case 405:throw i.rpcErrors.methodNotFound();case 429:throw h("Request is being rate limited.");case 503:case 504:throw function(){let e="Gateway timeout. The request took too long to process. ";return e+="This can happen when querying logs over too wide a block range.",h(e)}();default:throw h(f)}if("eth_getBlockByNumber"===n.method&&"Not Found"===f)return void(s.result=null);const p=JSON.parse(f);s.result=p.result,s.error=p.error}function h(e){return i.rpcErrors.internal(e)}function f(e){const t=e.toString();return l.some((e=>t.includes(e)))}async function p(e){return new Promise((t=>{setTimeout(t,e)}))}r.createInfuraMiddleware=function({network:e="mainnet",maxAttempts:t=5,source:r,projectId:n,headers:i={}}){if(!n||"string"!=typeof n)throw new Error(`Invalid value for 'projectId': "${n}"`);if(!i||"object"!=typeof i)throw new Error(`Invalid value for 'headers': "${i}"`);if(!t)throw new Error(`Invalid value for 'maxAttempts': "${t}" (${typeof t})`);return(0,s.createAsyncMiddleware)((async(s,o)=>{for(let a=1;a<=t;a++)try{u("Attempting request to Infura. network = %o, projectId = %s, headers = %o, req = %o",e,n,i,s),await d(e,n,i,s,o,r);break}catch(e){if(!f(e))throw u("Non-retriable request error encountered. req = %o, res = %o, error = %o",s,o,e),e;if(!(t-a)){u("Retriable request error encountered, but exceeded max attempts. req = %o, res = %o, error = %o",s,o,e);const t=`InfuraProvider - cannot complete request. All retries exhausted.\nOriginal Error:\n${e.toString()}\n\n`;throw new Error(t)}u("Retriable request error encountered. req = %o, res = %o, error = %o",s,o,e),u("Waiting 1 second to try again..."),await p(1e3)}}))}}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-infura",file:"node_modules/@metamask/eth-json-rpc-infura/dist/create-infura-middleware.js"}],[109,{"@metamask/transaction-controller":1733,lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/transaction-controller");r.default={version:24,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=24;const r=function(e){const t=e;if(!t.TransactionController)return t;const{transactions:r}=t.TransactionController;return t.TransactionController.transactions=r.map(((e,t)=>(e.status===s.TransactionStatus.unapproved&&e.txParams&&e.txParams.from&&(e.txParams.from=e.txParams.from.toLowerCase()),e))),t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/024.js"}],[1090,{"./create-infura-middleware":1089,"@metamask/eth-json-rpc-provider":1108,"@metamask/json-rpc-engine":1217},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createProvider=void 0;const n=e("@metamask/eth-json-rpc-provider"),s=e("@metamask/json-rpc-engine"),i=e("./create-infura-middleware");r.createProvider=function(e){const t=new s.JsonRpcEngine;return t.push((0,i.createInfuraMiddleware)(e)),(0,n.providerFromEngine)(t)}}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-infura",file:"node_modules/@metamask/eth-json-rpc-infura/dist/create-provider.js"}],[1091,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return{id:e.id,jsonrpc:e.jsonrpc,method:e.method,params:e.params}}Object.defineProperty(r,"__esModule",{value:!0}),r.fetchConfigFromReq=void 0,r.fetchConfigFromReq=function({network:e,projectId:t,extraHeaders:r={},req:s,source:i}){const o=s.origin||"internal",a=Object.assign({},r,{Accept:"application/json","Content-Type":"application/json"});return i&&(a["Infura-Source"]=`${i}/${o}`),{fetchUrl:`https://${e}.infura.io/v3/${t}`,fetchParams:{method:"POST",headers:a,body:JSON.stringify(n(s))}}}}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-infura",file:"node_modules/@metamask/eth-json-rpc-infura/dist/fetch-config-from-req.js"}],[1092,{"./create-infura-middleware":1089,"./create-provider":1090,"./fetch-config-from-req":1091},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./create-infura-middleware"),r),s(e("./fetch-config-from-req"),r),s(e("./create-provider"),r)}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-infura",file:"node_modules/@metamask/eth-json-rpc-infura/dist/index.js"}],[1093,{"@metamask/utils":1786},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("eth-json-rpc-infura")}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-infura",file:"node_modules/@metamask/eth-json-rpc-infura/dist/logging-utils.js"}],[1094,{"./logging-utils":1101,"./utils/cache":1104,"@metamask/json-rpc-engine":1217},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createBlockCacheMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),s=e("./logging-utils"),i=e("./utils/cache"),o=(0,s.createModuleLogger)(s.projectLogger,"block-cache"),a=[undefined,null,"<nil>"];class c{constructor(){this.cache={}}getBlockCache(e){const t=Number.parseInt(e,16);let r=this.cache[t];if(!r){const e={};this.cache[t]=e,r=e}return r}async get(e,t){const r=this.getBlockCache(t),n=(0,i.cacheIdentifierForRequest)(e,!0);return n?r[n]:undefined}async set(e,t,r){if(!this.canCacheResult(e,r))return;const n=(0,i.cacheIdentifierForRequest)(e,!0);if(!n)return;this.getBlockCache(t)[n]=r}canCacheRequest(e){if(!(0,i.canCache)(e.method))return!1;return"pending"!==(0,i.blockTagForRequest)(e)}canCacheResult(e,t){return!a.includes(t)&&!(e.method&&["eth_getTransactionByHash","eth_getTransactionReceipt"].includes(e.method)&&(!t||!t.blockHash||"0x0000000000000000000000000000000000000000000000000000000000000000"===t.blockHash))}clearBefore(e){const t=Number.parseInt(e,16);Object.keys(this.cache).map(Number).filter((e=>e<t)).forEach((e=>delete this.cache[e]))}}r.createBlockCacheMiddleware=function({blockTracker:e}={}){if(!e)throw new Error("createBlockCacheMiddleware - No PollingBlockTracker specified");const t=new c,r={[i.CacheStrategy.Permanent]:t,[i.CacheStrategy.Block]:t,[i.CacheStrategy.Fork]:t,[i.CacheStrategy.Never]:undefined};return(0,n.createAsyncMiddleware)((async(n,s,a)=>{if(n.skipCache)return a();const c=(0,i.cacheTypeForMethod)(n.method),u=r[c];if(!u)return a();if(!u.canCacheRequest(n))return a();const l=(0,i.blockTagForRequest)(n),d=l&&"string"==typeof l?l:"latest";let h;if(o("blockTag = %o, req = %o",d,n),"earliest"===d)h="0x00";else if("latest"===d){o("Fetching latest block number to determine cache key");const r=await e.getLatestBlock();o("Clearing values stored under block numbers before %o",r),t.clearBefore(r),h=r}else h=d;const f=await u.get(n,h);return f===undefined?(o("No cache stored under block number %o, carrying request forward",h),await a(),o("Populating cache with",s),await u.set(n,h,s.result)):(o("Cache hit, reusing cache result stored under block number %o",h),s.result=f),undefined}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/block-cache.js"}],[1095,{"./utils/cache":1104,"@metamask/json-rpc-engine":1217},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createBlockRefRewriteMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),s=e("./utils/cache");r.createBlockRefRewriteMiddleware=function({blockTracker:e}={}){if(!e)throw Error('BlockRefRewriteMiddleware - mandatory "blockTracker" option is missing.');return(0,n.createAsyncMiddleware)((async(t,r,n)=>{const i=(0,s.blockTagParamIndex)(t.method);if(i===undefined)return n();if("latest"!==(Array.isArray(t.params)&&t.params[i]?t.params[i]:"latest"))return n();const o=await e.getLatestBlock();return Array.isArray(t.params)&&(t.params[i]=o),n()}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/block-ref-rewrite.js"}],[1096,{"./logging-utils":1101,"./utils/cache":1104,"@metamask/json-rpc-engine":1217,"klona/full":3282,pify:3564},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createBlockRefMiddleware=void 0;const s=e("@metamask/json-rpc-engine"),i=e("klona/full"),o=n(e("pify")),a=e("./logging-utils"),c=e("./utils/cache"),u=(0,a.createModuleLogger)(a.projectLogger,"block-ref");r.createBlockRefMiddleware=function({provider:e,blockTracker:t}={}){if(!e)throw Error('BlockRefMiddleware - mandatory "provider" option is missing.');if(!t)throw Error('BlockRefMiddleware - mandatory "blockTracker" option is missing.');return(0,s.createAsyncMiddleware)((async(r,n,s)=>{var a;const l=(0,c.blockTagParamIndex)(r.method);if(l===undefined)return s();if("latest"!==(Array.isArray(r.params)&&null!==(a=r.params[l])&&void 0!==a?a:"latest"))return u('blockRef is not "latest", carrying request forward'),s();const d=await t.getLatestBlock();u(`blockRef is "latest", setting param ${l} to latest block ${d}`);const h=(0,i.klona)(r);Array.isArray(h.params)&&(h.params[l]=d),u("Performing another request %o",h);const f=await(0,o.default)(e.sendAsync).call(e,h);return n.result=f.result,n.error=f.error,undefined}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/block-ref.js"}],[1097,{"./logging-utils":1101,"@metamask/json-rpc-engine":1217},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createBlockTrackerInspectorMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),s=e("./logging-utils"),i=(0,s.createModuleLogger)(s.projectLogger,"block-tracker-inspector"),o=["eth_getTransactionByHash","eth_getTransactionReceipt"];function a(e){const{result:t}=e;return t&&"object"==typeof t&&(r=t,n="blockNumber",Object.hasOwnProperty.call(r,n))&&"string"==typeof t.blockNumber?t.blockNumber:undefined;var r,n}r.createBlockTrackerInspectorMiddleware=function({blockTracker:e}){return(0,n.createAsyncMiddleware)((async(t,r,n)=>{if(!o.includes(t.method))return n();await n();const s=a(r);if(!s)return undefined;i("res.result.blockNumber exists, proceeding. res = %o",r);return Number.parseInt(s,16)>Number.parseInt(e.getCurrentBlock(),16)&&(i("blockNumber from response is greater than current block number, refreshing current block number"),await e.checkForLatestBlock()),undefined}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/block-tracker-inspector.js"}],[1098,{"./utils/timeout":1106,"@metamask/json-rpc-engine":1217,"@metamask/rpc-errors":1505},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createFetchConfigFromReq=r.createFetchMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),s=e("@metamask/rpc-errors"),i=e("./utils/timeout"),o=["Gateway timeout","ETIMEDOUT","failed to parse response body","Failed to fetch"];function a(e){switch(e.status){case 405:throw s.rpcErrors.methodNotFound();case 418:throw s.rpcErrors.internal({message:"Request is being rate limited."});case 503:case 504:throw function(){let e="Gateway timeout. The request took too long to process. ";return e+="This can happen when querying logs over too wide a block range.",s.rpcErrors.internal({message:e})}()}}function c(e,t){if(200!==e.status)throw s.rpcErrors.internal({message:`Non-200 status code: '${e.status}'`,data:t});if(t.error)throw s.rpcErrors.internal({data:t.error});return t.result}function u({btoa:e,req:t,rpcUrl:r,originHttpHeaderKey:n}){const s=new URL(r),i=function(e){let t="";t+=e.protocol,t+=`//${e.hostname}`,e.port&&(t+=`:${e.port}`);return t+=`${e.pathname}`,t+=`${e.search}`,t}(s),o={id:t.id,jsonrpc:t.jsonrpc,method:t.method,params:t.params},a=t.origin,c={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)};if(s.username&&s.password){const t=e(`${s.username}:${s.password}`);c.headers.Authorization=`Basic ${t}`}return n&&a&&(c.headers[n]=a),{fetchUrl:i,fetchParams:c}}r.createFetchMiddleware=function({btoa:e,fetch:t,rpcUrl:r,originHttpHeaderKey:s}){return(0,n.createAsyncMiddleware)((async(n,l,d)=>{const{fetchUrl:h,fetchParams:f}=u({btoa:e,req:n,rpcUrl:r,originHttpHeaderKey:s});for(let e=0;e<5;e++){try{const e=await t(h,f);a(e);const r=await e.text();let n;try{n=JSON.parse(r)}catch(e){throw new Error(`FetchMiddleware - failed to parse response body: "${r}"`)}const s=c(e,n);return void(l.result=s)}catch(e){const t=e.toString();if(!o.some((e=>t.includes(e))))throw e}await(0,i.timeout)(1e3)}}))},r.createFetchConfigFromReq=u}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/fetch.js"}],[1099,{"./block-cache":1094,"./block-ref":1096,"./block-ref-rewrite":1095,"./block-tracker-inspector":1097,"./fetch":1098,"./inflight-cache":1100,"./providerAsMiddleware":1102,"./retryOnEmpty":1103,"./wallet":1107},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./block-cache"),r),s(e("./block-ref-rewrite"),r),s(e("./block-ref"),r),s(e("./block-tracker-inspector"),r),s(e("./fetch"),r),s(e("./inflight-cache"),r),s(e("./providerAsMiddleware"),r),s(e("./retryOnEmpty"),r),s(e("./wallet"),r)}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/index.js"}],[11,{"../../../shared/constants/metametrics":4063,"../../../shared/constants/network":4064,"../../../shared/constants/time":4074,"../../../shared/constants/tokens":4075,"../../../shared/constants/transaction":4076,"../../../shared/modules/network.utils":4098,"../../../shared/modules/string-utils":4104,"@metamask/polling-controller":1432,loglevel:3447},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("loglevel"),s=e("@metamask/polling-controller"),i=e("../../../shared/constants/time"),o=e("../../../shared/constants/network"),a=e("../../../shared/constants/tokens"),c=e("../../../shared/modules/network.utils"),u=e("../../../shared/modules/string-utils"),l=e("../../../shared/constants/transaction"),d=e("../../../shared/constants/metametrics");function h(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}const f=3*i.MINUTE;var p=new WeakSet;class m extends s.StaticIntervalPollingControllerOnly{constructor({messenger:e,interval:t=f,preferences:r,network:n,tokenList:s,tokensController:i,assetsContractController:o=null,trackMetaMetricsEvent:a,getCurrentSelectedAccount:c,getNetworkClientById:u,disableLegacyInterval:l=!1}={}){var d,m,y,w;super(),h(this,p),this.getNetworkClientById=u,this.messenger=e,this.assetsContractController=o,this.tokensController=i,this.preferences=r,l||(this.interval=t),this.network=n,this.tokenList=s,this.useTokenDetection=null===(d=this.preferences)||void 0===d?void 0:d.store.getState().useTokenDetection,this.selectedAddress=c().address,this.tokenAddresses=null===(m=this.tokensController)||void 0===m?void 0:m.state.tokens.map((e=>e.address)),this.setIntervalLength(t),this.hiddenTokens=null===(y=this.tokensController)||void 0===y?void 0:y.state.ignoredTokens,this.detectedTokens=null===(w=this.tokensController)||void 0===w?void 0:w.state.detectedTokens,this.chainId=this.getChainIdFromNetworkStore(),this._trackMetaMetricsEvent=a,e.subscribe("AccountsController:selectedAccountChange",(e=>{var t;const r=null===(t=this.preferences)||void 0===t?void 0:t.store.getState().useTokenDetection;this.selectedAddress===e.address&&this.useTokenDetection===r||(this.selectedAddress=e.address,this.useTokenDetection=r,this.restartTokenDetection({selectedAddress:this.selectedAddress}))})),null==r||r.store.subscribe((({useTokenDetection:e})=>{this.useTokenDetection!==e&&(this.useTokenDetection=e,this.restartTokenDetection({selectedAddress:this.selectedAddress}))})),null==i||i.subscribe((({tokens:e=[],ignoredTokens:t=[],detectedTokens:r=[]})=>{this.tokenAddresses=e.map((e=>e.address)),this.hiddenTokens=t,this.detectedTokens=r})),e.subscribe("NetworkController:stateChange",(()=>{if(this.chainId!==this.getChainIdFromNetworkStore()){const e=this.getChainIdFromNetworkStore();this.chainId=e,this.restartTokenDetection({chainId:this.chainId})}})),e.subscribe("TokenListController:stateChange",(()=>{this.restartTokenDetection()})),function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}(this,p,g).call(this)}async _executePoll(e,t){const r=this.getNetworkClientById(e);await this.detectNewTokens({...t,chainId:r.configuration.chainId})}async detectNewTokens({selectedAddress:e,chainId:t}={}){const r=e??this.selectedAddress,s=t??this.getChainIdFromNetworkStore();if(!this.isActive)return;if(!(0,c.isTokenDetectionEnabledForNetwork)(s))return;if(!this.useTokenDetection&&s!==o.CHAIN_IDS.MAINNET)return;const i=!this.useTokenDetection&&s===o.CHAIN_IDS.MAINNET,{tokenList:h}=this._tokenList.state,f=i?a.STATIC_MAINNET_TOKEN_LIST:h,p=[];for(const e in f)this.tokenAddresses.find((t=>(0,u.isEqualCaseInsensitive)(t,e)))||this.hiddenTokens.find((t=>(0,u.isEqualCaseInsensitive)(t,e)))||this.detectedTokens.find((({address:t})=>(0,u.isEqualCaseInsensitive)(t,e)))||p.push(e);const m=[p.slice(0,1e3),p.slice(1e3,p.length-1)];for(const e of m){let t;try{t=await this.assetsContractController.getBalancesInSingleCall(r,e)}catch(e){return void(0,n.warn)("MetaMask - DetectTokensController single call balance fetch failed",e)}const i=[],o=[];if(t){const e=Object.keys(t);for(const t of e){const{address:e,symbol:r,decimals:n}=f[t];o.push(`${r} - ${e}`),i.push({address:e,symbol:r,decimals:n})}i.length>0&&(this._trackMetaMetricsEvent({event:d.MetaMetricsEventName.TokenDetected,category:d.MetaMetricsEventCategory.Wallet,properties:{tokens:o,token_standard:l.TokenStandard.ERC20,asset_type:l.AssetType.token}}),await this.tokensController.addDetectedTokens(i,{selectedAddress:r,chainId:s}))}}}restartTokenDetection({selectedAddress:e,chainId:t}={}){const r=e??this.selectedAddress,n=t??this.chainId;this.isActive&&r&&(this.detectNewTokens({selectedAddress:r,chainId:n}),this.interval=f)}getChainIdFromNetworkStore(){var e;return null===(e=this.network)||void 0===e?void 0:e.state.providerConfig.chainId}set interval(e){this._handle&&clearInterval(this._handle),e&&(this._handle=setInterval((()=>{this.detectNewTokens()}),e))}set tokenList(e){e&&(this._tokenList=e)}get isActive(){return this.isOpen&&this.isUnlocked}}function g(){const{isUnlocked:e}=this.messenger.call("KeyringController:getState");this.isUnlocked=e,this.messenger.subscribe("KeyringController:unlock",(()=>{this.isUnlocked=!0,this.restartTokenDetection()})),this.messenger.subscribe("KeyringController:lock",(()=>{this.isUnlocked=!1}))}r.default=m}}},{package:"$root$",file:"app/scripts/controllers/detect-tokens.js"}],[110,{"../lib/util":85,"@metamask/transaction-controller":1733,lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/transaction-controller"),i=e("../lib/util");r.default={version:25,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=25;const r=function(e){const t=e;if(t.TransactionController&&t.TransactionController.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>(e.status!==s.TransactionStatus.unapproved||(e.txParams=function(e){const t={from:e=>(0,i.addHexPrefix)(e).toLowerCase(),to:()=>(0,i.addHexPrefix)(e.to).toLowerCase(),nonce:e=>(0,i.addHexPrefix)(e),value:e=>(0,i.addHexPrefix)(e),data:e=>(0,i.addHexPrefix)(e),gas:e=>(0,i.addHexPrefix)(e),gasPrice:e=>(0,i.addHexPrefix)(e)},r={};return Object.keys(t).forEach((n=>{e[n]&&(r[n]=t[n](e[n]))})),r}(e.txParams)),e)))}return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/025.js"}],[1100,{"./logging-utils":1101,"./utils/cache":1104,"@metamask/json-rpc-engine":1217,"klona/full":3282},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createInflightCacheMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),s=e("klona/full"),i=e("./logging-utils"),o=e("./utils/cache"),a=(0,i.createModuleLogger)(i.projectLogger,"inflight-cache");r.createInflightCacheMiddleware=function(){const e={};return(0,n.createAsyncMiddleware)((async(t,r,n)=>{if(t.skipCache)return n();const i=(0,o.cacheIdentifierForRequest)(t);if(!i)return a("Request is not cacheable, proceeding. req = %o",t),n();let c=e[i];return c?(a("Running %i handler(s) for request %o",c.length,t),await async function(e,t){const{resolve:r,promise:n}=function(){let e;const t=new Promise((t=>{e=t}));return{resolve:e,promise:t}}();return t.push((t=>{e.result=(0,s.klona)(t.result),e.error=(0,s.klona)(t.error),r()})),n}(r,c),undefined):(c=[],e[i]=c,a("Carrying original request forward %o",t),await n(),delete e[i],a("Running %i collected handler(s) for request %o",c.length,t),function(e,t){setTimeout((()=>{t.forEach((t=>{try{t(e)}catch(e){console.error(e)}}))}))}(r,c),undefined)}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/inflight-cache.js"}],[1101,{"@metamask/utils":1786},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("eth-json-rpc-middleware")}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/logging-utils.js"}],[1102,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ethersProviderAsMiddleware=r.providerAsMiddleware=void 0,r.providerAsMiddleware=function(e){return(t,r,n,s)=>{e.sendAsync(t,((e,t)=>e instanceof Error?s(e):(Object.assign(r,t),s())))}},r.ethersProviderAsMiddleware=function(e){return(t,r,n,s)=>{e.send(t,((e,t)=>e?s(e):(Object.assign(r,t),s())))}}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/providerAsMiddleware.js"}],[1103,{"./logging-utils":1101,"./utils/cache":1104,"./utils/error":1105,"./utils/timeout":1106,"@metamask/json-rpc-engine":1217,"klona/full":3282,pify:3564},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createRetryOnEmptyMiddleware=void 0;const s=e("@metamask/json-rpc-engine"),i=e("klona/full"),o=n(e("pify")),a=e("./logging-utils"),c=e("./utils/cache"),u=e("./utils/error"),l=e("./utils/timeout"),d=(0,a.createModuleLogger)(a.projectLogger,"retry-on-empty"),h=[undefined,null,"<nil>"];r.createRetryOnEmptyMiddleware=function({provider:e,blockTracker:t}={}){if(!e)throw Error('RetryOnEmptyMiddleware - mandatory "provider" option is missing.');if(!t)throw Error('RetryOnEmptyMiddleware - mandatory "blockTracker" option is missing.');return(0,s.createAsyncMiddleware)((async(r,n,s)=>{const a=(0,c.blockTagParamIndex)(r.method);if(a===undefined)return s();let f=Array.isArray(r.params)&&r.params[a]?r.params[a]:undefined;if(f===undefined&&(f="latest"),["latest","pending"].includes(f))return s();const p=Number.parseInt(f.slice(2),16);if(Number.isNaN(p))return s();const m=await t.getLatestBlock(),g=Number.parseInt(m.slice(2),16);if(p>g)return d("Requested block number %o is higher than latest block number %o, falling through to original request",p,g),s();d("Requested block number %o is not higher than latest block number %o, trying request until non-empty response is received",p,g);const y=(0,i.klona)(r),w=await async function(e,t){for(let r=0;r<e;r++)try{return await t()}catch(e){if((0,u.isExecutionRevertedError)(e))throw e;d("(call %i) Request failed, waiting 1s to retry again...",r+1),await(0,l.timeout)(1e3)}throw d("Retries exhausted"),new Error("RetryOnEmptyMiddleware - retries exhausted")}(10,(async()=>{d("Performing request %o",y);const t=await(0,o.default)(e.sendAsync).call(e,y);if(d("Response is %o",t),h.includes(t.result))throw new Error(`RetryOnEmptyMiddleware - empty response "${JSON.stringify(t)}" for request "${JSON.stringify(y)}"`);return t}));return d("Copying result %o and error %o",w.result,w.error),n.result=w.result,n.error=w.error,undefined}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/retryOnEmpty.js"}],[1104,{"safe-stable-stringify":3834},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.cacheTypeForMethod=r.blockTagParamIndex=r.blockTagForRequest=r.canCache=r.cacheIdentifierForRequest=r.CacheStrategy=void 0;const n=(0,e("safe-stable-stringify").configure)({bigint:!1,circularValue:Error});var s;function i(e){return a(e)!==s.Never}function o(e){switch(e){case"eth_getStorageAt":return 2;case"eth_getBalance":case"eth_getCode":case"eth_getTransactionCount":case"eth_call":return 1;case"eth_getBlockByNumber":return 0;default:return undefined}}function a(e){switch(e){case"web3_clientVersion":case"web3_sha3":case"eth_protocolVersion":case"eth_getBlockTransactionCountByHash":case"eth_getUncleCountByBlockHash":case"eth_getCode":case"eth_getBlockByHash":case"eth_getTransactionByHash":case"eth_getTransactionByBlockHashAndIndex":case"eth_getTransactionReceipt":case"eth_getUncleByBlockHashAndIndex":case"eth_getCompilers":case"eth_compileLLL":case"eth_compileSolidity":case"eth_compileSerpent":case"shh_version":case"test_permaCache":return s.Permanent;case"eth_getBlockByNumber":case"eth_getBlockTransactionCountByNumber":case"eth_getUncleCountByBlockNumber":case"eth_getTransactionByBlockNumberAndIndex":case"eth_getUncleByBlockNumberAndIndex":case"test_forkCache":return s.Fork;case"eth_gasPrice":case"eth_blockNumber":case"eth_getBalance":case"eth_getStorageAt":case"eth_getTransactionCount":case"eth_call":case"eth_estimateGas":case"eth_getFilterLogs":case"eth_getLogs":case"test_blockCache":return s.Block;default:return s.Never}}!function(e){e.Block="block",e.Fork="fork",e.Never="never",e.Permanent="perma"}(s=r.CacheStrategy||(r.CacheStrategy={})),r.cacheIdentifierForRequest=function(e,t){var r;const s=t?function(e){if(!e.params)return[];const t=o(e.method);if(t===undefined||!Array.isArray(e.params)||t>=e.params.length)return e.params;if("eth_getBlockByNumber"===e.method)return e.params.slice(1);return e.params.slice(0,t)}(e):null!==(r=e.params)&&void 0!==r?r:[];return i(e.method)?`${e.method}:${n(s)}`:null},r.canCache=i,r.blockTagForRequest=function(e){if(!e.params)return undefined;const t=o(e.method);return t===undefined||!Array.isArray(e.params)||t>=e.params.length?undefined:e.params[t]},r.blockTagParamIndex=o,r.cacheTypeForMethod=a}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/utils/cache.js"}],[1105,{"@metamask/rpc-errors":1505,"@metamask/utils":1786},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isExecutionRevertedError=void 0;const n=e("@metamask/rpc-errors"),s=e("@metamask/utils");r.isExecutionRevertedError=function(e){return(0,s.isJsonRpcError)(e)&&e.code===n.errorCodes.rpc.invalidInput&&"execution reverted"===e.message}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/utils/error.js"}],[1106,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.timeout=void 0,r.timeout=async function(e){return new Promise((t=>setTimeout(t,e)))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/utils/timeout.js"}],[1107,{"@metamask/eth-sig-util":1122,"@metamask/json-rpc-engine":1217,"@metamask/rpc-errors":1505},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return s(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.createWalletMiddleware=void 0;const o=i(e("@metamask/eth-sig-util")),a=e("@metamask/json-rpc-engine"),c=e("@metamask/rpc-errors");function u(e){return 42===e.length}r.createWalletMiddleware=function({getAccounts:e,processDecryptMessage:t,processEncryptionPublicKey:r,processEthSignMessage:n,processPersonalMessage:s,processTransaction:i,processSignTransaction:l,processTypedMessage:d,processTypedMessageV3:h,processTypedMessageV4:f}){if(!e)throw new Error("opts.getAccounts is required");return(0,a.createScaffoldMiddleware)({eth_accounts:(0,a.createAsyncMiddleware)((async function(t,r){r.result=await e(t)})),eth_coinbase:(0,a.createAsyncMiddleware)((async function(t,r){const n=await e(t);r.result=n[0]||null})),eth_sendTransaction:(0,a.createAsyncMiddleware)((async function(e,t){if(!i)throw c.rpcErrors.methodNotSupported();if(!(e.params&&Array.isArray(e.params)&&e.params.length>=1))throw c.rpcErrors.invalidInput();const r=e.params[0],n=Object.assign(Object.assign({},r),{from:await p((null==r?void 0:r.from)||"",e)});t.result=await i(n,e)})),eth_signTransaction:(0,a.createAsyncMiddleware)((async function(e,t){if(!l)throw c.rpcErrors.methodNotSupported();if(!(e.params&&Array.isArray(e.params)&&e.params.length>=1))throw c.rpcErrors.invalidInput();const r=e.params[0],n=Object.assign(Object.assign({},r),{from:await p((null==r?void 0:r.from)||"",e)});t.result=await l(n,e)})),eth_sign:(0,a.createAsyncMiddleware)((async function(e,t){if(!n)throw c.rpcErrors.methodNotSupported();if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=2))throw c.rpcErrors.invalidInput();const r=e.params,s=await p(r[0],e),i=r[1],o=r[2]||{},a=Object.assign(Object.assign({},o),{from:s,data:i});t.result=await n(a,e)})),eth_signTypedData:(0,a.createAsyncMiddleware)((async function(e,t){if(!d)throw c.rpcErrors.methodNotSupported();if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=2))throw c.rpcErrors.invalidInput();const r=e.params,n=r[0],s=await p(r[1],e),i=r[2]||{},o=Object.assign(Object.assign({},i),{from:s,data:n});t.result=await d(o,e,"V1")})),eth_signTypedData_v3:(0,a.createAsyncMiddleware)((async function(e,t){if(!h)throw c.rpcErrors.methodNotSupported();if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=2))throw c.rpcErrors.invalidInput();const r=e.params,n=await p(r[0],e),s=r[1],i={data:s,from:n,version:"V3"};t.result=await h(i,e,"V3")})),eth_signTypedData_v4:(0,a.createAsyncMiddleware)((async function(e,t){if(!f)throw c.rpcErrors.methodNotSupported();if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=2))throw c.rpcErrors.invalidInput();const r=e.params,n=await p(r[0],e),s=r[1],i={data:s,from:n,version:"V4"};t.result=await f(i,e,"V4")})),personal_sign:(0,a.createAsyncMiddleware)((async function(e,t){if(!s)throw c.rpcErrors.methodNotSupported();if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=2))throw c.rpcErrors.invalidInput();const r=e.params,n=r[0],i=r[1],o=r[2]||{};let a,l;if(u(n)&&!u(i)){let e="The eth_personalSign method requires params ordered ";e+="[message, address]. This was previously handled incorrectly, ",e+="and has been corrected automatically. ",e+="Please switch this param order for smooth behavior in the future.",t.warning=e,a=n,l=i}else l=n,a=i;a=await p(a,e);const d=Object.assign(Object.assign({},o),{from:a,data:l});t.result=await s(d,e)})),eth_getEncryptionPublicKey:(0,a.createAsyncMiddleware)((async function(e,t){if(!r)throw c.rpcErrors.methodNotSupported();if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=1))throw c.rpcErrors.invalidInput();const n=e.params,s=await p(n[0],e);t.result=await r(s,e)})),eth_decrypt:(0,a.createAsyncMiddleware)((async function(e,r){if(!t)throw c.rpcErrors.methodNotSupported();if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=1))throw c.rpcErrors.invalidInput();const n=e.params,s=n[0],i=await p(n[1],e),o=n[2]||{},a=Object.assign(Object.assign({},o),{from:i,data:s});r.result=await t(a,e)})),personal_ecRecover:(0,a.createAsyncMiddleware)((async function(e,t){if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=2))throw c.rpcErrors.invalidInput();const r=e.params,n=r[0],s=r[1],i=o.recoverPersonalSignature({data:n,signature:s});t.result=i}))});async function p(t,r){if("string"==typeof t&&t.length>0&&u(t)){const n=(await e(r)).map((e=>e.toLowerCase())),s=t.toLowerCase();if(n.includes(s))return s;throw c.providerErrors.unauthorized()}throw c.rpcErrors.invalidParams({message:"Invalid parameters: must provide an Ethereum address."})}}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/wallet.js"}],[1108,{"./provider-from-engine":1109,"./provider-from-middleware":1110,"./safe-event-emitter-provider":1111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.SafeEventEmitterProvider=void 0,s(e("./provider-from-engine"),r),s(e("./provider-from-middleware"),r);var i=e("./safe-event-emitter-provider");Object.defineProperty(r,"SafeEventEmitterProvider",{enumerable:!0,get:function(){return i.SafeEventEmitterProvider}})}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-provider",file:"node_modules/@metamask/eth-json-rpc-provider/dist/index.js"}],[1109,{"./safe-event-emitter-provider":1111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.providerFromEngine=void 0;const n=e("./safe-event-emitter-provider");r.providerFromEngine=function(e){return new n.SafeEventEmitterProvider({engine:e})}}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-provider",file:"node_modules/@metamask/eth-json-rpc-provider/dist/provider-from-engine.js"}],[111,{lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:26,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=26;try{const e=t.data;t.data=function(e){if(!e.KeyringController||!e.PreferencesController)return e;if(!e.KeyringController.walletNicknames)return e;return e.PreferencesController.identities=Object.keys(e.KeyringController.walletNicknames).reduce(((t,r)=>(t[r]={name:e.KeyringController.walletNicknames[r],address:r},t)),{}),delete e.KeyringController.walletNicknames,e}(e)}catch(e){return console.warn(`MetaMask Migration #26${e.stack}`),Promise.reject(e)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/026.js"}],[1110,{"./provider-from-engine":1109,"@metamask/json-rpc-engine":1217},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.providerFromMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),s=e("./provider-from-engine");r.providerFromMiddleware=function(e){const t=new n.JsonRpcEngine;return t.push(e),(0,s.providerFromEngine)(t)}}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-provider",file:"node_modules/@metamask/eth-json-rpc-provider/dist/provider-from-middleware.js"}],[1111,{"@metamask/safe-event-emitter":1112},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.SafeEventEmitterProvider=void 0;const a=o(e("@metamask/safe-event-emitter"));class c extends a.default{constructor({engine:e}){super(),n.set(this,void 0),this.sendAsync=(e,t)=>{i(this,n,"f").handle(e,t)},this.send=(e,t)=>{if("function"!=typeof t)throw new Error('Must provide callback to "send" method.');i(this,n,"f").handle(e,t)},s(this,n,e,"f"),e.on&&e.on("notification",(e=>{this.emit("data",null,e)}))}}r.SafeEventEmitterProvider=c,n=new WeakMap}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-provider",file:"node_modules/@metamask/eth-json-rpc-provider/dist/safe-event-emitter-provider.js"}],[1112,{events:2868},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});const n=e("events");function s(e,t,r){try{Reflect.apply(e,t,r)}catch(e){setTimeout((()=>{throw e}))}}class i extends n.EventEmitter{emit(e,...t){let r="error"===e;const n=this._events;if(n!==undefined)r=r&&n.error===undefined;else if(!r)return!1;if(r){let e;if(t.length>0&&([e]=t),e instanceof Error)throw e;const r=new Error("Unhandled error."+(e?` (${e.message})`:""));throw r.context=e,r}const i=n[e];if(i===undefined)return!1;if("function"==typeof i)s(i,this,t);else{const e=i.length,r=function(e){const t=e.length,r=new Array(t);for(let n=0;n<t;n+=1)r[n]=e[n];return r}(i);for(let n=0;n<e;n+=1)s(r[n],this,t)}return!0}}r.default=i}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-provider>@metamask/safe-event-emitter",file:"node_modules/@metamask/eth-json-rpc-provider/node_modules/@metamask/safe-event-emitter/index.js"}],[1113,{"./constants":1114,"@metamask/browser-passworder":1079,"@metamask/eth-hd-keyring":1088,"@metamask/eth-sig-util":1122,"@metamask/eth-simple-keyring":1126,"@metamask/obs-store":1397,"@metamask/utils":1786,events:2868},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,o,a,c,u,l,d,h=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),f=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),p=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&h(t,e,r);return f(t,e),t},m=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},g=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},y=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.keyringBuilderFactory=r.KeyringController=void 0;const w=p(e("@metamask/browser-passworder")),v=y(e("@metamask/eth-hd-keyring")),b=e("@metamask/eth-sig-util"),k=y(e("@metamask/eth-simple-keyring")),_=e("@metamask/obs-store"),S=e("@metamask/utils"),T=e("events"),E=e("./constants"),A=[C(k.default),C(v.default)];class j extends T.EventEmitter{constructor({keyringBuilders:e,cacheEncryptionKey:t,initState:r={},encryptor:o=w}){super(),n.add(this),s.set(this,void 0),i.set(this,void 0),this.keyringBuilders=e?A.concat(e):A,this.store=new _.ObservableStore(r),this.memStore=new _.ObservableStore({isUnlocked:!1,keyringTypes:this.keyringBuilders.map((e=>e.type)),keyrings:[]}),m(this,s,o,"f"),this.keyrings=[],this.unsupportedKeyrings=[],m(this,i,Boolean(t),"f"),g(this,i,"f")&&M(o)}fullUpdate(){return this.emit("update",this.memStore.getState()),this.memStore.getState()}async createNewVaultAndKeychain(e){return this.password=e,await g(this,n,"m",o).call(this),g(this,n,"m",l).call(this),this.fullUpdate()}async createNewVaultAndRestore(e,t){if("string"!=typeof e)throw new TypeError(E.KeyringControllerError.WrongPasswordType);this.password=e,await g(this,n,"m",c).call(this);const r=await this.addNewKeyring(E.KeyringType.HD,{mnemonic:t,numberOfAccounts:1}),[s]=await r.getAccounts();if(!s)throw new Error(E.KeyringControllerError.NoFirstAccount);return g(this,n,"m",l).call(this),this.fullUpdate()}async setLocked(){return delete this.password,this.memStore.putState({isUnlocked:!1,keyrings:[]}),await g(this,n,"m",c).call(this),this.emit("lock"),this.fullUpdate()}async submitPassword(e){return this.keyrings=await this.unlockKeyrings(e),g(this,n,"m",l).call(this),this.fullUpdate()}async submitEncryptionKey(e,t){return this.keyrings=await this.unlockKeyrings(undefined,e,t),g(this,n,"m",l).call(this),this.fullUpdate()}async verifyPassword(e){const t=this.store.getState().vault;if(!t)throw new Error(E.KeyringControllerError.VaultError);await g(this,s,"f").decrypt(e,t)}async addNewAccount(e){return(await e.addAccounts(1)).forEach((e=>{this.emit("newAccount",e)})),await this.persistAllKeyrings(),this.fullUpdate()}async exportAccount(e){const t=await this.getKeyringForAccount(e);if(!t.exportAccount)throw new Error(E.KeyringControllerError.UnsupportedExportAccount);return await t.exportAccount((0,b.normalize)(e))}async removeAccount(e){const t=await this.getKeyringForAccount(e);if(!t.removeAccount)throw new Error(E.KeyringControllerError.UnsupportedRemoveAccount);await t.removeAccount(e),this.emit("removedAccount",e);return 0===(await t.getAccounts()).length&&await this.removeEmptyKeyrings(),await this.persistAllKeyrings(),this.fullUpdate()}async getAccounts(){const e=this.keyrings||[];return(await Promise.all(e.map((async e=>e.getAccounts())))).reduce(((e,t)=>e.concat(t)),[]).map(b.normalize)}getKeyringBuilderForType(e){return this.keyringBuilders.find((t=>t.type===e))}async updateMemStoreKeyrings(){const e=await Promise.all(this.keyrings.map(P));this.memStore.updateState({keyrings:e})}async signTransaction(e,t,r={}){const n=(0,b.normalize)(t),s=await this.getKeyringForAccount(n);if(!s.signTransaction)throw new Error(E.KeyringControllerError.UnsupportedSignTransaction);return await s.signTransaction(n,e,r)}async signMessage(e,t={}){const r=(0,b.normalize)(e.from),n=await this.getKeyringForAccount(r);if(!n.signMessage)throw new Error(E.KeyringControllerError.UnsupportedSignMessage);return await n.signMessage(r,e.data,t)}async signPersonalMessage(e,t={}){const r=(0,b.normalize)(e.from),n=await this.getKeyringForAccount(r);if(!n.signPersonalMessage)throw new Error(E.KeyringControllerError.UnsupportedSignPersonalMessage);const s=(0,b.normalize)(e.data);return await n.signPersonalMessage(r,s,t)}async getEncryptionPublicKey(e,t={}){const r=(0,b.normalize)(e),n=await this.getKeyringForAccount(e);if(!n.getEncryptionPublicKey)throw new Error(E.KeyringControllerError.UnsupportedGetEncryptionPublicKey);return await n.getEncryptionPublicKey(r,t)}async decryptMessage(e){const t=(0,b.normalize)(e.from),r=await this.getKeyringForAccount(t);if(!r.decryptMessage)throw new Error(E.KeyringControllerError.UnsupportedDecryptMessage);return r.decryptMessage(t,e.data)}async signTypedMessage(e,t={version:"V1"}){const r=(0,b.normalize)(e.from),n=await this.getKeyringForAccount(r);if(!n.signTypedData)throw new Error(E.KeyringControllerError.UnsupportedSignTypedMessage);return n.signTypedData(r,e.data,t)}async getAppKeyAddress(e,t){const r=(0,b.normalize)(e),n=await this.getKeyringForAccount(r);if(!n.getAppKeyAddress)throw new Error(E.KeyringControllerError.UnsupportedGetAppKeyAddress);return n.getAppKeyAddress(r,t)}async exportAppKeyForAddress(e,t){const r=(0,b.normalize)(e),n=await this.getKeyringForAccount(r);if(!n.exportAccount)throw new Error(E.KeyringControllerError.UnsupportedExportAppKeyForAddress);return n.exportAccount(r,{withAppKeyOrigin:t})}async addNewKeyring(e,t){const r=await g(this,n,"m",d).call(this,e,t);if(!r)throw new Error(E.KeyringControllerError.NoKeyring);if(!(e!==E.KeyringType.HD||(0,S.isObject)(t)&&t.mnemonic)){if(!r.generateRandomMnemonic)throw new Error(E.KeyringControllerError.UnsupportedGenerateRandomMnemonic);r.generateRandomMnemonic(),await r.addAccounts(1)}const s=await r.getAccounts();return await this.checkForDuplicate(e,s),this.keyrings.push(r),await this.persistAllKeyrings(),this.fullUpdate(),r}async removeEmptyKeyrings(){const e=[];await Promise.all(this.keyrings.map((async t=>{(await t.getAccounts()).length>0?e.push(t):await g(this,n,"m",u).call(this,t)}))),this.keyrings=e}async checkForDuplicate(e,t){const r=await this.getAccounts();if(e===E.KeyringType.Simple){if(Boolean(r.find((e=>t[0]&&(e===t[0]||e===(0,S.remove0x)(t[0]))))))throw new Error(E.KeyringControllerError.DuplicatedAccount);return t}return t}async getKeyringForAccount(e){var t;const r=(0,b.normalize)(e),n=await Promise.all(this.keyrings.map((async e=>Promise.all([e,e.getAccounts()])))),s=n.filter((e=>e[1].map(b.normalize).includes(r)));if(s.length&&(null===(t=s[0])||void 0===t?void 0:t.length))return s[0][0];let i="";throw(0,S.isValidHexAddress)(r)?n.length?s.length||(i="There are keyrings, but none match the address"):i="There are no keyrings":i="The address passed in is invalid/empty",new Error(`${E.KeyringControllerError.NoKeyring}. Error info: ${i}`)}async restoreKeyring(e){const t=await g(this,n,"m",a).call(this,e);return t&&await this.updateMemStoreKeyrings(),t}getKeyringsByType(e){return this.keyrings.filter((t=>t.type===e))}async persistAllKeyrings(){const{encryptionKey:e,encryptionSalt:t}=this.memStore.getState();if(!this.password&&!e)throw new Error(E.KeyringControllerError.MissingCredentials);const r=await Promise.all(this.keyrings.map((async e=>{const[t,r]=await Promise.all([e.type,e.serialize()]);return{type:t,data:r}})));let n,o;if(r.push(...this.unsupportedKeyrings),g(this,i,"f")){if(M(g(this,s,"f")),e){const i=await g(this,s,"f").importKey(e),o=await g(this,s,"f").encryptWithKey(i,r);o.salt=t,n=JSON.stringify(o)}else if(this.password){const{vault:e,exportedKeyString:t}=await g(this,s,"f").encryptWithDetail(this.password,r);n=e,o=t}}else{if("string"!=typeof this.password)throw new TypeError(E.KeyringControllerError.WrongPasswordType);n=await g(this,s,"f").encrypt(this.password,r)}if(!n)throw new Error(E.KeyringControllerError.MissingVaultData);return this.store.updateState({vault:n}),await this.updateMemStoreKeyrings(),o&&this.memStore.updateState({encryptionKey:o,encryptionSalt:JSON.parse(n).salt}),!0}async unlockKeyrings(e,t,r){const o=this.store.getState().vault;if(!o)throw new Error(E.KeyringControllerError.VaultError);let u;if(await g(this,n,"m",c).call(this),g(this,i,"f"))if(M(g(this,s,"f")),e){const t=await g(this,s,"f").decryptWithDetail(e,o);u=t.vault,this.password=e,this.memStore.updateState({encryptionKey:t.exportedKeyString,encryptionSalt:t.salt})}else{const e=JSON.parse(o);if(r!==e.salt)throw new Error(E.KeyringControllerError.ExpiredCredentials);if("string"!=typeof t)throw new TypeError(E.KeyringControllerError.WrongPasswordType);const n=await g(this,s,"f").importKey(t);u=await g(this,s,"f").decryptWithKey(n,e),this.memStore.updateState({encryptionKey:t,encryptionSalt:r})}else{if("string"!=typeof e)throw new TypeError(E.KeyringControllerError.WrongPasswordType);u=await g(this,s,"f").decrypt(e,o),this.password=e}if("object"!=typeof(l=u)||!Array.isArray(l)||!l.every((e=>e.type&&(0,S.isValidJson)(e.data))))throw new Error(E.KeyringControllerError.VaultDataError);var l;return await Promise.all(u.map(g(this,n,"m",a).bind(this))),await this.updateMemStoreKeyrings(),!this.password||g(this,i,"f")&&t||!g(this,s,"f").isVaultUpdated||g(this,s,"f").isVaultUpdated(o)||await this.persistAllKeyrings(),this.keyrings}}function C(e){const t=()=>new e;return t.type=e.type,t}async function P(e){const t=await e.getAccounts();return{type:e.type,accounts:t.map(b.normalize)}}function M(e){if(!("importKey"in e&&"function"==typeof e.importKey&&"decryptWithKey"in e&&"function"==typeof e.decryptWithKey&&"encryptWithKey"in e&&"function"==typeof e.encryptWithKey))throw new Error(E.KeyringControllerError.UnsupportedEncryptionKeyExport)}r.KeyringController=j,s=new WeakMap,i=new WeakMap,n=new WeakSet,o=async function(){await g(this,n,"m",c).call(this);const e=await this.addNewKeyring(E.KeyringType.HD);if(!e)throw new Error(E.KeyringControllerError.NoKeyring);const[t]=await e.getAccounts();if(!t)throw new Error(E.KeyringControllerError.NoAccountOnKeychain);const r=(0,b.normalize)(t);return this.emit("newVault",r),null},a=async function(e){const{type:t,data:r}=e;let s;try{s=await g(this,n,"m",d).call(this,t,r)}catch(e){console.error(e)}return s?(await s.getAccounts(),this.keyrings.push(s),s):(this.unsupportedKeyrings.push(e),undefined)},c=async function(){for(const e of this.keyrings)await g(this,n,"m",u).call(this,e);this.keyrings=[],this.memStore.updateState({keyrings:[]})},u=async function(e){var t;await(null===(t=e.destroy)||void 0===t?void 0:t.call(e))},l=function(){this.memStore.updateState({isUnlocked:!0}),this.emit("unlock")},d=async function(e,t){const r=this.getKeyringBuilderForType(e);if(!r)throw new Error(`${E.KeyringControllerError.NoKeyringBuilder}. Keyring type: ${e}`);const n=r();return await n.deserialize(t),n.init&&await n.init(),n},r.keyringBuilderFactory=C}}},{package:"@metamask/eth-keyring-controller",file:"node_modules/@metamask/eth-keyring-controller/dist/KeyringController.js"}],[1114,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.KeyringControllerError=r.KeyringType=void 0,function(e){e.HD="HD Key Tree",e.Simple="Simple Key Pair"}(r.KeyringType||(r.KeyringType={})),function(e){e.NoKeyring="KeyringController - No keyring found",e.WrongPasswordType="KeyringController - Password must be of type string.",e.NoFirstAccount="KeyringController - First Account not found.",e.DuplicatedAccount="KeyringController - The account you are trying to import is a duplicate",e.VaultError="KeyringController - Cannot unlock without a previous vault.",e.VaultDataError="KeyringController - The decrypted vault has an unexpected shape.",e.UnsupportedEncryptionKeyExport="KeyringController - The encryptor does not support encryption key export.",e.UnsupportedGenerateRandomMnemonic="KeyringController - The current keyring does not support the method generateRandomMnemonic.",e.UnsupportedExportAccount="`KeyringController - The keyring for the current address does not support the method exportAccount",e.UnsupportedRemoveAccount="`KeyringController - The keyring for the current address does not support the method removeAccount",e.UnsupportedSignTransaction="KeyringController - The keyring for the current address does not support the method signTransaction.",e.UnsupportedSignMessage="KeyringController - The keyring for the current address does not support the method signMessage.",e.UnsupportedSignPersonalMessage="KeyringController - The keyring for the current address does not support the method signPersonalMessage.",e.UnsupportedGetEncryptionPublicKey="KeyringController - The keyring for the current address does not support the method getEncryptionPublicKey.",e.UnsupportedDecryptMessage="KeyringController - The keyring for the current address does not support the method decryptMessage.",e.UnsupportedSignTypedMessage="KeyringController - The keyring for the current address does not support the method signTypedMessage.",e.UnsupportedGetAppKeyAddress="KeyringController - The keyring for the current address does not support the method getAppKeyAddress.",e.UnsupportedExportAppKeyForAddress="KeyringController - The keyring for the current address does not support the method exportAppKeyForAddress.",e.NoAccountOnKeychain="KeyringController - The keyring for the current address does not support the method decryptMessage.",e.MissingCredentials="KeyringController - Cannot persist vault without password and encryption key",e.MissingVaultData="KeyringController - Cannot persist vault without vault information",e.ExpiredCredentials="KeyringController - Encryption key and salt provided are expired",e.NoKeyringBuilder="KeyringController - No keyringBuilder found for keyring",e.DataType="KeyringController - Incorrect data type provided"}(r.KeyringControllerError||(r.KeyringControllerError={}))}}},{package:"@metamask/eth-keyring-controller",file:"node_modules/@metamask/eth-keyring-controller/dist/constants.js"}],[1115,{"./KeyringController":1113,"./constants":1114},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.KeyringControllerError=r.KeyringType=r.keyringBuilderFactory=r.KeyringController=void 0;var n=e("./KeyringController");Object.defineProperty(r,"KeyringController",{enumerable:!0,get:function(){return n.KeyringController}}),Object.defineProperty(r,"keyringBuilderFactory",{enumerable:!0,get:function(){return n.keyringBuilderFactory}});var s=e("./constants");Object.defineProperty(r,"KeyringType",{enumerable:!0,get:function(){return s.KeyringType}}),Object.defineProperty(r,"KeyringControllerError",{enumerable:!0,get:function(){return s.KeyringControllerError}})}}},{package:"@metamask/eth-keyring-controller",file:"node_modules/@metamask/eth-keyring-controller/dist/index.js"}],[1116,{"./ledger-bridge":1117,"./ledger-iframe-bridge":1118,"./ledger-keyring":1119},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./ledger-keyring"),r),s(e("./ledger-iframe-bridge"),r),s(e("./ledger-bridge"),r)}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/index.js"}],[1117,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-bridge.js"}],[1118,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,o,a,c,u=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.LedgerIframeBridge=r.IFrameMessageAction=void 0;var l;!function(e){e.LedgerConnectionChange="ledger-connection-change",e.LedgerUnlock="ledger-unlock",e.LedgerMakeApp="ledger-make-app",e.LedgerUpdateTransport="ledger-update-transport",e.LedgerSignTransaction="ledger-sign-transaction",e.LedgerSignPersonalMessage="ledger-sign-personal-message",e.LedgerSignTypedData="ledger-sign-typed-data"}(l=r.IFrameMessageAction||(r.IFrameMessageAction={}));r.LedgerIframeBridge=class{constructor(){n.add(this),this.iframeLoaded=!1,this.isDeviceConnected=!1,this.currentMessageId=0,this.messageCallbacks={}}async init(e){u(this,n,"m",i).call(this,e),this.eventListener=u(this,n,"m",a).bind(this,e),window.addEventListener("message",this.eventListener)}async destroy(){this.eventListener&&window.removeEventListener("message",this.eventListener)}async attemptMakeApp(){return new Promise(((e,t)=>{u(this,n,"m",c).call(this,{action:l.LedgerMakeApp},(r=>{r.success?e(!0):t(r.error)}))}))}async updateTransportMethod(e){return new Promise(((t,r)=>{this.iframeLoaded?u(this,n,"m",c).call(this,{action:l.LedgerUpdateTransport,params:{transportType:e}},(({success:e})=>e?t(!0):r(new Error("Ledger transport could not be updated")))):this.delayedPromise={resolve:t,reject:r,transportType:e}}))}async getPublicKey(e){return u(this,n,"m",s).call(this,l.LedgerUnlock,e)}async deviceSignTransaction(e){return u(this,n,"m",s).call(this,l.LedgerSignTransaction,e)}async deviceSignMessage(e){return u(this,n,"m",s).call(this,l.LedgerSignPersonalMessage,e)}async deviceSignTypedData(e){return u(this,n,"m",s).call(this,l.LedgerSignTypedData,e)}},n=new WeakSet,s=async function(...[e,t]){return new Promise(((r,s)=>{u(this,n,"m",c).call(this,{action:e,params:t},(({success:e,payload:t})=>e?r(t):s(t.error)))}))},i=function(e){this.iframe=document.createElement("iframe"),this.iframe.src=e,this.iframe.allow="hid 'src'",this.iframe.onload=async()=>{if(this.iframeLoaded=!0,this.delayedPromise)try{const e=await this.updateTransportMethod(this.delayedPromise.transportType);this.delayedPromise.resolve(e)}catch(e){this.delayedPromise.reject(e)}finally{delete this.delayedPromise}},document.head.appendChild(this.iframe)},o=function(e){const t=e.split("/");return t.splice(-1,1),t.join("/")},a=function(e,t){if(t.origin===u(this,n,"m",o).call(this,e)&&t.data){const e=this.messageCallbacks[t.data.messageId];e?e(t.data):t.data.action===l.LedgerConnectionChange&&(this.isDeviceConnected=t.data.payload.connected)}},c=function(e,t){this.currentMessageId+=1;const r=Object.assign(Object.assign({},e),{messageId:this.currentMessageId,target:"LEDGER-IFRAME"});if(this.messageCallbacks[this.currentMessageId]=t,!this.iframeLoaded||!this.iframe||!this.iframe.contentWindow)throw new Error("The iframe is not loaded yet");this.iframe.contentWindow.postMessage(r,"*")}}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-iframe-bridge.js"}],[1119,{"@ethereumjs/rlp":382,"@ethereumjs/tx":387,"@ethereumjs/util":399,"@metamask/eth-sig-util":1122,buffer:2448,events:2868,hdkey:3179},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,o,a,c,u,l,d,h,f,p,m,g=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),y=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),w=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&g(t,e,r);return y(t,e),t},v=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},b=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.LedgerKeyring=void 0;const k=e("@ethereumjs/rlp"),_=e("@ethereumjs/tx"),S=w(e("@ethereumjs/util")),T=e("@metamask/eth-sig-util"),E=e("buffer"),A=e("events"),j=b(e("hdkey")),C="m",P=`${C}/44'/60'/0'`,M="Ledger Hardware",O="https://metamask.github.io/eth-ledger-bridge-keyring";var R;!function(e){e.Ropsten="http://api-ropsten.etherscan.io",e.Kovan="http://api-kovan.etherscan.io",e.Rinkeby="https://api-rinkeby.etherscan.io",e.Mainnet="https://api.etherscan.io"}(R||(R={}));class I extends A.EventEmitter{constructor({bridge:e}){if(super(),n.add(this),this.type=M,this.page=0,this.perPage=5,this.unlockedAccount=0,this.accounts=[],this.accountDetails={},this.hdk=new j.default,this.hdPath=P,this.paths={},this.network=R.Mainnet,this.implementFullBIP44=!1,this.bridgeUrl=O,!e)throw new Error("Bridge is a required dependency for the keyring");this.bridge=e}async init(){return this.bridge.init(this.bridgeUrl)}async destroy(){return this.bridge.destroy()}async serialize(){return{hdPath:this.hdPath,accounts:this.accounts,accountDetails:this.accountDetails,bridgeUrl:this.bridgeUrl,implementFullBIP44:!1}}async deserialize(e={}){var t,r,i,o,a;return this.hdPath=null!==(t=e.hdPath)&&void 0!==t?t:P,this.bridgeUrl=null!==(r=e.bridgeUrl)&&void 0!==r?r:O,this.accounts=null!==(i=e.accounts)&&void 0!==i?i:[],this.accountDetails=null!==(o=e.accountDetails)&&void 0!==o?o:{},e.accountDetails||v(this,n,"m",s).call(this,e),this.implementFullBIP44=null!==(a=e.implementFullBIP44)&&void 0!==a&&a,this.accounts=this.accounts.filter((e=>Object.keys(this.accountDetails).includes(S.toChecksumAddress(e)))),Promise.resolve()}isUnlocked(){var e;return Boolean(null===(e=this.hdk)||void 0===e?void 0:e.publicKey)}isConnected(){return this.bridge.isDeviceConnected}setAccountToUnlock(e){this.unlockedAccount="number"==typeof e?e:parseInt(e,10)}setHdPath(e){this.hdPath!==e&&(this.hdk=new j.default),this.hdPath=e}async unlock(e,t=!0){if(this.isUnlocked()&&!e)return"already unlocked";const r=e?v(this,n,"m",f).call(this,e):this.hdPath;let s;try{s=await this.bridge.getPublicKey({hdPath:r})}catch(e){throw e instanceof Error?e:new Error("Unknown error")}return t&&s.chainCode&&(this.hdk.publicKey=E.Buffer.from(s.publicKey,"hex"),this.hdk.chainCode=E.Buffer.from(s.chainCode,"hex")),s.address}async addAccounts(e=1){return new Promise(((t,r)=>{this.unlock().then((async r=>{const s=this.unlockedAccount,i=s+e;for(let e=s;e<i;e++){const t=v(this,n,"m",d).call(this,e);let r;r=v(this,n,"m",h).call(this)?await this.unlock(t):v(this,n,"m",u).call(this,C,e),this.accountDetails[S.toChecksumAddress(r)]={bip44:v(this,n,"m",h).call(this),hdPath:t},this.accounts.includes(r)||(this.accounts=[...this.accounts,r]),this.page=0}t(this.accounts.slice())})).catch(r)}))}async getFirstPage(){return this.page=0,v(this,n,"m",o).call(this,1)}async getNextPage(){return v(this,n,"m",o).call(this,1)}async getPreviousPage(){return v(this,n,"m",o).call(this,-1)}async getAccounts(){return Promise.resolve(this.accounts.slice())}removeAccount(e){if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase())),delete this.accountDetails[S.toChecksumAddress(e)]}async attemptMakeApp(){return this.bridge.attemptMakeApp()}async updateTransportMethod(e){return this.bridge.updateTransportMethod(e)}async signTransaction(e,t){let r;if(function(e){return"getChainId"in e&&"function"==typeof e.getChainId}(t))return t.v=S.bufferToHex(t.getChainId()),t.r="0x00",t.s="0x00",r=t.serialize().toString("hex"),v(this,n,"m",i).call(this,e,r,(e=>(t.v=E.Buffer.from(e.v,"hex"),t.r=E.Buffer.from(e.r,"hex"),t.s=E.Buffer.from(e.s,"hex"),t)));const s=t.getMessageToSign(!1);return r=E.Buffer.isBuffer(s)?s.toString("hex"):E.Buffer.from(k.RLP.encode(s)).toString("hex"),v(this,n,"m",i).call(this,e,r,(e=>{const r=t.toJSON();return r.type=t.type,r.v=S.addHexPrefix(e.v),r.r=S.addHexPrefix(e.r),r.s=S.addHexPrefix(e.s),_.TransactionFactory.fromTxData(r,{common:t.common,freeze:Object.isFrozen(t)})}))}async signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,t){const r=await this.unlockAccountByAddress(e);if(!r)throw new Error("Ledger: Unknown error while signing message");let n;try{n=await this.bridge.deviceSignMessage({hdPath:r,message:S.stripHexPrefix(t)})}catch(e){throw e instanceof Error?e:new Error("Ledger: Unknown error while signing message")}let s=parseInt(String(n.v),10).toString(16);s.length<2&&(s=`0${s}`);const i=`0x${n.r}${n.s}${s}`,o=(0,T.recoverPersonalSignature)({data:t,signature:i});if(S.toChecksumAddress(o)!==S.toChecksumAddress(e))throw new Error("Ledger: The signature doesnt match the right address");return i}async unlockAccountByAddress(e){const t=S.toChecksumAddress(e),r=this.accountDetails[t];if(!r)throw new Error(`Ledger: Account for address '${t}' not found`);const{hdPath:n}=r;if((await this.unlock(n,!1)).toLowerCase()!==e.toLowerCase())throw new Error(`Ledger: Account ${e} does not belong to the connected device`);return n}async signTypedData(e,t,r={}){if(!("V4"===r.version))throw new Error("Ledger: Only version 4 of typed data signing is supported");const{domain:n,types:s,primaryType:i,message:o}=T.TypedDataUtils.sanitizeData(t),a=T.TypedDataUtils.hashStruct("EIP712Domain",n,s,T.SignTypedDataVersion.V4).toString("hex"),c=T.TypedDataUtils.hashStruct(i.toString(),o,s,T.SignTypedDataVersion.V4).toString("hex"),u=await this.unlockAccountByAddress(e);if(!u)throw new Error("Ledger: Unknown error while signing message");let l;try{l=await this.bridge.deviceSignTypedData({hdPath:u,domainSeparatorHex:a,hashStructMessageHex:c})}catch(e){throw e instanceof Error?e:new Error("Ledger: Unknown error while signing message")}let d=parseInt(String(l.v),10).toString(16);d.length<2&&(d=`0${d}`);const h=`0x${l.r}${l.s}${d}`,f=(0,T.recoverTypedSignature)({data:t,signature:h,version:T.SignTypedDataVersion.V4});if(S.toChecksumAddress(f)!==S.toChecksumAddress(e))throw new Error("Ledger: The signature doesnt match the right address");return h}exportAccount(){throw new Error("Not supported on this device")}forgetDevice(){this.accounts=[],this.page=0,this.unlockedAccount=0,this.paths={},this.accountDetails={},this.hdk=new j.default}}r.LedgerKeyring=I,n=new WeakSet,s=function(e){if(v(this,n,"m",h).call(this)&&e.accountIndexes)for(const[t,r]of Object.entries(e.accountIndexes))this.accountDetails[t]={bip44:!0,hdPath:v(this,n,"m",d).call(this,r)};v(this,n,"m",h).call(this)||this.accounts.filter((e=>!Object.keys(this.accountDetails).includes(S.toChecksumAddress(e)))).forEach((e=>{try{this.accountDetails[S.toChecksumAddress(e)]={bip44:!1,hdPath:v(this,n,"m",l).call(this,e)}}catch(t){console.log(`failed to migrate account ${e}`)}}))},i=async function(e,t,r){const n=await this.unlockAccountByAddress(e);if(!n)throw new Error("Ledger: Unknown error while signing transaction");let s;try{s=await this.bridge.deviceSignTransaction({tx:t,hdPath:n})}catch(e){throw e instanceof Error?e:new Error("Ledger: Unknown error while signing transaction")}const i=r(s);if(i.verifySignature())return i;throw new Error("Ledger: The transaction signature is not valid")},o=async function(e){this.page+=e,this.page<=0&&(this.page=1);const t=(this.page-1)*this.perPage,r=t+this.perPage;let s;return await this.unlock(),s=v(this,n,"m",h).call(this)?await v(this,n,"m",a).call(this,t,r):v(this,n,"m",c).call(this,t,r),s},a=async function(e,t){const r=[];for(let s=e;s<t;s++){const e=v(this,n,"m",d).call(this,s),t=await this.unlock(e),i=!this.implementFullBIP44||await v(this,n,"m",p).call(this,t);if(r.push({address:t,balance:null,index:s}),!i)break}return r},c=function(e,t){const r=[];for(let s=e;s<t;s++){const e=v(this,n,"m",u).call(this,C,s);r.push({address:e,balance:null,index:s}),this.paths[S.toChecksumAddress(e)]=s}return r},u=function(e,t){const r=this.hdk.derive(`${e}/${t}`),n=S.publicToAddress(r.publicKey,!0).toString("hex");return S.toChecksumAddress(`0x${n}`)},l=function(e){const t=S.toChecksumAddress(e);let r=this.paths[t];if(void 0===r)for(let e=0;e<1e3;e++)if(t===v(this,n,"m",u).call(this,C,e)){r=e;break}if(void 0===r)throw new Error("Unknown address");return v(this,n,"m",d).call(this,r)},d=function(e){return v(this,n,"m",h).call(this)?`m/44'/60'/${e}'/0/0`:`${this.hdPath}/${e}`},h=function(){return"m/44'/60'/0'/0/0"===this.hdPath},f=function(e){return e.toString().replace("m/","")},p=async function(e){const t=v(this,n,"m",m).call(this),r=await window.fetch(`${t}/api?module=account&action=txlist&address=${e}&tag=latest&page=1&offset=1`),s=await r.json();return"0"!==s.status&&s.result.length>0},m=function(){return this.network},I.type=M}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-keyring.js"}],[112,{"@metamask/transaction-controller":1733,lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/transaction-controller");r.default={version:27,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=27;const r=function(e){const t=e;if(t.TransactionController&&t.TransactionController.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.filter((e=>e.status!==s.TransactionStatus.rejected))}return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/027.js"}],[1121,{"./utils":1125,buffer:2448,tweetnacl:3958,"tweetnacl-util":3957},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return s(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.getEncryptionPublicKey=r.decryptSafely=r.decrypt=r.encryptSafely=r.encrypt=void 0;const o=i(e("tweetnacl")),a=i(e("tweetnacl-util")),c=e("./utils");function u({publicKey:e,data:t,version:r}){if((0,c.isNullish)(e))throw new Error("Missing publicKey parameter");if((0,c.isNullish)(t))throw new Error("Missing data parameter");if((0,c.isNullish)(r))throw new Error("Missing version parameter");if("x25519-xsalsa20-poly1305"===r){if("string"!=typeof t)throw new Error("Message data must be given as a string");const r=o.box.keyPair();let n;try{n=a.decodeBase64(e)}catch(e){throw new Error("Bad public key")}const s=a.decodeUTF8(t),i=o.randomBytes(o.box.nonceLength),c=o.box(s,i,n,r.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:a.encodeBase64(i),ephemPublicKey:a.encodeBase64(r.publicKey),ciphertext:a.encodeBase64(c)}}throw new Error("Encryption type/version not supported")}function l({encryptedData:e,privateKey:t}){if((0,c.isNullish)(e))throw new Error("Missing encryptedData parameter");if((0,c.isNullish)(t))throw new Error("Missing privateKey parameter");if("x25519-xsalsa20-poly1305"===e.version){const r=d(t),n=o.box.keyPair.fromSecretKey(r).secretKey,s=a.decodeBase64(e.nonce),i=a.decodeBase64(e.ciphertext),c=a.decodeBase64(e.ephemPublicKey),u=o.box.open(i,s,c,n);try{if(!u)throw new Error;const e=a.encodeUTF8(u);if(!e)throw new Error;return e}catch(e){if(e&&"string"==typeof e.message&&e.message.length)throw new Error(`Decryption failed: ${e.message}`);throw new Error("Decryption failed.")}}throw new Error("Encryption type/version not supported.")}function d(e){const r=t.from(e,"hex").toString("base64");return a.decodeBase64(r)}r.encrypt=u,r.encryptSafely=function({publicKey:e,data:r,version:n}){if((0,c.isNullish)(e))throw new Error("Missing publicKey parameter");if((0,c.isNullish)(r))throw new Error("Missing data parameter");if((0,c.isNullish)(n))throw new Error("Missing version parameter");if("object"==typeof r&&r&&"toJSON"in r)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");const s={data:r,padding:""},i=t.byteLength(JSON.stringify(s),"utf-8")%2048;let o=0;return i>0&&(o=2048-i-16),s.padding="0".repeat(o),u({publicKey:e,data:JSON.stringify(s),version:n})},r.decrypt=l,r.decryptSafely=function({encryptedData:e,privateKey:t}){if((0,c.isNullish)(e))throw new Error("Missing encryptedData parameter");if((0,c.isNullish)(t))throw new Error("Missing privateKey parameter");return JSON.parse(l({encryptedData:e,privateKey:t})).data},r.getEncryptionPublicKey=function(e){const t=d(e),r=o.box.keyPair.fromSecretKey(t).publicKey;return a.encodeBase64(r)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/message-manager>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-sig-util/dist/encryption.js"}],[1122,{"./encryption":1121,"./personal-sign":1123,"./sign-typed-data":1124,"./utils":1125},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.normalize=r.concatSig=void 0,s(e("./personal-sign"),r),s(e("./sign-typed-data"),r),s(e("./encryption"),r);var i=e("./utils");Object.defineProperty(r,"concatSig",{enumerable:!0,get:function(){return i.concatSig}}),Object.defineProperty(r,"normalize",{enumerable:!0,get:function(){return i.normalize}})}}},{package:"@metamask/message-manager>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-sig-util/dist/index.js"}],[1123,{"./utils":1125,"@ethereumjs/util":399},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.extractPublicKey=r.recoverPersonalSignature=r.personalSign=void 0;const n=e("@ethereumjs/util"),s=e("./utils");function i(e,t){const r=(0,n.hashPersonalMessage)((0,s.legacyToBuffer)(e));return(0,s.recoverPublicKey)(r,t)}r.personalSign=function({privateKey:e,data:t}){if((0,s.isNullish)(t))throw new Error("Missing data parameter");if((0,s.isNullish)(e))throw new Error("Missing privateKey parameter");const r=(0,s.legacyToBuffer)(t),i=(0,n.hashPersonalMessage)(r),o=(0,n.ecsign)(i,e);return(0,s.concatSig)((0,n.toBuffer)(o.v),o.r,o.s)},r.recoverPersonalSignature=function({data:e,signature:t}){if((0,s.isNullish)(e))throw new Error("Missing data parameter");if((0,s.isNullish)(t))throw new Error("Missing signature parameter");const r=i(e,t),o=(0,n.publicToAddress)(r);return(0,n.bufferToHex)(o)},r.extractPublicKey=function({data:e,signature:t}){if((0,s.isNullish)(e))throw new Error("Missing data parameter");if((0,s.isNullish)(t))throw new Error("Missing signature parameter");return`0x${i(e,t).toString("hex")}`}}}},{package:"@metamask/message-manager>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-sig-util/dist/personal-sign.js"}],[1124,{"./utils":1125,"@ethereumjs/util":399,"@metamask/abi-utils":986,"@metamask/abi-utils/dist/parsers":995,"@metamask/abi-utils/dist/utils":1003,"@metamask/utils":1786,"ethereum-cryptography/keccak":2783},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.recoverTypedSignature=r.signTypedData=r.typedSignatureHash=r.TypedDataUtils=r.TYPED_MESSAGE_SCHEMA=r.SignTypedDataVersion=void 0;const n=e("@ethereumjs/util"),s=e("@metamask/abi-utils"),i=e("@metamask/abi-utils/dist/parsers"),o=e("@metamask/abi-utils/dist/utils"),a=e("@metamask/utils"),c=e("ethereum-cryptography/keccak"),u=e("./utils");var l;function d(e,t){if(!Object.keys(l).includes(e))throw new Error(`Invalid version: '${e}'`);if(t&&!t.includes(e))throw new Error(`SignTypedDataVersion not allowed: '${e}'. Allowed versions are: ${t.join(", ")}`)}function h(e,t){(0,a.assert)(null!==t,`Unable to encode value: Invalid number. Expected a valid number value, but received "${t}".`);const r=BigInt(t),n=(0,i.getLength)(e),s=BigInt(2)**BigInt(n)-BigInt(1);return(0,a.assert)(r>=-s&&r<=s,`Unable to encode value: Number "${t}" is out of range for type "${e}".`),r}function f(e){let t=BigInt(0);for(let r=0;r<e.length;r++){const n=BigInt(e.charCodeAt(r)-48);t*=BigInt(10),t+=n>=49?n-BigInt(49)+BigInt(10):n>=17?n-BigInt(17)+BigInt(10):n}return(0,o.padStart)((0,a.bigIntToBytes)(t),20)}function p(e,t,r,i,u){if(d(u,[l.V3,l.V4]),e[r]!==undefined)return["bytes32",u===l.V4&&null==i?"0x0000000000000000000000000000000000000000000000000000000000000000":(0,n.arrToBufArr)((0,c.keccak256)(m(r,i,e,u)))];if("function"===r)throw new Error('Unsupported or invalid type: "function"');if(i===undefined)throw new Error(`missing value for field ${t} of type ${r}`);if("address"===r){if("number"==typeof i)return["address",(0,o.padStart)((0,a.numberToBytes)(i),20)];if((0,a.isStrictHexString)(i))return["address",(0,a.add0x)(i)];if("string"==typeof i)return["address",f(i).subarray(0,20)]}if("bool"===r)return["bool",Boolean(i)];if("bytes"===r)return"number"==typeof i?i=(0,a.numberToBytes)(i):(0,a.isStrictHexString)(i)||"0x"===i?i=(0,a.hexToBytes)(i):"string"==typeof i&&(i=(0,a.stringToBytes)(i)),["bytes32",(0,n.arrToBufArr)((0,c.keccak256)(i))];if(r.startsWith("bytes")&&"bytes"!==r&&!r.includes("["))return"number"==typeof i?i<0?["bytes32",new Uint8Array(32)]:["bytes32",(0,a.bigIntToBytes)(BigInt(i))]:(0,a.isStrictHexString)(i)?["bytes32",(0,a.hexToBytes)(i)]:["bytes32",i];if(r.startsWith("int")&&!r.includes("[")){const e=h(r,i);return e>=BigInt(0)?["uint256",e]:["int256",e]}if("string"===r)return i="number"==typeof i?(0,a.numberToBytes)(i):(0,a.stringToBytes)(null!=i?i:""),["bytes32",(0,n.arrToBufArr)((0,c.keccak256)(i))];if(r.endsWith("]")){if(u===l.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");const o=r.slice(0,r.lastIndexOf("[")),a=i.map((r=>p(e,t,o,r,u)));return["bytes32",(0,n.arrToBufArr)((0,c.keccak256)((0,s.encode)(a.map((([e])=>e)),a.map((([,e])=>e)))))]}return[r,i]}function m(e,t,r,i){d(i,[l.V3,l.V4]);const o=["bytes32"],a=[v(e,r)];for(const n of r[e]){if(i===l.V3&&t[n.name]===undefined)continue;const[e,s]=p(r,n.name,n.type,t[n.name],i);o.push(e),a.push(s)}return(0,n.arrToBufArr)((0,s.encode)(o,a))}function g(e,t){let r="";const n=y(e,t);n.delete(e);const s=[e,...Array.from(n).sort()];for(const e of s){if(!t[e])throw new Error(`No type definition specified: ${e}`);r+=`${e}(${t[e].map((({name:e,type:t})=>`${t} ${e}`)).join(",")})`}return r}function y(e,t,r=new Set){if("string"!=typeof e)throw new Error(`Invalid findTypeDependencies input ${JSON.stringify(e)}`);const n=e.match(/^\w*/u);if([e]=n,r.has(e)||t[e]===undefined)return r;r.add(e);for(const n of t[e])y(n.type,t,r);return r}function w(e,t,r,s){d(s,[l.V3,l.V4]);const i=m(e,t,r,s),o=(0,c.keccak256)(i);return(0,n.arrToBufArr)(o)}function v(e,t){const r=(0,a.stringToBytes)(g(e,t));return(0,n.arrToBufArr)((0,c.keccak256)(r))}function b(e){const t={};for(const n in r.TYPED_MESSAGE_SCHEMA.properties)e[n]&&(t[n]=e[n]);return"types"in t&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t}function k(e,t){d(t,[l.V3,l.V4]);const r=b(e),{domain:n}=r;return w("EIP712Domain",n,{EIP712Domain:r.types.EIP712Domain},t)}function _(e,t){if((0,i.isArrayType)(e)&&Array.isArray(t)){const[r]=(0,i.getArrayType)(e);return t.map((e=>_(r,e)))}if("address"===e){if("number"==typeof t)return(0,o.padStart)((0,a.numberToBytes)(t),20);if((0,a.isStrictHexString)(t))return(0,o.padStart)((0,a.hexToBytes)(t).subarray(0,20),20);if(t instanceof Uint8Array)return(0,o.padStart)(t.subarray(0,20),20)}if("bool"===e)return Boolean(t);if(e.startsWith("bytes")&&"bytes"!==e){const r=(0,i.getByteLength)(e);if("number"==typeof t)return t<0?new Uint8Array:(0,a.numberToBytes)(t).subarray(0,r);if((0,a.isStrictHexString)(t))return(0,a.hexToBytes)(t).subarray(0,r);if(t instanceof Uint8Array)return t.subarray(0,r)}if(e.startsWith("uint")&&"number"==typeof t)return Math.abs(t);if(e.startsWith("int")&&"number"==typeof t){const r=(0,i.getLength)(e);return BigInt.asIntN(r,BigInt(t))}return t}function S(e,t){return t.map((t=>{if("string"==typeof t||"number"==typeof t||"bigint"==typeof t){const r=h(e,t);if(r>=BigInt(0))return(0,o.padStart)((0,a.bigIntToBytes)(r),32);const n=(0,i.getLength)(e),s=BigInt.asIntN(n,r);return(0,a.signedBigIntToBytes)(s,32)}return t}))}function T(e){const t=new Error("Expect argument to be non-empty array");if("object"!=typeof e||!("length"in e)||!e.length)throw t;const r=e.map((({name:e,type:t,value:r})=>{if("address[]"===t)return{name:e,type:"bytes32[]",value:(n=r,n.map((e=>"number"==typeof e?(0,o.padStart)((0,a.numberToBytes)(e),32):(0,a.isStrictHexString)(e)?(0,o.padStart)((0,a.hexToBytes)(e).subarray(0,32),32):e instanceof Uint8Array?(0,o.padStart)(e.subarray(0,32),32):e)))};var n;if(t.startsWith("int")&&(0,i.isArrayType)(t)){const[n,s]=(0,i.getArrayType)(t);return{name:e,type:`bytes32[${null!=s?s:""}]`,value:S(n,r)}}return{name:e,type:t,value:_(t,r)}})),l=r.map((e=>"bytes"!==e.type?e.value:(0,u.legacyToBuffer)(e.value))),d=r.map((e=>{if("function"===e.type)throw new Error('Unsupported or invalid type: "function"');return e.type})),h=e.map((e=>{if(!e.name)throw t;return`${e.type} ${e.name}`}));return(0,n.arrToBufArr)((0,c.keccak256)((0,s.encodePacked)(["bytes32","bytes32"],[(0,c.keccak256)((0,s.encodePacked)(["string[]"],[h],!0)),(0,c.keccak256)((0,s.encodePacked)(d,l,!0))])))}!function(e){e.V1="V1",e.V3="V3",e.V4="V4"}(l=r.SignTypedDataVersion||(r.SignTypedDataVersion={})),r.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},r.TypedDataUtils={encodeData:m,encodeType:g,findTypeDependencies:y,hashStruct:w,hashType:v,sanitizeData:b,eip712Hash:function(e,t){d(t,[l.V3,l.V4]);const r=b(e),s=[(0,a.hexToBytes)("1901")];return s.push(k(e,t)),"EIP712Domain"!==r.primaryType&&s.push(w(r.primaryType,r.message,r.types,t)),(0,n.arrToBufArr)((0,c.keccak256)((0,a.concatBytes)(s)))},eip712DomainHash:k},r.typedSignatureHash=function(e){const t=T(e);return(0,a.bytesToHex)(t)},r.signTypedData=function({privateKey:e,data:t,version:s}){if(d(s),(0,u.isNullish)(t))throw new Error("Missing data parameter");if((0,u.isNullish)(e))throw new Error("Missing private key parameter");const i=s===l.V1?T(t):r.TypedDataUtils.eip712Hash(t,s),o=(0,n.ecsign)(i,e);return(0,u.concatSig)((0,n.arrToBufArr)((0,a.bigIntToBytes)(o.v)),o.r,o.s)},r.recoverTypedSignature=function({data:e,signature:t,version:s}){if(d(s),(0,u.isNullish)(e))throw new Error("Missing data parameter");if((0,u.isNullish)(t))throw new Error("Missing signature parameter");const i=s===l.V1?T(e):r.TypedDataUtils.eip712Hash(e,s),o=(0,u.recoverPublicKey)(i,t),c=(0,n.publicToAddress)(o);return(0,a.bytesToHex)(c)}}}},{package:"@metamask/message-manager>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-sig-util/dist/sign-typed-data.js"}],[1125,{"@ethereumjs/util":399,"@metamask/utils":1786,buffer:2448},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.normalize=r.recoverPublicKey=r.concatSig=r.legacyToBuffer=r.isNullish=r.padWithZeroes=void 0;const n=e("@ethereumjs/util"),s=e("@metamask/utils");function i(e,t){if(""!==e&&!/^[a-f0-9]+$/iu.test(e))throw new Error(`Expected an unprefixed hex string. Received: ${e}`);if(t<0)throw new Error(`Expected a non-negative integer target length. Received: ${t}`);return String.prototype.padStart.call(e,t,"0")}function o(e){return null===e||e===undefined}r.padWithZeroes=i,r.isNullish=o,r.legacyToBuffer=function(e){return"string"!=typeof e||(0,n.isHexString)(e)?(0,n.toBuffer)(e):t.from(e)},r.concatSig=function(e,t,r){const o=(0,n.fromSigned)(t),a=(0,n.fromSigned)(r),c=(0,n.bufferToInt)(e),u=i((0,n.toUnsigned)(o).toString("hex"),64),l=i((0,n.toUnsigned)(a).toString("hex"),64),d=(0,s.remove0x)((0,s.numberToHex)(c));return(0,s.add0x)(u.concat(l,d))},r.recoverPublicKey=function(e,t){const r=(0,n.fromRpcSig)(t);return(0,n.ecrecover)(e,r.v,r.r,r.s)},r.normalize=function(e){if(o(e))return undefined;if("number"==typeof e){if(e<0)return"0x";const t=(0,s.numberToBytes)(e);e=(0,s.bytesToHex)(t)}if("string"!=typeof e){let t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=` received ${typeof e}: ${e}`,new Error(t)}return(0,s.add0x)(e.toLowerCase())}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/message-manager>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-sig-util/dist/utils.js"}],[1126,{"./simple-keyring":1127},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("./simple-keyring");Object.defineProperty(r,"default",{enumerable:!0,get:function(){return n(s).default}})}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-simple-keyring",file:"node_modules/@metamask/eth-simple-keyring/dist/index.js"}],[1127,{"@ethereumjs/util":399,"@metamask/eth-sig-util":1122,"@metamask/utils":1786,buffer:2448,"ethereum-cryptography/keccak":2783,randombytes:3623},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n,s,i,o,a=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},c=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});const l=e("@ethereumjs/util"),d=e("@metamask/eth-sig-util"),h=e("@metamask/utils"),f=e("ethereum-cryptography/keccak"),p=u(e("randombytes")),m="Simple Key Pair";class g{constructor(e=[]){n.add(this),s.set(this,void 0),this.type=m,a(this,s,[],"f"),this.deserialize(e).catch((e=>{throw new Error(`Problem deserializing SimpleKeyring ${e.message}`)}))}async serialize(){return c(this,s,"f").map((e=>e.privateKey.toString("hex")))}async deserialize(e=[]){a(this,s,e.map((e=>{const r=(0,l.stripHexPrefix)(e),n=t.from(r,"hex");return{privateKey:n,publicKey:(0,l.privateToPublic)(n)}})),"f")}async addAccounts(e=1){const t=[];for(let r=0;r<e;r++){const e=y(),r=(0,l.privateToPublic)(e);t.push({privateKey:e,publicKey:r})}a(this,s,c(this,s,"f").concat(t),"f");return t.map((({publicKey:e})=>(0,h.add0x)((0,l.bufferToHex)((0,l.publicToAddress)(e)))))}async getAccounts(){return c(this,s,"f").map((({publicKey:e})=>(0,h.add0x)((0,l.bufferToHex)((0,l.publicToAddress)(e)))))}async signTransaction(e,t,r={}){const s=c(this,n,"m",i).call(this,e,r),o=t.sign(s);return o===undefined?t:o}async signMessage(e,r,s={withAppKeyOrigin:"",validateMessage:!0}){const o=(0,l.stripHexPrefix)(r);if(s.validateMessage&&(0===o.length||!o.match(/^[a-fA-F0-9]*$/u)))throw new Error("Cannot sign invalid message");const a=c(this,n,"m",i).call(this,e,s),u=(0,l.ecsign)(t.from(o,"hex"),a);return(0,d.concatSig)((0,l.toBuffer)(u.v),u.r,u.s)}async signPersonalMessage(e,t,r={withAppKeyOrigin:""}){const s=c(this,n,"m",i).call(this,e,r);return(0,d.personalSign)({privateKey:s,data:t})}async decryptMessage(e,t){const r=c(this,n,"m",o).call(this,e).privateKey.toString("hex");return(0,d.decrypt)({privateKey:r,encryptedData:t})}async signTypedData(e,t,r={version:d.SignTypedDataVersion.V1}){let s=d.SignTypedDataVersion.V1;r.version&&function(e){return e in d.SignTypedDataVersion}(r.version)&&(s=d.SignTypedDataVersion[r.version]);const o=c(this,n,"m",i).call(this,e,r);return(0,d.signTypedData)({privateKey:o,data:t,version:s})}async getEncryptionPublicKey(e,t){const r=c(this,n,"m",i).call(this,e,t);return(0,d.getEncryptionPublicKey)(r.toString("hex"))}async getAppKeyAddress(e,t){if(!t||"string"!=typeof t)throw new Error("'origin' must be a non-empty string");const r=c(this,n,"m",o).call(this,e,{withAppKeyOrigin:t});return(0,h.add0x)((0,l.bufferToHex)((0,l.publicToAddress)(r.publicKey)))}async exportAccount(e,t={withAppKeyOrigin:""}){return c(this,n,"m",o).call(this,e,t).privateKey.toString("hex")}removeAccount(e){if(!c(this,s,"f").map((({publicKey:e})=>(0,l.bufferToHex)((0,l.publicToAddress)(e)).toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);a(this,s,c(this,s,"f").filter((({publicKey:t})=>(0,l.bufferToHex)((0,l.publicToAddress)(t)).toLowerCase()!==e.toLowerCase())),"f")}}function y(){const e=(0,p.default)(32);if(!(0,l.isValidPrivate)(e))throw new Error("Private key does not satisfy the curve requirements (ie. it is invalid)");return e}r.default=g,s=new WeakMap,n=new WeakSet,i=function(e,t={withAppKeyOrigin:""}){if(!e)throw new Error("Must specify address.");return c(this,n,"m",o).call(this,e,t).privateKey},o=function(e,r={}){const n=(0,d.normalize)(e);let i=c(this,s,"f").find((({publicKey:e})=>(0,l.bufferToHex)((0,l.publicToAddress)(e))===n));if(!i)throw new Error("Simple Keyring - Unable to find matching address.");if(r.withAppKeyOrigin){const{privateKey:e}=i,n=t.from(r.withAppKeyOrigin,"utf8"),s=t.concat([e,n]),o=(0,l.arrToBufArr)((0,f.keccak256)(s));i={privateKey:o,publicKey:(0,l.privateToPublic)(o)}}return i},g.type=m}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-simple-keyring",file:"node_modules/@metamask/eth-simple-keyring/dist/simple-keyring.js"}],[1128,{"./util":1134},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CaseInsensitiveMap=void 0;const n=e("./util");class s extends Map{static fromObject(e){return new s(Object.entries(e))}toObject(){return Object.fromEntries(this.entries())}get(e){return super.get(e.toLowerCase())}getOrThrow(e,t="Key"){return this.get(e)??(0,n.throwError)(`${t} '${e}' not found`)}has(e){return super.has(e.toLowerCase())}set(e,t){return super.set(e.toLowerCase(),t)}delete(e){return super.delete(e.toLowerCase())}}r.CaseInsensitiveMap=s}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/CaseInsensitiveMap.js"}],[1129,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.DeferredPromise=void 0;r.DeferredPromise=class{constructor(){if(this.resolve=undefined,this.reject=undefined,this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t})),!this.resolve||!this.reject)throw new Error("Promise constructor failed")}}}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/DeferredPromise.js"}],[113,{lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:28,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=28;const r=function(e){const t=e;if(t.PreferencesController&&t.PreferencesController.tokens&&t.PreferencesController.identities){const{identities:e,tokens:r}=t.PreferencesController;t.PreferencesController.accountTokens={},Object.keys(e).forEach((e=>{t.PreferencesController.accountTokens[e]={mainnet:r}})),t.PreferencesController.tokens=[]}return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/028.js"}],[1130,{"./CaseInsensitiveMap":1128},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.SnapIdMap=r.InvalidSnapIdError=void 0;const o=e("./CaseInsensitiveMap");class a extends Error{constructor(e,t){super(`Snap "${e}" is not allowed to set "${t}"`),this.name="InvalidSnapIdError",this.snapId=e,this.key=t}}r.InvalidSnapIdError=a;class c{constructor(e){n.set(this,void 0),s(this,n,new o.CaseInsensitiveMap(e),"f")}toObject(){return i(this,n,"f").toObject()}static fromObject(e){return new c(Object.entries(e))}get(e,t){const r=i(this,n,"f").get(t);return r?.snapId===e?r:undefined}has(e,t){return this.get(e,t)!==undefined}delete(e,t){return this.has(e,t)&&i(this,n,"f").delete(t)}set(e,t){if(i(this,n,"f").has(e)&&!this.has(t.snapId,e))throw new a(t.snapId,e);return i(this,n,"f").set(e,t),this}values(){return i(this,n,"f").values()}get size(){return i(this,n,"f").size}}r.SnapIdMap=c,n=new WeakMap}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/SnapIdMap.js"}],[1131,{"./DeferredPromise":1129,"./SnapIdMap":1130,"./types":1133,"./util":1134,"@ethereumjs/tx":387,"@metamask/eth-sig-util":1122,"@metamask/keyring-api":1145,"@metamask/utils":1786,events:2868,superstruct:3943,uuid:1157},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,o,a,c,u,l,d,h,f,p,m,g=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},y=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.SnapKeyring=r.SNAP_KEYRING_TYPE=void 0;const w=e("@ethereumjs/tx"),v=e("@metamask/eth-sig-util"),b=e("@metamask/keyring-api"),k=e("@metamask/utils"),_=e("events"),S=e("superstruct"),T=e("uuid"),E=e("./DeferredPromise"),A=e("./SnapIdMap"),j=e("./types"),C=e("./util");r.SNAP_KEYRING_TYPE="Snap Keyring";class P extends _.EventEmitter{constructor(e,t){super(),n.add(this),s.set(this,void 0),i.set(this,void 0),o.set(this,void 0),a.set(this,void 0),this.type=P.type,g(this,s,new b.KeyringSnapControllerClient({controller:e}),"f"),g(this,o,new A.SnapIdMap,"f"),g(this,i,new A.SnapIdMap,"f"),g(this,a,t,"f")}async handleKeyringSnapMessage(e,t){switch((0,S.assert)(t,j.SnapMessageStruct),t.method){case b.KeyringEvent.AccountCreated:return y(this,n,"m",c).call(this,e,t);case b.KeyringEvent.AccountUpdated:return y(this,n,"m",u).call(this,e,t);case b.KeyringEvent.AccountDeleted:return y(this,n,"m",l).call(this,e,t);case b.KeyringEvent.RequestApproved:return y(this,n,"m",d).call(this,e,t);case b.KeyringEvent.RequestRejected:return y(this,n,"m",h).call(this,e,t);default:throw new Error(`Method not supported: ${t.method}`)}}async serialize(){return{accounts:y(this,i,"f").toObject()}}async deserialize(e){e!==undefined&&g(this,i,A.SnapIdMap.fromObject(e.accounts),"f")}async getAccounts(){return(0,C.unique)([...y(this,i,"f").values()].map((({account:e})=>e.address.toLowerCase())))}async getAccountsBySnapId(e){return(0,C.unique)([...y(this,i,"f").values()].filter((({snapId:t})=>t===e)).map((({account:e})=>e.address.toLowerCase())))}async signTransaction(e,t,r={}){const s=(0,C.toJson)({...t.toJSON(),from:e,type:`0x${t.type.toString(16)}`,chainId:(0,k.bigIntToHex)(t.common.chainId())}),i=await y(this,n,"m",f).call(this,{address:e,method:b.EthMethod.SignTransaction,params:[s]}),o=(0,S.mask)(i,(0,S.object)({r:(0,S.string)(),s:(0,S.string)(),v:(0,S.string)()}));return w.TransactionFactory.fromTxData({...s,r:o.r,s:o.s,v:o.v})}async signTypedData(e,t,r={version:v.SignTypedDataVersion.V1}){const s={[v.SignTypedDataVersion.V1]:b.EthMethod.SignTypedDataV1,[v.SignTypedDataVersion.V3]:b.EthMethod.SignTypedDataV3,[v.SignTypedDataVersion.V4]:b.EthMethod.SignTypedDataV4}[r.version]||b.EthMethod.SignTypedDataV1;return(0,C.strictMask)(await y(this,n,"m",f).call(this,{address:e,method:s,params:(0,C.toJson)([e,t])}),b.EthBytesStruct)}async signMessage(e,t){return(0,C.strictMask)(await y(this,n,"m",f).call(this,{address:e,method:b.EthMethod.Sign,params:(0,C.toJson)([e,t])}),b.EthBytesStruct)}async signPersonalMessage(e,t){return(0,C.strictMask)(await y(this,n,"m",f).call(this,{address:e,method:b.EthMethod.PersonalSign,params:(0,C.toJson)([t,e])}),b.EthBytesStruct)}async prepareUserOperation(e,t){return(0,C.strictMask)(await y(this,n,"m",f).call(this,{address:e,method:b.EthMethod.PrepareUserOperation,params:(0,C.toJson)(t)}),b.EthBaseUserOperationStruct)}async patchUserOperation(e,t){return(0,C.strictMask)(await y(this,n,"m",f).call(this,{address:e,method:b.EthMethod.PatchUserOperation,params:(0,C.toJson)([t])}),b.EthUserOperationPatchStruct)}async signUserOperation(e,t){return(0,C.strictMask)(await y(this,n,"m",f).call(this,{address:e,method:b.EthMethod.SignUserOperation,params:(0,C.toJson)([t])}),b.EthBytesStruct)}exportAccount(e){throw new Error("Exporting accounts from snaps is not supported.")}async removeAccount(e){const{account:t,snapId:r}=y(this,n,"m",p).call(this,e);y(this,i,"f").delete(r,t.id);try{await y(this,s,"f").withSnapId(r).deleteAccount(t.id)}catch(t){console.error(`Account '${e}' may not have been removed from snap '${r}':`,t)}}getAccountByAddress(e){return this.listAccounts().find((({address:t})=>(0,C.equalsIgnoreCase)(t,e)))}listAccounts(){return[...y(this,i,"f").values()].map((({account:e,snapId:t})=>{const r=y(this,n,"m",m).call(this,t);return{...e,address:e.address.toLowerCase(),metadata:{name:"",keyring:{type:this.type},...r!==undefined&&{snap:r}}}}))}}r.SnapKeyring=P,s=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,n=new WeakSet,c=async function(e,t){(0,S.assert)(t,b.AccountCreatedEventStruct);const{account:r}=t.params;if(await y(this,a,"f").addressExists(r.address.toLowerCase()))throw new Error(`Account address '${r.address}' already exists`);if(y(this,i,"f").has(e,r.id))throw new Error(`Account '${r.id}' already exists`);return await y(this,a,"f").addAccount(r.address.toLowerCase(),e,(async t=>{t&&(y(this,i,"f").set(r.id,{account:r,snapId:e}),await y(this,a,"f").saveState())})),null},u=async function(e,t){(0,S.assert)(t,b.AccountUpdatedEventStruct);const{account:r}=t.params,{account:n}=y(this,i,"f").get(e,r.id)??(0,C.throwError)(`Account '${r.id}' not found`);if(!(0,C.equalsIgnoreCase)(n.address,r.address))throw new Error(`Cannot change address of account '${r.id}'`);return y(this,i,"f").set(r.id,{account:r,snapId:e}),await y(this,a,"f").saveState(),null},l=async function(e,t){(0,S.assert)(t,b.AccountDeletedEventStruct);const{id:r}=t.params,n=y(this,i,"f").get(e,r);if(n===undefined)return null;const{account:{address:s}}=n;return await y(this,a,"f").removeAccount(s.toLowerCase(),e,(async e=>{e&&await y(this,a,"f").saveState()})),null},d=async function(e,t){(0,S.assert)(t,b.RequestApprovedEventStruct);const{id:r,result:n}=t.params,{promise:s}=y(this,o,"f").get(e,r)??(0,C.throwError)(`Request '${r}' not found`);return y(this,o,"f").delete(e,r),s.resolve(n),null},h=async function(e,t){(0,S.assert)(t,b.RequestRejectedEventStruct);const{id:r}=t.params,{promise:n}=y(this,o,"f").get(e,r)??(0,C.throwError)(`Request '${r}' not found`);return y(this,o,"f").delete(e,r),n.reject(new Error("Request rejected by user or snap.")),null},f=async function({address:e,method:t,params:r,chainId:i=""}){const{account:c,snapId:u}=y(this,n,"m",p).call(this,e);if(!c.methods.includes(t))throw new Error(`Method '${t}' not supported for account ${c.address}`);const l=(0,T.v4)(),d=new E.DeferredPromise;y(this,o,"f").set(l,{promise:d,snapId:u});const h=await(async()=>{try{return await y(this,s,"f").withSnapId(u).submitRequest({id:l,scope:i,account:c.id,request:{method:t,...r!==undefined&&{params:r}}})}catch(e){throw y(this,o,"f").delete(u,l),e}})();if(!h.pending)return y(this,o,"f").delete(u,l),h.result;if(h.redirect?.message||h.redirect?.url){const{message:e="",url:t=""}=h.redirect;await y(this,a,"f").redirectUser(u,t,e)}return d.promise},p=function(e){return[...y(this,i,"f").values()].find((({account:t})=>(0,C.equalsIgnoreCase)(t.address,e)))??(0,C.throwError)(`Account '${e}' not found`)},m=function(e){const t=y(this,s,"f").getController().get(e);return t?{id:e,name:t.manifest.proposedName,enabled:t.enabled}:undefined},P.type=r.SNAP_KEYRING_TYPE}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/SnapKeyring.js"}],[1132,{"./SnapKeyring":1131,"./types":1133},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./types"),r),s(e("./SnapKeyring"),r)}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/index.js"}],[1133,{"@metamask/utils":1786,superstruct:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SnapMessageStruct=void 0;const n=e("@metamask/utils"),s=e("superstruct");r.SnapMessageStruct=(0,s.object)({method:(0,s.string)(),params:(0,s.optional)((0,s.union)([(0,s.array)(n.JsonStruct),(0,s.record)((0,s.string)(),n.JsonStruct)]))})}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/types.js"}],[1134,{superstruct:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.equalsIgnoreCase=r.throwError=r.ensureDefined=r.toJson=r.unique=r.strictMask=void 0;const n=e("superstruct");r.strictMask=function(e,t,r){return(0,n.assert)(e,t,r),e},r.unique=function(e){return[...new Set(e)]},r.toJson=function(e){return JSON.parse(JSON.stringify(e))},r.ensureDefined=function(e){if(e===undefined)throw new Error("Argument is undefined")},r.throwError=function(e){throw new Error(e)},r.equalsIgnoreCase=function(e,t){return e.toLowerCase()===t.toLowerCase()}}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/util.js"}],[1135,{"./superstruct":1155,"@metamask/utils":1786,superstruct:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.JsonRpcRequestStruct=void 0;const n=e("@metamask/utils"),s=e("superstruct"),i=e("./superstruct");r.JsonRpcRequestStruct=(0,i.object)({jsonrpc:(0,s.literal)("2.0"),id:(0,s.union)([(0,s.string)(),(0,s.number)(),(0,s.literal)(null)]),method:(0,s.string)(),params:(0,i.exactOptional)((0,s.union)([(0,s.array)(n.JsonStruct),(0,s.record)((0,s.string)(),n.JsonStruct)]))})}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/JsonRpcRequest.js"}],[1136,{"./internal/api":1146,"./internal/rpc":1151,"./utils":1156,superstruct:3943,uuid:1157},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,o=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},a=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.KeyringClient=void 0;const c=e("superstruct"),u=e("uuid"),l=e("./internal/api"),d=e("./internal/rpc"),h=e("./utils");r.KeyringClient=class{constructor(e){n.add(this),s.set(this,void 0),o(this,s,e,"f")}async listAccounts(){return(0,h.strictMask)(await a(this,n,"m",i).call(this,{method:d.KeyringRpcMethod.ListAccounts}),l.ListAccountsResponseStruct)}async getAccount(e){return(0,h.strictMask)(await a(this,n,"m",i).call(this,{method:d.KeyringRpcMethod.GetAccount,params:{id:e}}),l.GetAccountResponseStruct)}async createAccount(e={}){return(0,h.strictMask)(await a(this,n,"m",i).call(this,{method:d.KeyringRpcMethod.CreateAccount,params:{options:e}}),l.CreateAccountResponseStruct)}async filterAccountChains(e,t){return(0,h.strictMask)(await a(this,n,"m",i).call(this,{method:d.KeyringRpcMethod.FilterAccountChains,params:{id:e,chains:t}}),l.FilterAccountChainsResponseStruct)}async updateAccount(e){(0,c.assert)(await a(this,n,"m",i).call(this,{method:d.KeyringRpcMethod.UpdateAccount,params:{account:e}}),l.UpdateAccountResponseStruct)}async deleteAccount(e){(0,c.assert)(await a(this,n,"m",i).call(this,{method:d.KeyringRpcMethod.DeleteAccount,params:{id:e}}),l.DeleteAccountResponseStruct)}async exportAccount(e){return(0,h.strictMask)(await a(this,n,"m",i).call(this,{method:d.KeyringRpcMethod.ExportAccount,params:{id:e}}),l.ExportAccountResponseStruct)}async listRequests(){return(0,h.strictMask)(await a(this,n,"m",i).call(this,{method:d.KeyringRpcMethod.ListRequests}),l.ListRequestsResponseStruct)}async getRequest(e){return(0,h.strictMask)(await a(this,n,"m",i).call(this,{method:d.KeyringRpcMethod.GetRequest,params:{id:e}}),l.GetRequestResponseStruct)}async submitRequest(e){return(0,h.strictMask)(await a(this,n,"m",i).call(this,{method:d.KeyringRpcMethod.SubmitRequest,params:e}),l.SubmitRequestResponseStruct)}async approveRequest(e,t={}){(0,c.assert)(await a(this,n,"m",i).call(this,{method:d.KeyringRpcMethod.ApproveRequest,params:{id:e,data:t}}),l.ApproveRequestResponseStruct)}async rejectRequest(e){(0,c.assert)(await a(this,n,"m",i).call(this,{method:d.KeyringRpcMethod.RejectRequest,params:{id:e}}),l.RejectRequestResponseStruct)}},s=new WeakMap,n=new WeakSet,i=async function(e){return a(this,s,"f").send({jsonrpc:"2.0",id:(0,u.v4)(),...e})}}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/KeyringClient.js"}],[1137,{"./KeyringClient":1136},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,o,a,c=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},u=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.KeyringSnapControllerClient=void 0;const l=e("./KeyringClient");class d{constructor(e,t,r,a){n.set(this,void 0),s.set(this,void 0),i.set(this,void 0),o.set(this,void 0),c(this,i,e,"f"),c(this,n,t,"f"),c(this,s,r,"f"),c(this,o,a,"f")}async send(e){return u(this,i,"f").handleRequest({snapId:u(this,n,"f"),origin:u(this,s,"f"),handler:u(this,o,"f"),request:e})}}n=new WeakMap,s=new WeakMap,i=new WeakMap,o=new WeakMap;class h extends l.KeyringClient{constructor({controller:e,snapId:t="undefined",origin:r="metamask",handler:n="onKeyringRequest"}){super(new d(e,t,r,n)),a.set(this,void 0),c(this,a,e,"f")}withSnapId(e){return new h({controller:u(this,a,"f"),snapId:e})}getController(){return u(this,a,"f")}}r.KeyringSnapControllerClient=h,a=new WeakMap}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/KeyringSnapControllerClient.js"}],[1138,{"./KeyringClient":1136},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},o=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.KeyringSnapRpcClient=r.SnapRpcSender=void 0;const a=e("./KeyringClient");class c{constructor(e,t){n.set(this,void 0),s.set(this,void 0),i(this,n,e,"f"),i(this,s,t,"f")}async send(e){return o(this,s,"f").request({method:"wallet_invokeKeyring",params:{snapId:o(this,n,"f"),request:e}})}}r.SnapRpcSender=c,n=new WeakMap,s=new WeakMap;class u extends a.KeyringClient{constructor(e,t){super(new c(e,t))}}r.KeyringSnapRpcClient=u}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/KeyringSnapRpcClient.js"}],[1139,{"./superstruct":1155,"./utils":1156,"@metamask/utils":1786,superstruct:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.KeyringResponseStruct=r.KeyringAccountDataStruct=r.KeyringRequestStruct=r.KeyringAccountStruct=r.EthAccountType=r.EthMethod=void 0;const n=e("@metamask/utils"),s=e("superstruct"),i=e("./superstruct"),o=e("./utils");var a,c;!function(e){e.PersonalSign="personal_sign",e.Sign="eth_sign",e.SignTransaction="eth_signTransaction",e.SignTypedDataV1="eth_signTypedData_v1",e.SignTypedDataV3="eth_signTypedData_v3",e.SignTypedDataV4="eth_signTypedData_v4",e.PrepareUserOperation="eth_prepareUserOperation",e.PatchUserOperation="eth_patchUserOperation",e.SignUserOperation="eth_signUserOperation"}(a=r.EthMethod||(r.EthMethod={})),function(e){e.Eoa="eip155:eoa",e.Erc4337="eip155:erc4337"}(c=r.EthAccountType||(r.EthAccountType={})),r.KeyringAccountStruct=(0,i.object)({id:o.UuidStruct,address:(0,s.string)(),options:(0,s.record)((0,s.string)(),n.JsonStruct),methods:(0,s.array)((0,s.enums)([`${a.PersonalSign}`,`${a.Sign}`,`${a.SignTransaction}`,`${a.SignTypedDataV1}`,`${a.SignTypedDataV3}`,`${a.SignTypedDataV4}`,`${a.PrepareUserOperation}`,`${a.PatchUserOperation}`,`${a.SignUserOperation}`])),type:(0,s.enums)([`${c.Eoa}`,`${c.Erc4337}`])}),r.KeyringRequestStruct=(0,i.object)({id:o.UuidStruct,scope:(0,s.string)(),account:o.UuidStruct,request:(0,i.object)({method:(0,s.string)(),params:(0,i.exactOptional)((0,s.union)([(0,s.array)(n.JsonStruct),(0,s.record)((0,s.string)(),n.JsonStruct)]))})}),r.KeyringAccountDataStruct=(0,s.record)((0,s.string)(),n.JsonStruct),r.KeyringResponseStruct=(0,s.union)([(0,i.object)({pending:(0,s.literal)(!0),redirect:(0,i.exactOptional)((0,i.object)({message:(0,i.exactOptional)((0,s.string)()),url:(0,i.exactOptional)((0,s.string)())}))}),(0,i.object)({pending:(0,s.literal)(!1),result:n.JsonStruct})])}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/api.js"}],[114,{"./fail-tx":200,"@metamask/transaction-controller":1733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=e("@metamask/transaction-controller"),i=(n=e("./fail-tx"))&&n.__esModule?n:{default:n};r.default={version:29,migrate:(0,i.default)(29,"Stuck in approved state for too long.",(e=>{const t=e.status===s.TransactionStatus.approved,r=e.submittedTime,n=Date.now();return t&&n-r>432e5}))}}}},{package:"$root$",file:"app/scripts/migrations/029.js"}],[1140,{"./types":1141},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./types"),r)}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/eth/erc4337/index.js"}],[1141,{"../../superstruct":1155,"../types":1143,superstruct:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.EthUserOperationPatchStruct=r.EthBaseUserOperationStruct=r.EthBaseTransactionStruct=r.EthUserOperationStruct=void 0;const n=e("superstruct"),s=e("../../superstruct"),i=e("../types");r.EthUserOperationStruct=(0,s.object)({sender:i.EthAddressStruct,nonce:i.EthUint256Struct,initCode:i.EthBytesStruct,callData:i.EthBytesStruct,callGasLimit:i.EthUint256Struct,verificationGasLimit:i.EthUint256Struct,preVerificationGas:i.EthUint256Struct,maxFeePerGas:i.EthUint256Struct,maxPriorityFeePerGas:i.EthUint256Struct,paymasterAndData:i.EthBytesStruct,signature:i.EthBytesStruct}),r.EthBaseTransactionStruct=(0,s.object)({to:i.EthAddressStruct,value:i.EthUint256Struct,data:i.EthBytesStruct}),r.EthBaseUserOperationStruct=(0,s.object)({nonce:i.EthUint256Struct,initCode:i.EthBytesStruct,callData:i.EthBytesStruct,gasLimits:(0,s.exactOptional)((0,s.object)({callGasLimit:i.EthUint256Struct,verificationGasLimit:i.EthUint256Struct,preVerificationGas:i.EthUint256Struct})),dummyPaymasterAndData:i.EthBytesStruct,dummySignature:i.EthBytesStruct,bundlerUrl:(0,n.string)()}),r.EthUserOperationPatchStruct=(0,s.object)({paymasterAndData:i.EthBytesStruct})}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/eth/erc4337/types.js"}],[1142,{"./erc4337":1140,"./types":1143},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./erc4337"),r),s(e("./types"),r)}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/eth/index.js"}],[1143,{"../superstruct":1155},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.EthUint256Struct=r.EthAddressStruct=r.EthBytesStruct=void 0;const n=e("../superstruct");r.EthBytesStruct=(0,n.definePattern)("EthBytes",/^0x[0-9a-f]*$/iu),r.EthAddressStruct=(0,n.definePattern)("EthAddress",/^0x[0-9a-f]{40}$/iu),r.EthUint256Struct=(0,n.definePattern)("EthUint256",/^0x([1-9a-f][0-9a-f]*|0)$/iu)}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/eth/types.js"}],[1144,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.KeyringEvent=void 0,function(e){e.AccountCreated="notify:accountCreated",e.AccountUpdated="notify:accountUpdated",e.AccountDeleted="notify:accountDeleted",e.RequestApproved="notify:requestApproved",e.RequestRejected="notify:requestRejected"}(r.KeyringEvent||(r.KeyringEvent={}))}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/events.js"}],[1145,{"./KeyringClient":1136,"./KeyringSnapControllerClient":1137,"./KeyringSnapRpcClient":1138,"./api":1139,"./eth":1142,"./events":1144,"./internal":1150,"./rpc-handler":1153,"./snap-utils":1154,"./superstruct":1155},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./api"),r),s(e("./eth"),r),s(e("./events"),r),s(e("./internal"),r),s(e("./KeyringClient"),r),s(e("./KeyringSnapControllerClient"),r),s(e("./KeyringSnapRpcClient"),r),s(e("./rpc-handler"),r),s(e("./snap-utils"),r),s(e("./superstruct"),r)}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/index.js"}],[1146,{"../api":1139,"../utils":1156,"@metamask/utils":1786,superstruct:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.RejectRequestResponseStruct=r.RejectRequestRequestStruct=r.ApproveRequestResponseStruct=r.ApproveRequestRequestStruct=r.SubmitRequestResponseStruct=r.SubmitRequestRequestStruct=r.GetRequestResponseStruct=r.GetRequestRequestStruct=r.ListRequestsResponseStruct=r.ListRequestsRequestStruct=r.ExportAccountResponseStruct=r.ExportAccountRequestStruct=r.DeleteAccountResponseStruct=r.DeleteAccountRequestStruct=r.UpdateAccountResponseStruct=r.UpdateAccountRequestStruct=r.FilterAccountChainsResponseStruct=r.FilterAccountChainsStruct=r.CreateAccountResponseStruct=r.CreateAccountRequestStruct=r.GetAccountResponseStruct=r.GetAccountRequestStruct=r.ListAccountsResponseStruct=r.ListAccountsRequestStruct=void 0;const n=e("@metamask/utils"),s=e("superstruct"),i=e("../api"),o=e("../utils"),a={jsonrpc:(0,s.literal)("2.0"),id:(0,s.union)([(0,s.string)(),(0,s.number)(),(0,s.literal)(null)])};r.ListAccountsRequestStruct=(0,s.object)({...a,method:(0,s.literal)("keyring_listAccounts")}),r.ListAccountsResponseStruct=(0,s.array)(i.KeyringAccountStruct),r.GetAccountRequestStruct=(0,s.object)({...a,method:(0,s.literal)("keyring_getAccount"),params:(0,s.object)({id:o.UuidStruct})}),r.GetAccountResponseStruct=i.KeyringAccountStruct,r.CreateAccountRequestStruct=(0,s.object)({...a,method:(0,s.literal)("keyring_createAccount"),params:(0,s.object)({options:(0,s.record)((0,s.string)(),n.JsonStruct)})}),r.CreateAccountResponseStruct=i.KeyringAccountStruct,r.FilterAccountChainsStruct=(0,s.object)({...a,method:(0,s.literal)("keyring_filterAccountChains"),params:(0,s.object)({id:o.UuidStruct,chains:(0,s.array)((0,s.string)())})}),r.FilterAccountChainsResponseStruct=(0,s.array)((0,s.string)()),r.UpdateAccountRequestStruct=(0,s.object)({...a,method:(0,s.literal)("keyring_updateAccount"),params:(0,s.object)({account:i.KeyringAccountStruct})}),r.UpdateAccountResponseStruct=(0,s.literal)(null),r.DeleteAccountRequestStruct=(0,s.object)({...a,method:(0,s.literal)("keyring_deleteAccount"),params:(0,s.object)({id:o.UuidStruct})}),r.DeleteAccountResponseStruct=(0,s.literal)(null),r.ExportAccountRequestStruct=(0,s.object)({...a,method:(0,s.literal)("keyring_exportAccount"),params:(0,s.object)({id:o.UuidStruct})}),r.ExportAccountResponseStruct=i.KeyringAccountDataStruct,r.ListRequestsRequestStruct=(0,s.object)({...a,method:(0,s.literal)("keyring_listRequests")}),r.ListRequestsResponseStruct=(0,s.array)(i.KeyringRequestStruct),r.GetRequestRequestStruct=(0,s.object)({...a,method:(0,s.literal)("keyring_getRequest"),params:(0,s.object)({id:o.UuidStruct})}),r.GetRequestResponseStruct=i.KeyringRequestStruct,r.SubmitRequestRequestStruct=(0,s.object)({...a,method:(0,s.literal)("keyring_submitRequest"),params:i.KeyringRequestStruct}),r.SubmitRequestResponseStruct=i.KeyringResponseStruct,r.ApproveRequestRequestStruct=(0,s.object)({...a,method:(0,s.literal)("keyring_approveRequest"),params:(0,s.object)({id:o.UuidStruct,data:(0,s.record)((0,s.string)(),n.JsonStruct)})}),r.ApproveRequestResponseStruct=(0,s.literal)(null),r.RejectRequestRequestStruct=(0,s.object)({...a,method:(0,s.literal)("keyring_rejectRequest"),params:(0,s.object)({id:o.UuidStruct})}),r.RejectRequestResponseStruct=(0,s.literal)(null)}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/internal/api.js"}],[1147,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/internal/eth/EthKeyring.js"}],[1148,{"./EthKeyring":1147},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./EthKeyring"),r)}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/internal/eth/index.js"}],[1149,{"../api":1139,"../events":1144,"../utils":1156,"@metamask/utils":1786,superstruct:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.RequestRejectedEventStruct=r.RequestApprovedEventStruct=r.AccountDeletedEventStruct=r.AccountUpdatedEventStruct=r.AccountCreatedEventStruct=void 0;const n=e("@metamask/utils"),s=e("superstruct"),i=e("../api"),o=e("../events"),a=e("../utils");r.AccountCreatedEventStruct=(0,s.object)({method:(0,s.literal)(`${o.KeyringEvent.AccountCreated}`),params:(0,s.object)({account:i.KeyringAccountStruct})}),r.AccountUpdatedEventStruct=(0,s.object)({method:(0,s.literal)(`${o.KeyringEvent.AccountUpdated}`),params:(0,s.object)({account:i.KeyringAccountStruct})}),r.AccountDeletedEventStruct=(0,s.object)({method:(0,s.literal)(`${o.KeyringEvent.AccountDeleted}`),params:(0,s.object)({id:a.UuidStruct})}),r.RequestApprovedEventStruct=(0,s.object)({method:(0,s.literal)(`${o.KeyringEvent.RequestApproved}`),params:(0,s.object)({id:a.UuidStruct,result:n.JsonStruct})}),r.RequestRejectedEventStruct=(0,s.object)({method:(0,s.literal)(`${o.KeyringEvent.RequestRejected}`),params:(0,s.object)({id:a.UuidStruct})})}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/internal/events.js"}],[115,{lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:30,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=30;const r=function(e){const t=e;if(e.PreferencesController){const{frequentRpcListDetail:e}=t.PreferencesController;e&&(e.forEach(((t,r)=>{Boolean(t.chainId)&&Number.isNaN(parseInt(t.chainId))&&delete e[r].chainId})),t.PreferencesController.frequentRpcListDetail=e)}e.NetworkController&&(t.NetworkController.network&&Number.isNaN(parseInt(t.NetworkController.network))&&delete t.NetworkController.network,t.NetworkController.provider&&t.NetworkController.provider.chainId&&Number.isNaN(parseInt(t.NetworkController.provider.chainId))&&delete t.NetworkController.provider.chainId);return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/030.js"}],[1150,{"./api":1146,"./eth":1148,"./events":1149,"./rpc":1151,"./types":1152},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./api"),r),s(e("./eth"),r),s(e("./events"),r),s(e("./rpc"),r),s(e("./types"),r)}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/internal/index.js"}],[1151,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n;Object.defineProperty(r,"__esModule",{value:!0}),r.isKeyringRpcMethod=r.KeyringRpcMethod=void 0,function(e){e.ListAccounts="keyring_listAccounts",e.GetAccount="keyring_getAccount",e.CreateAccount="keyring_createAccount",e.FilterAccountChains="keyring_filterAccountChains",e.UpdateAccount="keyring_updateAccount",e.DeleteAccount="keyring_deleteAccount",e.ExportAccount="keyring_exportAccount",e.ListRequests="keyring_listRequests",e.GetRequest="keyring_getRequest",e.SubmitRequest="keyring_submitRequest",e.ApproveRequest="keyring_approveRequest",e.RejectRequest="keyring_rejectRequest"}(n=r.KeyringRpcMethod||(r.KeyringRpcMethod={})),r.isKeyringRpcMethod=function(e){return Object.values(n).includes(e)}}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/internal/rpc.js"}],[1152,{"../api":1139,"../superstruct":1155,superstruct:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.InternalAccountStruct=void 0;const n=e("superstruct"),s=e("../api"),i=e("../superstruct");r.InternalAccountStruct=(0,i.object)({...s.KeyringAccountStruct.schema,metadata:(0,i.object)({name:(0,n.string)(),snap:(0,i.exactOptional)((0,i.object)({id:(0,n.string)(),enabled:(0,n.boolean)(),name:(0,n.string)()})),lastSelected:(0,i.exactOptional)((0,n.number)()),keyring:(0,i.object)({type:(0,n.string)()})})})}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/internal/types.js"}],[1153,{"./JsonRpcRequest":1135,"./internal/api":1146,"./internal/rpc":1151,superstruct:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.handleKeyringRequest=r.MethodNotSupportedError=void 0;const n=e("superstruct"),s=e("./internal/api"),i=e("./internal/rpc"),o=e("./JsonRpcRequest");class a extends Error{constructor(e){super(`Method not supported: ${e}`)}}r.MethodNotSupportedError=a,r.handleKeyringRequest=async function(e,t){switch((0,n.assert)(t,o.JsonRpcRequestStruct),t.method){case i.KeyringRpcMethod.ListAccounts:return(0,n.assert)(t,s.ListAccountsRequestStruct),e.listAccounts();case i.KeyringRpcMethod.GetAccount:return(0,n.assert)(t,s.GetAccountRequestStruct),e.getAccount(t.params.id);case i.KeyringRpcMethod.CreateAccount:return(0,n.assert)(t,s.CreateAccountRequestStruct),e.createAccount(t.params.options);case i.KeyringRpcMethod.FilterAccountChains:return(0,n.assert)(t,s.FilterAccountChainsStruct),e.filterAccountChains(t.params.id,t.params.chains);case i.KeyringRpcMethod.UpdateAccount:return(0,n.assert)(t,s.UpdateAccountRequestStruct),e.updateAccount(t.params.account);case i.KeyringRpcMethod.DeleteAccount:return(0,n.assert)(t,s.DeleteAccountRequestStruct),e.deleteAccount(t.params.id);case i.KeyringRpcMethod.ExportAccount:if(e.exportAccount===undefined)throw new a(t.method);return(0,n.assert)(t,s.ExportAccountRequestStruct),e.exportAccount(t.params.id);case i.KeyringRpcMethod.ListRequests:if(e.listRequests===undefined)throw new a(t.method);return(0,n.assert)(t,s.ListRequestsRequestStruct),e.listRequests();case i.KeyringRpcMethod.GetRequest:if(e.getRequest===undefined)throw new a(t.method);return(0,n.assert)(t,s.GetRequestRequestStruct),e.getRequest(t.params.id);case i.KeyringRpcMethod.SubmitRequest:return(0,n.assert)(t,s.SubmitRequestRequestStruct),e.submitRequest(t.params);case i.KeyringRpcMethod.ApproveRequest:if(e.approveRequest===undefined)throw new a(t.method);return(0,n.assert)(t,s.ApproveRequestRequestStruct),e.approveRequest(t.params.id,t.params.data);case i.KeyringRpcMethod.RejectRequest:if(e.rejectRequest===undefined)throw new a(t.method);return(0,n.assert)(t,s.RejectRequestRequestStruct),e.rejectRequest(t.params.id);default:throw new a(t.method)}}}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/rpc-handler.js"}],[1154,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.emitSnapKeyringEvent=void 0,r.emitSnapKeyringEvent=async function(e,t,r){await e.request({method:"snap_manageAccounts",params:{method:t,params:{...r}}})}}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/snap-utils.js"}],[1155,{superstruct:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.definePattern=r.exactOptional=r.object=void 0;const n=e("superstruct");function s(e){return e.path[e.path.length-1]in e.branch[e.branch.length-2]}r.object=function(e){return(0,n.object)(e)},r.exactOptional=function(e){return new n.Struct({...e,validator:(t,r)=>!s(r)||e.validator(t,r),refiner:(t,r)=>!s(r)||e.refiner(t,r)})},r.definePattern=function(e,t){return(0,n.define)(e,(e=>"string"==typeof e&&t.test(e)))}}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/superstruct.js"}],[1156,{"./superstruct":1155,superstruct:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.strictMask=r.UuidStruct=void 0;const n=e("superstruct"),s=e("./superstruct");r.UuidStruct=(0,s.definePattern)("UuidV4",/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/iu),r.strictMask=function(e,t,r){return(0,n.assert)(e,t,r),e}}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/utils.js"}],[1157,{"./nil.js":1160,"./parse.js":1161,"./stringify.js":1165,"./v1.js":1166,"./v3.js":1167,"./v4.js":1169,"./v5.js":1170,"./validate.js":1171,"./version.js":1172},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NIL",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"parse",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"v1",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"v3",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"v4",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"v5",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"validate",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"version",{enumerable:!0,get:function(){return c.default}});var n=h(e("./v1.js")),s=h(e("./v3.js")),i=h(e("./v4.js")),o=h(e("./v5.js")),a=h(e("./nil.js")),c=h(e("./version.js")),u=h(e("./validate.js")),l=h(e("./stringify.js")),d=h(e("./parse.js"));function h(e){return e&&e.__esModule?e:{default:e}}}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/index.js"}],[1158,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return 14+(e+64>>>9<<4)+1}function s(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function i(e,t,r,n,i,o){return s((a=s(s(t,e),s(n,o)))<<(c=i)|a>>>32-c,r);var a,c}function o(e,t,r,n,s,o,a){return i(t&r|~t&n,e,t,s,o,a)}function a(e,t,r,n,s,o,a){return i(t&n|r&~n,e,t,s,o,a)}function c(e,t,r,n,s,o,a){return i(t^r^n,e,t,s,o,a)}function u(e,t,r,n,s,o,a){return i(r^(t|~n),e,t,s,o,a)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){const t=[],r=32*e.length,n="0123456789abcdef";for(let s=0;s<r;s+=8){const r=e[s>>5]>>>s%32&255,i=parseInt(n.charAt(r>>>4&15)+n.charAt(15&r),16);t.push(i)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[n(t)-1]=t;let r=1732584193,i=-271733879,l=-1732584194,d=271733878;for(let t=0;t<e.length;t+=16){const n=r,h=i,f=l,p=d;r=o(r,i,l,d,e[t],7,-680876936),d=o(d,r,i,l,e[t+1],12,-389564586),l=o(l,d,r,i,e[t+2],17,606105819),i=o(i,l,d,r,e[t+3],22,-1044525330),r=o(r,i,l,d,e[t+4],7,-176418897),d=o(d,r,i,l,e[t+5],12,1200080426),l=o(l,d,r,i,e[t+6],17,-1473231341),i=o(i,l,d,r,e[t+7],22,-45705983),r=o(r,i,l,d,e[t+8],7,1770035416),d=o(d,r,i,l,e[t+9],12,-1958414417),l=o(l,d,r,i,e[t+10],17,-42063),i=o(i,l,d,r,e[t+11],22,-1990404162),r=o(r,i,l,d,e[t+12],7,1804603682),d=o(d,r,i,l,e[t+13],12,-40341101),l=o(l,d,r,i,e[t+14],17,-1502002290),i=o(i,l,d,r,e[t+15],22,1236535329),r=a(r,i,l,d,e[t+1],5,-165796510),d=a(d,r,i,l,e[t+6],9,-1069501632),l=a(l,d,r,i,e[t+11],14,643717713),i=a(i,l,d,r,e[t],20,-373897302),r=a(r,i,l,d,e[t+5],5,-701558691),d=a(d,r,i,l,e[t+10],9,38016083),l=a(l,d,r,i,e[t+15],14,-660478335),i=a(i,l,d,r,e[t+4],20,-405537848),r=a(r,i,l,d,e[t+9],5,568446438),d=a(d,r,i,l,e[t+14],9,-1019803690),l=a(l,d,r,i,e[t+3],14,-187363961),i=a(i,l,d,r,e[t+8],20,1163531501),r=a(r,i,l,d,e[t+13],5,-1444681467),d=a(d,r,i,l,e[t+2],9,-51403784),l=a(l,d,r,i,e[t+7],14,1735328473),i=a(i,l,d,r,e[t+12],20,-1926607734),r=c(r,i,l,d,e[t+5],4,-378558),d=c(d,r,i,l,e[t+8],11,-2022574463),l=c(l,d,r,i,e[t+11],16,1839030562),i=c(i,l,d,r,e[t+14],23,-35309556),r=c(r,i,l,d,e[t+1],4,-1530992060),d=c(d,r,i,l,e[t+4],11,1272893353),l=c(l,d,r,i,e[t+7],16,-155497632),i=c(i,l,d,r,e[t+10],23,-1094730640),r=c(r,i,l,d,e[t+13],4,681279174),d=c(d,r,i,l,e[t],11,-358537222),l=c(l,d,r,i,e[t+3],16,-722521979),i=c(i,l,d,r,e[t+6],23,76029189),r=c(r,i,l,d,e[t+9],4,-640364487),d=c(d,r,i,l,e[t+12],11,-421815835),l=c(l,d,r,i,e[t+15],16,530742520),i=c(i,l,d,r,e[t+2],23,-995338651),r=u(r,i,l,d,e[t],6,-198630844),d=u(d,r,i,l,e[t+7],10,1126891415),l=u(l,d,r,i,e[t+14],15,-1416354905),i=u(i,l,d,r,e[t+5],21,-57434055),r=u(r,i,l,d,e[t+12],6,1700485571),d=u(d,r,i,l,e[t+3],10,-1894986606),l=u(l,d,r,i,e[t+10],15,-1051523),i=u(i,l,d,r,e[t+1],21,-2054922799),r=u(r,i,l,d,e[t+8],6,1873313359),d=u(d,r,i,l,e[t+15],10,-30611744),l=u(l,d,r,i,e[t+6],15,-1560198380),i=u(i,l,d,r,e[t+13],21,1309151649),r=u(r,i,l,d,e[t+4],6,-145523070),d=u(d,r,i,l,e[t+11],10,-1120210379),l=u(l,d,r,i,e[t+2],15,718787259),i=u(i,l,d,r,e[t+9],21,-343485551),r=s(r,n),i=s(i,h),l=s(l,f),d=s(d,p)}return[r,i,l,d]}(function(e){if(0===e.length)return[];const t=8*e.length,r=new Uint32Array(n(t));for(let n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))};r.default=l}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/md5-browser.js"}],[1159,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};r.default=n}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/native-browser.js"}],[116,{lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:31,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=31;const r=function(e){const{KeyringController:t,PreferencesController:r}=e;if(t&&r){const{vault:e}=t;r.completedOnboarding=Boolean(e)}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/031.js"}],[1160,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default="00000000-0000-0000-0000-000000000000"}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/nil.js"}],[1161,{"./validate.js":1171},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("./validate.js"))&&n.__esModule?n:{default:n};var i=function(e){if(!(0,s.default)(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};r.default=i}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/parse.js"}],[1162,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/regex.js"}],[1163,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){let n;Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){if(!n&&(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(s)};const s=new Uint8Array(16)}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/rng-browser.js"}],[1164,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function s(e,t){return e<<t|e>>>32-t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=function(e){const t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const i=e.length/4+2,o=Math.ceil(i/16),a=new Array(o);for(let t=0;t<o;++t){const r=new Uint32Array(16);for(let n=0;n<16;++n)r[n]=e[64*t+4*n]<<24|e[64*t+4*n+1]<<16|e[64*t+4*n+2]<<8|e[64*t+4*n+3];a[t]=r}a[o-1][14]=8*(e.length-1)/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<o;++e){const i=new Uint32Array(80);for(let t=0;t<16;++t)i[t]=a[e][t];for(let e=16;e<80;++e)i[e]=s(i[e-3]^i[e-8]^i[e-14]^i[e-16],1);let o=r[0],c=r[1],u=r[2],l=r[3],d=r[4];for(let e=0;e<80;++e){const r=Math.floor(e/20),a=s(o,5)+n(r,c,u,l)+d+t[r]+i[e]>>>0;d=l,l=u,u=s(c,30)>>>0,c=o,o=a}r[0]=r[0]+o>>>0,r[1]=r[1]+c>>>0,r[2]=r[2]+u>>>0,r[3]=r[3]+l>>>0,r[4]=r[4]+d>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]};r.default=i}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/sha1-browser.js"}],[1165,{"./validate.js":1171},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.unsafeStringify=o;var n,s=(n=e("./validate.js"))&&n.__esModule?n:{default:n};const i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));function o(e,t=0){return(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase()}var a=function(e,t=0){const r=o(e,t);if(!(0,s.default)(r))throw TypeError("Stringified UUID is invalid");return r};r.default=a}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/stringify.js"}],[1166,{"./rng.js":1163,"./stringify.js":1165},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("./rng.js"))&&n.__esModule?n:{default:n},i=e("./stringify.js");let o,a,c=0,u=0;var l=function(e,t,r){let n=t&&r||0;const l=t||new Array(16);let d=(e=e||{}).node||o,h=e.clockseq!==undefined?e.clockseq:a;if(null==d||null==h){const t=e.random||(e.rng||s.default)();null==d&&(d=o=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==h&&(h=a=16383&(t[6]<<8|t[7]))}let f=e.msecs!==undefined?e.msecs:Date.now(),p=e.nsecs!==undefined?e.nsecs:u+1;const m=f-c+(p-u)/1e4;if(m<0&&e.clockseq===undefined&&(h=h+1&16383),(m<0||f>c)&&e.nsecs===undefined&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=f,u=p,a=h,f+=122192928e5;const g=(1e4*(268435455&f)+p)%4294967296;l[n++]=g>>>24&255,l[n++]=g>>>16&255,l[n++]=g>>>8&255,l[n++]=255&g;const y=f/4294967296*1e4&268435455;l[n++]=y>>>8&255,l[n++]=255&y,l[n++]=y>>>24&15|16,l[n++]=y>>>16&255,l[n++]=h>>>8|128,l[n++]=255&h;for(let e=0;e<6;++e)l[n+e]=d[e];return t||(0,i.unsafeStringify)(l)};r.default=l}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v1.js"}],[1167,{"./md5.js":1158,"./v35.js":1168},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("./v35.js")),s=i(e("./md5.js"));function i(e){return e&&e.__esModule?e:{default:e}}var o=(0,n.default)("v3",48,s.default);r.default=o}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v3.js"}],[1168,{"./parse.js":1161,"./stringify.js":1165},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.URL=r.DNS=void 0,r.default=function(e,t,r){function n(e,n,o,a){var c;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=(0,i.default)(n)),16!==(null===(c=n)||void 0===c?void 0:c.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+e.length);if(u.set(n),u.set(e,n.length),u=r(u),u[6]=15&u[6]|t,u[8]=63&u[8]|128,o){a=a||0;for(let e=0;e<16;++e)o[a+e]=u[e];return o}return(0,s.unsafeStringify)(u)}try{n.name=e}catch(e){}return n.DNS=o,n.URL=a,n};var n,s=e("./stringify.js"),i=(n=e("./parse.js"))&&n.__esModule?n:{default:n};const o="6ba7b810-9dad-11d1-80b4-00c04fd430c8";r.DNS=o;const a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";r.URL=a}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v35.js"}],[1169,{"./native.js":1159,"./rng.js":1163,"./stringify.js":1165},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(e("./native.js")),s=o(e("./rng.js")),i=e("./stringify.js");function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e,t,r){if(n.default.randomUUID&&!t&&!e)return n.default.randomUUID();const o=(e=e||{}).random||(e.rng||s.default)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=o[e];return t}return(0,i.unsafeStringify)(o)};r.default=a}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v4.js"}],[117,{lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:32,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=32;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const{betaUI:e}=t.featureFlags||{};t.completedUiMigration=e}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/032.js"}],[1170,{"./sha1.js":1164,"./v35.js":1168},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("./v35.js")),s=i(e("./sha1.js"));function i(e){return e&&e.__esModule?e:{default:e}}var o=(0,n.default)("v5",80,s.default);r.default=o}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v5.js"}],[1171,{"./regex.js":1162},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("./regex.js"))&&n.__esModule?n:{default:n};var i=function(e){return"string"==typeof e&&s.default.test(e)};r.default=i}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/validate.js"}],[1172,{"./validate.js":1171},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("./validate.js"))&&n.__esModule?n:{default:n};var i=function(e){if(!(0,s.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)};r.default=i}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/version.js"}],[118,{lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:33,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=33;const r=function(e){const t=e;e.NoticeController&&delete t.NoticeController;return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/033.js"}],[1181,{"./trezor-bridge":1182,"./trezor-connect-bridge":1183,"./trezor-keyring":1184},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./trezor-keyring"),r),s(e("./trezor-bridge"),r),s(e("./trezor-connect-bridge"),r)}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/index.js"}],[1182,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/trezor-bridge.js"}],[1183,{"@trezor/connect-web":1982},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return s(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.TrezorConnectBridge=void 0;const o=i(e("@trezor/connect-web"));r.TrezorConnectBridge=class{constructor(){this.trezorConnectInitiated=!1}async init(e){o.default.on(o.DEVICE_EVENT,(e=>{var t;e.type===o.DEVICE.CONNECT&&(this.model=null===(t=e.payload.features)||void 0===t?void 0:t.model)})),this.trezorConnectInitiated||(await o.default.init(e),this.trezorConnectInitiated=!0)}dispose(){return o.default.dispose(),Promise.resolve()}getPublicKey(e){return o.default.getPublicKey(e)}ethereumSignTransaction(e){return o.default.ethereumSignTransaction(e)}ethereumSignMessage(e){return o.default.ethereumSignMessage(e)}ethereumSignTypedData(e){return o.default.ethereumSignTypedData(e)}}}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/trezor-connect-bridge.js"}],[1184,{"@ethereumjs/tx":387,"@ethereumjs/util":399,"@trezor/connect-plugin-ethereum":1978,buffer:2448,events:2868,hdkey:3179},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n,s,i,o,a,c,u=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),d=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&u(t,e,r);return l(t,e),t},h=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},f=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.TrezorKeyring=r.TREZOR_CONNECT_MANIFEST=void 0;const p=e("events"),m=d(e("@ethereumjs/util")),g=f(e("hdkey")),y=e("@ethereumjs/tx"),w=e("@trezor/connect-plugin-ethereum"),v="m/44'/60'/0'/0",b={[v]:!0,"m/44'/60'/0'":!0,"m/44'/1'/0'/0":!0},k="Trezor Hardware",_=1e3;async function S(e){return new Promise((t=>setTimeout(t,e)))}function T(e){return"function"==typeof e.getChainId}r.TREZOR_CONNECT_MANIFEST={email:"support@metamask.io",appUrl:"https://metamask.io"};class E extends p.EventEmitter{constructor({bridge:e}){if(super(),n.add(this),this.type=k,this.accounts=[],this.hdk=new g.default,this.hdPath=v,this.page=0,this.perPage=5,this.unlockedAccount=0,this.paths={},!e)throw new Error("Bridge is a required dependency for the keyring");this.bridge=e}getModel(){return this.bridge.model}init(){return this.bridge.init({manifest:r.TREZOR_CONNECT_MANIFEST,lazyLoad:!0})}async destroy(){return this.bridge.dispose()}async serialize(){return Promise.resolve({hdPath:this.hdPath,accounts:this.accounts,page:this.page,paths:this.paths,perPage:this.perPage,unlockedAccount:this.unlockedAccount})}async deserialize(e={}){var t,r,n,s;return this.hdPath=null!==(t=e.hdPath)&&void 0!==t?t:v,this.accounts=null!==(r=e.accounts)&&void 0!==r?r:[],this.page=null!==(n=e.page)&&void 0!==n?n:0,this.perPage=null!==(s=e.perPage)&&void 0!==s?s:5,Promise.resolve()}isUnlocked(){var e;return Boolean(null===(e=this.hdk)||void 0===e?void 0:e.publicKey)}async unlock(){return this.isUnlocked()?Promise.resolve("already unlocked"):new Promise(((e,r)=>{this.bridge.getPublicKey({path:this.hdPath,coin:"ETH"}).then((n=>{var s;n.success?(this.hdk.publicKey=t.from(n.payload.publicKey,"hex"),this.hdk.chainCode=t.from(n.payload.chainCode,"hex"),e("just unlocked")):r(new Error((null===(s=n.payload)||void 0===s?void 0:s.error)||"Unknown error"))})).catch((e=>{r(new Error((null==e?void 0:e.toString())||"Unknown error"))}))}))}setAccountToUnlock(e){this.unlockedAccount=parseInt(String(e),10)}async addAccounts(e=1){return new Promise(((t,r)=>{this.unlock().then((r=>{const s=this.unlockedAccount,i=s+e;for(let e=s;e<i;e++){const t=h(this,n,"m",a).call(this,"m",e);this.accounts.includes(t)||(this.accounts=[...this.accounts,t]),this.page=0}t(this.accounts)})).catch((e=>{r(e)}))}))}async getFirstPage(){return this.page=0,h(this,n,"m",s).call(this,1)}async getNextPage(){return h(this,n,"m",s).call(this,1)}async getPreviousPage(){return h(this,n,"m",s).call(this,-1)}async getAccounts(){return Promise.resolve(this.accounts.slice())}removeAccount(e){if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))}async signTransaction(e,r){return T(r)?h(this,n,"m",i).call(this,e,r.getChainId(),r,(e=>(r.v=t.from(e.v,"hex"),r.r=t.from(e.r,"hex"),r.s=t.from(e.s,"hex"),r))):h(this,n,"m",i).call(this,e,Number(r.common.chainId()),r,(e=>{const t=r.toJSON();return t.type=r.type,t.v=m.addHexPrefix(e.v),t.r=m.addHexPrefix(e.r),t.s=m.addHexPrefix(e.s),y.TransactionFactory.fromTxData(t,{common:r.common,freeze:Object.isFrozen(r)})}))}async signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,t){return new Promise(((r,s)=>{this.unlock().then((i=>{setTimeout((()=>{this.bridge.ethereumSignMessage({path:h(this,n,"m",c).call(this,e),message:m.stripHexPrefix(t),hex:!0}).then((t=>{var n;if(t.success){t.payload.address!==m.toChecksumAddress(e)&&s(new Error("signature doesnt match the right address"));const n=`0x${t.payload.signature}`;r(n)}else s(new Error((null===(n=t.payload)||void 0===n?void 0:n.error)||"Unknown error"))})).catch((e=>{s(new Error((null==e?void 0:e.toString())||"Unknown error"))}))}),"just unlocked"===i?_:0)})).catch((e=>{s(new Error((null==e?void 0:e.toString())||"Unknown error"))}))}))}async signTypedData(e,t,{version:r}){var s,i;const o=(0,w.transformTypedData)(t,"V4"===r),{types:a,message:u={},domain:l={},primaryType:d,domain_separator_hash:f,message_hash:p}=o,g=await this.unlock();await S("just unlocked"===g?_:0);const y=await this.bridge.ethereumSignTypedData({path:h(this,n,"m",c).call(this,e),data:{types:Object.assign(Object.assign({},a),{EIP712Domain:null!==(s=a.EIP712Domain)&&void 0!==s?s:[]}),message:u,domain:l,primaryType:d},metamask_v4_compat:!0,domain_separator_hash:f,message_hash:null!=p?p:""});if(y.success){if(m.toChecksumAddress(e)!==y.payload.address)throw new Error("signature doesnt match the right address");return y.payload.signature}throw new Error((null===(i=y.payload)||void 0===i?void 0:i.error)||"Unknown error")}async exportAccount(){return Promise.reject(new Error("Not supported on this device"))}forgetDevice(){this.accounts=[],this.hdk=new g.default,this.page=0,this.unlockedAccount=0,this.paths={}}setHdPath(e){if(!b[e])throw new Error(`The setHdPath method does not support setting HD Path to ${e}`);this.hdPath!==e&&(this.hdk=new g.default,this.accounts=[],this.page=0,this.perPage=5,this.unlockedAccount=0,this.paths={}),this.hdPath=e}}r.TrezorKeyring=E,n=new WeakSet,s=async function(e){return this.page+=e,this.page<=0&&(this.page=1),new Promise(((e,t)=>{this.unlock().then((t=>{const r=(this.page-1)*this.perPage,s=r+this.perPage,i=[];for(let e=r;e<s;e++){const t=h(this,n,"m",a).call(this,"m",e);i.push({address:t,balance:null,index:e}),this.paths[m.toChecksumAddress(t)]=e}e(i)})).catch((e=>{t(e)}))}))},i=async function(e,t,r,s){var i,a;let u;u=T(r)?{to:h(this,n,"m",o).call(this,r.to),value:h(this,n,"m",o).call(this,r.value),data:h(this,n,"m",o).call(this,r.data),chainId:t,nonce:h(this,n,"m",o).call(this,r.nonce),gasLimit:h(this,n,"m",o).call(this,r.gasLimit),gasPrice:h(this,n,"m",o).call(this,r.gasPrice)}:Object.assign(Object.assign({},r.toJSON()),{chainId:t,to:h(this,n,"m",o).call(this,m.toBuffer(r.to))});try{const t=await this.unlock();await S("just unlocked"===t?_:0);const r=await this.bridge.ethereumSignTransaction({path:h(this,n,"m",c).call(this,e),transaction:u});if(r.success){const t=s(r.payload),n=m.toChecksumAddress(m.addHexPrefix(t.getSenderAddress().toString("hex")));if(n!==m.toChecksumAddress(e))throw new Error("signature doesn't match the right address");return t}throw new Error((null===(i=r.payload)||void 0===i?void 0:i.error)||"Unknown error")}catch(e){throw new Error(null!==(a=null==e?void 0:e.toString())&&void 0!==a?a:"Unknown error")}},o=function(e){return m.bufferToHex(e).toString()},a=function(e,t){const r=this.hdk.derive(`${e}/${t}`),n=m.publicToAddress(r.publicKey,!0).toString("hex");return m.toChecksumAddress(`0x${n}`)},c=function(e){const t=m.toChecksumAddress(e);let r=this.paths[t];if(void 0===r)for(let e=0;e<1e3;e++)if(t===h(this,n,"m",a).call(this,"m",e)){r=e;break}if(void 0===r)throw new Error("Unknown address");return`${this.hdPath}/${r}`},E.type=k}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/trezor-keyring.js"}],[119,{lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:34,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=34;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const e=t.featureFlags||{};e.privacyMode||void 0!==t.migratedPrivacyMode||(t.migratedPrivacyMode=!0,e.privacyMode=!0)}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/034.js"}],[1192,{"ethjs-format":2857,"ethjs-rpc":2860,"promise-to-callback":3571},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("ethjs-format"),s=e("ethjs-rpc"),i=e("promise-to-callback");function o(e,t){var r=this,n=t||{};if(!(this instanceof o))throw new Error('[ethjs-query] the Eth object requires the "new" flag in order to function normally (i.e. `const eth = new Eth(provider);`).');if("object"!=typeof e)throw new Error("[ethjs-query] the Eth object requires that the first input 'provider' must be an object, got '"+typeof e+"' (i.e. 'const eth = new Eth(provider);')");r.options=Object.assign({debug:n.debug||!1,logger:n.logger||console,jsonSpace:n.jsonSpace||0}),r.rpc=new s(e),r.setProvider=r.rpc.setProvider}function a(e,t){return function(){var r=null,s=null,o=this,a=[].slice.call(arguments),c=e.replace("eth_","");a.length>0&&"function"==typeof a[a.length-1]&&(r=a.pop());var u=function(){var r=this;return new Promise((function(i,u){if(a.length<t[2])u(new Error("[ethjs-query] method '"+c+"' requires at least "+t[2]+" input (format type "+t[0][0]+"), "+a.length+" provided. For more information visit: https://github.com/ethereum/wiki/wiki/JSON-RPC#"+e.toLowerCase()));else if(a.length>t[0].length)u(new Error("[ethjs-query] method '"+c+"' requires at most "+t[0].length+" params, "+a.length+" provided '"+JSON.stringify(a,null,o.options.jsonSpace)+"'. For more information visit: https://github.com/ethereum/wiki/wiki/JSON-RPC#"+e.toLowerCase()));else{t[3]&&a.length<t[3]&&a.push("latest"),r.log("attempting method formatting for '"+c+"' with inputs "+JSON.stringify(a,null,r.options.jsonSpace));try{s=n.formatInputs(e,a),r.log("method formatting success for '"+c+"' with formatted result: "+JSON.stringify(s,null,r.options.jsonSpace))}catch(e){return void u(new Error("[ethjs-query] while formatting inputs '"+JSON.stringify(a,null,r.options.jsonSpace)+"' for method '"+c+"' error: "+e))}r.rpc.sendAsync({method:e,params:s}).then((function(t){r.log("attempting method formatting for '"+c+"' with raw outputs: "+JSON.stringify(t,null,r.options.jsonSpace));var s=n.formatOutputs(e,t);r.log("method formatting success for '"+c+"' formatted result: "+JSON.stringify(s,null,r.options.jsonSpace)),i(s)})).catch((function(e){u(e)}))}}))}.call(this);return r?i(u)(r):u}}t.exports=o,o.prototype.log=function(e){this.options.debug&&this.options.logger.log("[ethjs-query log] "+e)},Object.keys(n.schema.methods).forEach((function(e){Object.defineProperty(o.prototype,e.replace("eth_",""),{enumerable:!0,value:a(e,n.schema.methods[e])})}))}}},{package:"@metamask/ethjs-query",file:"node_modules/@metamask/ethjs-query/lib/index.js"}],[12,{"../../../shared/constants/app":4054,"../../../shared/constants/keyring":4060,"../../../shared/constants/metametrics":4063,"@metamask/base-controller":1078,"@metamask/message-manager":1311,events:2868,loglevel:3447},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=l(e("events")),s=l(e("loglevel")),i=e("@metamask/message-manager"),o=e("@metamask/base-controller"),a=e("../../../shared/constants/metametrics"),c=e("../../../shared/constants/keyring"),u=e("../../../shared/constants/app");function l(e){return e&&e.__esModule?e:{default:e}}function d(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const h={unapprovedEncryptionPublicKeyMsgs:{persist:!1,anonymous:!1},unapprovedEncryptionPublicKeyMsgCount:{persist:!1,anonymous:!1}};class f extends o.BaseController{constructor({messenger:e,getEncryptionPublicKey:t,getAccountKeyringType:r,getState:s,metricsEvent:o}){super({name:"EncryptionPublicKeyController",metadata:h,messenger:e,state:{unapprovedEncryptionPublicKeyMsgs:{},unapprovedEncryptionPublicKeyMsgCount:0}}),d(this,"hub",void 0),d(this,"_getEncryptionPublicKey",void 0),d(this,"_getAccountKeyringType",void 0),d(this,"_getState",void 0),d(this,"_encryptionPublicKeyManager",void 0),d(this,"_metricsEvent",void 0),this._getEncryptionPublicKey=t,this._getAccountKeyringType=r,this._getState=s,this._metricsEvent=o,this.hub=new n.default,this._encryptionPublicKeyManager=new i.EncryptionPublicKeyManager(undefined,undefined,undefined,["received"]),this._encryptionPublicKeyManager.hub.on("updateBadge",(()=>{this.hub.emit("updateBadge")})),this._encryptionPublicKeyManager.hub.on("unapprovedMessage",(e=>{this._requestApproval(e,"eth_getEncryptionPublicKey")})),this._subscribeToMessageState(this._encryptionPublicKeyManager,((e,t,r)=>{e.unapprovedEncryptionPublicKeyMsgs=t,e.unapprovedEncryptionPublicKeyMsgCount=r}))}get unapprovedMsgCount(){return this._encryptionPublicKeyManager.getUnapprovedMessagesCount()}resetState(){this.update((()=>({unapprovedEncryptionPublicKeyMsgs:{},unapprovedEncryptionPublicKeyMsgCount:0})))}async newRequestEncryptionPublicKey(e,t){switch(await this._getAccountKeyringType(e)){case c.KeyringType.ledger:return new Promise(((e,t)=>{t(new Error("Ledger does not support eth_getEncryptionPublicKey."))}));case c.KeyringType.trezor:return new Promise(((e,t)=>{t(new Error("Trezor does not support eth_getEncryptionPublicKey."))}));case c.KeyringType.lattice:return new Promise(((e,t)=>{t(new Error("Lattice does not support eth_getEncryptionPublicKey."))}));case c.KeyringType.qr:return Promise.reject(new Error("QR hardware does not support eth_getEncryptionPublicKey."));default:return this._encryptionPublicKeyManager.addUnapprovedMessageAsync({from:e},t)}}async encryptionPublicKey(e){s.default.info("MetaMaskController - encryptionPublicKey");const t=e.metamaskId;try{const r=await this._encryptionPublicKeyManager.approveMessage(e),n=await this._getEncryptionPublicKey(r.from);return this._encryptionPublicKeyManager.setMessageStatusAndResult(t,n,"received"),this._acceptApproval(t),this._getState()}catch(e){throw s.default.info("MetaMaskController - eth_getEncryptionPublicKey failed.",e),this._cancelAbstractMessage(this._encryptionPublicKeyManager,t),e}}cancelEncryptionPublicKey(e){return this._cancelAbstractMessage(this._encryptionPublicKeyManager,e)}rejectUnapproved(e){Object.keys(this._encryptionPublicKeyManager.getUnapprovedMessages()).forEach((t=>{this._cancelAbstractMessage(this._encryptionPublicKeyManager,t,e)}))}clearUnapproved(){this._encryptionPublicKeyManager.update({unapprovedMessages:{},unapprovedMessagesCount:0})}_cancelAbstractMessage(e,t,r){return r&&this._metricsEvent({event:r,category:a.MetaMetricsEventCategory.Messages,properties:{action:"Encryption public key Request"}}),e.rejectMessage(t),this._rejectApproval(t),this._getState()}_subscribeToMessageState(e,t){e.subscribe((e=>{const r=this._migrateMessages(e.unapprovedMessages);this.update((n=>{t(n,r,e.unapprovedMessagesCount)}))}))}_migrateMessages(e){const t={};for(const r of Object.keys(e)){const n=e[r],s=this._migrateMessage(n);t[r]=s}return t}_migrateMessage(e){const{messageParams:t,...r}=e;return{...r,rawSig:e.rawSig,msgParams:t.from,origin:t.origin}}_requestApproval(e,t){const r=e.metamaskId,n=e.origin||u.ORIGIN_METAMASK;this.messagingSystem.call("ApprovalController:addRequest",{id:r,origin:n,type:t},!0).catch((()=>{}))}_acceptApproval(e){this.messagingSystem.call("ApprovalController:acceptRequest",e)}_rejectApproval(e){this.messagingSystem.call("ApprovalController:rejectRequest",e,"Cancel")}}r.default=f}}},{package:"$root$",file:"app/scripts/controllers/encryption-public-key.ts"}],[120,{lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:35,async migrate(e){const t=(0,n.cloneDeep)(e);return t.meta.version=35,t.data=function(e){e.PreferencesController&&e.PreferencesController.seedWords!==undefined&&delete e.PreferencesController.seedWords;return e}(t.data),t}}}}},{package:"$root$",file:"app/scripts/migrations/035.js"}],[121,{lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:36,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=36;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const e=t.featureFlags||{};void 0!==e.privacyMode&&delete e.privacyMode}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/036.js"}],[122,{"@metamask/controller-utils":1083,lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/controller-utils");r.default={version:37,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=37;const r=t.data;return t.data=function(e){if(e.AddressBookController){const t=e.AddressBookController.addressBook,r=new Set,n={};Object.values(t).forEach((e=>{r.add(e.chainId)}));for(const e of r.values()){n[e]={};for(const r in t)t[r].chainId===e&&(t[r].isEns=!1,(0,s.normalizeEnsName)(t[r].name)&&(t[r].isEns=!0),n[e][r]=t[r])}e.AddressBookController.addressBook=n}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/037.js"}],[123,{lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:38,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=38;const r=t.data;return t.data=function(e){const{ABTestController:t={}}=e,{abTests:r={}}=t;if(r.fullScreenVsPopup)return e;return{...e,ABTestController:{...t,abTests:{...r,fullScreenVsPopup:"control"}}}}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/038.js"}],[124,{"../../../shared/modules/hexstring-utils":4095,lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/modules/hexstring-utils");const i="0x89d24A6b4CcB1B6fAA2625fE562bDD9a23260359",o="DAI",a="SAI";function c(e={}){return e&&"object"==typeof e&&e.symbol===o&&(0,s.toChecksumHexAddress)(e.address)===i}r.default={version:39,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=39;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const e=t.tokens||[];if(Array.isArray(e))for(const t of e)c(t)&&(t.symbol=a);const r=t.accountTokens||{};if(r&&"object"==typeof r)for(const e of Object.keys(r)){const t=r[e];if(t&&"object"==typeof t)for(const e of Object.keys(t)){const r=t[e];if(Array.isArray(r))for(const e of r)c(e)&&(e.symbol=a)}}}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/039.js"}],[125,{lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:40,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=40;const r=t.data;return t.data=function(e){return delete e.ProviderApprovalController,e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/040.js"}],[1255,{"./superstruct":1268,"@metamask/utils":1786,superstruct:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.JsonRpcRequestStruct=void 0;const n=e("@metamask/utils"),s=e("superstruct"),i=e("./superstruct");r.JsonRpcRequestStruct=(0,i.object)({jsonrpc:(0,s.literal)("2.0"),id:(0,s.union)([(0,s.string)(),(0,s.number)(),(0,s.literal)(null)]),method:(0,s.string)(),params:(0,i.exactOptional)((0,s.union)([(0,s.array)(n.JsonStruct),(0,s.record)((0,s.string)(),n.JsonStruct)]))})}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/JsonRpcRequest.js"}],[1256,{"./internal/api":1262,"./rpc-handler":1266,"./utils":1269,superstruct:3943,uuid:1270},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,o=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},a=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.KeyringClient=void 0;const c=e("superstruct"),u=e("uuid"),l=e("./internal/api"),d=e("./rpc-handler"),h=e("./utils");r.KeyringClient=class{constructor(e){n.add(this),s.set(this,void 0),o(this,s,e,"f")}async listAccounts(){return(0,h.strictMask)(await a(this,n,"m",i).call(this,{method:d.KeyringRpcMethod.ListAccounts}),l.ListAccountsResponseStruct)}async getAccount(e){return(0,h.strictMask)(await a(this,n,"m",i).call(this,{method:d.KeyringRpcMethod.GetAccount,params:{id:e}}),l.GetAccountResponseStruct)}async createAccount(e={}){return(0,h.strictMask)(await a(this,n,"m",i).call(this,{method:d.KeyringRpcMethod.CreateAccount,params:{options:e}}),l.CreateAccountResponseStruct)}async filterAccountChains(e,t){return(0,h.strictMask)(await a(this,n,"m",i).call(this,{method:d.KeyringRpcMethod.FilterAccountChains,params:{id:e,chains:t}}),l.FilterAccountChainsResponseStruct)}async updateAccount(e){(0,c.assert)(await a(this,n,"m",i).call(this,{method:d.KeyringRpcMethod.UpdateAccount,params:{account:e}}),l.UpdateAccountResponseStruct)}async deleteAccount(e){(0,c.assert)(await a(this,n,"m",i).call(this,{method:d.KeyringRpcMethod.DeleteAccount,params:{id:e}}),l.DeleteAccountResponseStruct)}async exportAccount(e){return(0,h.strictMask)(await a(this,n,"m",i).call(this,{method:d.KeyringRpcMethod.ExportAccount,params:{id:e}}),l.ExportAccountResponseStruct)}async listRequests(){return(0,h.strictMask)(await a(this,n,"m",i).call(this,{method:d.KeyringRpcMethod.ListRequests}),l.ListRequestsResponseStruct)}async getRequest(e){return(0,h.strictMask)(await a(this,n,"m",i).call(this,{method:d.KeyringRpcMethod.GetRequest,params:{id:e}}),l.GetRequestResponseStruct)}async submitRequest(e){return(0,h.strictMask)(await a(this,n,"m",i).call(this,{method:d.KeyringRpcMethod.SubmitRequest,params:e}),l.SubmitRequestResponseStruct)}async approveRequest(e,t={}){(0,c.assert)(await a(this,n,"m",i).call(this,{method:d.KeyringRpcMethod.ApproveRequest,params:{id:e,data:t}}),l.ApproveRequestResponseStruct)}async rejectRequest(e){(0,c.assert)(await a(this,n,"m",i).call(this,{method:d.KeyringRpcMethod.RejectRequest,params:{id:e}}),l.RejectRequestResponseStruct)}},s=new WeakMap,n=new WeakSet,i=async function(e){return a(this,s,"f").send({jsonrpc:"2.0",id:(0,u.v4)(),...e})}}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/KeyringClient.js"}],[1257,{"./KeyringClient":1256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,o,a,c=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},u=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.KeyringSnapControllerClient=void 0;const l=e("./KeyringClient");class d{constructor(e,t,r,a){n.set(this,void 0),s.set(this,void 0),i.set(this,void 0),o.set(this,void 0),c(this,i,e,"f"),c(this,n,t,"f"),c(this,s,r,"f"),c(this,o,a,"f")}async send(e){return u(this,i,"f").handleRequest({snapId:u(this,n,"f"),origin:u(this,s,"f"),handler:u(this,o,"f"),request:e})}}n=new WeakMap,s=new WeakMap,i=new WeakMap,o=new WeakMap;class h extends l.KeyringClient{constructor({controller:e,snapId:t="undefined",origin:r="metamask",handler:n="onKeyringRequest"}){super(new d(e,t,r,n)),a.set(this,void 0),c(this,a,e,"f")}withSnapId(e){return new h({controller:u(this,a,"f"),snapId:e})}getController(){return u(this,a,"f")}}r.KeyringSnapControllerClient=h,a=new WeakMap}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/KeyringSnapControllerClient.js"}],[1258,{"./KeyringClient":1256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},o=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.KeyringSnapRpcClient=r.SnapRpcSender=void 0;const a=e("./KeyringClient");class c{constructor(e,t){n.set(this,void 0),s.set(this,void 0),i(this,n,e,"f"),i(this,s,t,"f")}async send(e){return o(this,s,"f").request({method:"wallet_invokeKeyring",params:{snapId:o(this,n,"f"),request:e}})}}r.SnapRpcSender=c,n=new WeakMap,s=new WeakMap;class u extends a.KeyringClient{constructor(e,t){super(new c(e,t))}}r.KeyringSnapRpcClient=u}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/KeyringSnapRpcClient.js"}],[1259,{"./superstruct":1268,"./utils":1269,"@metamask/utils":1786,superstruct:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.KeyringResponseStruct=r.KeyringAccountDataStruct=r.KeyringRequestStruct=r.KeyringAccountStruct=r.EthAccountType=r.EthMethod=void 0;const n=e("@metamask/utils"),s=e("superstruct"),i=e("./superstruct"),o=e("./utils");var a,c;!function(e){e.PersonalSign="personal_sign",e.Sign="eth_sign",e.SignTransaction="eth_signTransaction",e.SignTypedDataV1="eth_signTypedData_v1",e.SignTypedDataV3="eth_signTypedData_v3",e.SignTypedDataV4="eth_signTypedData_v4"}(a=r.EthMethod||(r.EthMethod={})),function(e){e.Eoa="eip155:eoa",e.Eip4337="eip155:eip4337"}(c=r.EthAccountType||(r.EthAccountType={})),r.KeyringAccountStruct=(0,i.object)({id:o.UuidStruct,address:(0,s.string)(),options:(0,s.record)((0,s.string)(),n.JsonStruct),methods:(0,s.array)((0,s.enums)([`${a.PersonalSign}`,`${a.Sign}`,`${a.SignTransaction}`,`${a.SignTypedDataV1}`,`${a.SignTypedDataV3}`,`${a.SignTypedDataV4}`])),type:(0,s.enums)([`${c.Eoa}`,`${c.Eip4337}`])}),r.KeyringRequestStruct=(0,i.object)({id:o.UuidStruct,scope:(0,s.string)(),account:o.UuidStruct,request:(0,i.object)({method:(0,s.string)(),params:(0,i.exactOptional)((0,s.union)([(0,s.array)(n.JsonStruct),(0,s.record)((0,s.string)(),n.JsonStruct)]))})}),r.KeyringAccountDataStruct=(0,s.record)((0,s.string)(),n.JsonStruct),r.KeyringResponseStruct=(0,s.union)([(0,i.object)({pending:(0,s.literal)(!0),redirect:(0,i.exactOptional)((0,i.object)({message:(0,i.exactOptional)((0,s.string)()),url:(0,i.exactOptional)((0,s.string)())}))}),(0,i.object)({pending:(0,s.literal)(!1),result:n.JsonStruct})])}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/api.js"}],[126,{lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:41,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=41;const r=t.data;return t.data=function(e){e.PreferencesController&&e.PreferencesController.preferences&&(e.PreferencesController.preferences.autoLockTimeLimit=e.PreferencesController.preferences.autoLogoutTimeLimit,delete e.PreferencesController.preferences.autoLogoutTimeLimit);return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/041.js"}],[1260,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.KeyringEvent=void 0,function(e){e.AccountCreated="notify:accountCreated",e.AccountUpdated="notify:accountUpdated",e.AccountDeleted="notify:accountDeleted",e.RequestApproved="notify:requestApproved",e.RequestRejected="notify:requestRejected"}(r.KeyringEvent||(r.KeyringEvent={}))}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/events.js"}],[1261,{"./KeyringClient":1256,"./KeyringSnapControllerClient":1257,"./KeyringSnapRpcClient":1258,"./api":1259,"./events":1260,"./internal":1264,"./rpc-handler":1266,"./snap-utils":1267,"./superstruct":1268},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./api"),r),s(e("./events"),r),s(e("./internal"),r),s(e("./KeyringClient"),r),s(e("./KeyringSnapControllerClient"),r),s(e("./KeyringSnapRpcClient"),r),s(e("./rpc-handler"),r),s(e("./snap-utils"),r),s(e("./superstruct"),r)}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/index.js"}],[1262,{"../api":1259,"../utils":1269,"@metamask/utils":1786,superstruct:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.RejectRequestResponseStruct=r.RejectRequestRequestStruct=r.ApproveRequestResponseStruct=r.ApproveRequestRequestStruct=r.SubmitRequestResponseStruct=r.SubmitRequestRequestStruct=r.GetRequestResponseStruct=r.GetRequestRequestStruct=r.ListRequestsResponseStruct=r.ListRequestsRequestStruct=r.ExportAccountResponseStruct=r.ExportAccountRequestStruct=r.DeleteAccountResponseStruct=r.DeleteAccountRequestStruct=r.UpdateAccountResponseStruct=r.UpdateAccountRequestStruct=r.FilterAccountChainsResponseStruct=r.FilterAccountChainsStruct=r.CreateAccountResponseStruct=r.CreateAccountRequestStruct=r.GetAccountResponseStruct=r.GetAccountRequestStruct=r.ListAccountsResponseStruct=r.ListAccountsRequestStruct=void 0;const n=e("@metamask/utils"),s=e("superstruct"),i=e("../api"),o=e("../utils"),a={jsonrpc:(0,s.literal)("2.0"),id:o.UuidStruct};r.ListAccountsRequestStruct=(0,s.object)({...a,method:(0,s.literal)("keyring_listAccounts")}),r.ListAccountsResponseStruct=(0,s.array)(i.KeyringAccountStruct),r.GetAccountRequestStruct=(0,s.object)({...a,method:(0,s.literal)("keyring_getAccount"),params:(0,s.object)({id:(0,s.string)()})}),r.GetAccountResponseStruct=i.KeyringAccountStruct,r.CreateAccountRequestStruct=(0,s.object)({...a,method:(0,s.literal)("keyring_createAccount"),params:(0,s.object)({options:(0,s.record)((0,s.string)(),n.JsonStruct)})}),r.CreateAccountResponseStruct=i.KeyringAccountStruct,r.FilterAccountChainsStruct=(0,s.object)({...a,method:(0,s.literal)("keyring_filterAccountChains"),params:(0,s.object)({id:(0,s.string)(),chains:(0,s.array)((0,s.string)())})}),r.FilterAccountChainsResponseStruct=(0,s.array)((0,s.string)()),r.UpdateAccountRequestStruct=(0,s.object)({...a,method:(0,s.literal)("keyring_updateAccount"),params:(0,s.object)({account:i.KeyringAccountStruct})}),r.UpdateAccountResponseStruct=(0,s.literal)(null),r.DeleteAccountRequestStruct=(0,s.object)({...a,method:(0,s.literal)("keyring_deleteAccount"),params:(0,s.object)({id:(0,s.string)()})}),r.DeleteAccountResponseStruct=(0,s.literal)(null),r.ExportAccountRequestStruct=(0,s.object)({...a,method:(0,s.literal)("keyring_exportAccount"),params:(0,s.object)({id:(0,s.string)()})}),r.ExportAccountResponseStruct=i.KeyringAccountDataStruct,r.ListRequestsRequestStruct=(0,s.object)({...a,method:(0,s.literal)("keyring_listRequests")}),r.ListRequestsResponseStruct=(0,s.array)(i.KeyringRequestStruct),r.GetRequestRequestStruct=(0,s.object)({...a,method:(0,s.literal)("keyring_getRequest"),params:(0,s.object)({id:(0,s.string)()})}),r.GetRequestResponseStruct=i.KeyringRequestStruct,r.SubmitRequestRequestStruct=(0,s.object)({...a,method:(0,s.literal)("keyring_submitRequest"),params:i.KeyringRequestStruct}),r.SubmitRequestResponseStruct=i.KeyringResponseStruct,r.ApproveRequestRequestStruct=(0,s.object)({...a,method:(0,s.literal)("keyring_approveRequest"),params:(0,s.object)({id:(0,s.string)(),data:(0,s.record)((0,s.string)(),n.JsonStruct)})}),r.ApproveRequestResponseStruct=(0,s.literal)(null),r.RejectRequestRequestStruct=(0,s.object)({...a,method:(0,s.literal)("keyring_rejectRequest"),params:(0,s.object)({id:(0,s.string)()})}),r.RejectRequestResponseStruct=(0,s.literal)(null)}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/internal/api.js"}],[1263,{"../api":1259,"../events":1260,"../utils":1269,"@metamask/utils":1786,superstruct:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.RequestRejectedEventStruct=r.RequestApprovedEventStruct=r.AccountDeletedEventStruct=r.AccountUpdatedEventStruct=r.AccountCreatedEventStruct=void 0;const n=e("@metamask/utils"),s=e("superstruct"),i=e("../api"),o=e("../events"),a=e("../utils");r.AccountCreatedEventStruct=(0,s.object)({method:(0,s.literal)(`${o.KeyringEvent.AccountCreated}`),params:(0,s.object)({account:i.KeyringAccountStruct})}),r.AccountUpdatedEventStruct=(0,s.object)({method:(0,s.literal)(`${o.KeyringEvent.AccountUpdated}`),params:(0,s.object)({account:i.KeyringAccountStruct})}),r.AccountDeletedEventStruct=(0,s.object)({method:(0,s.literal)(`${o.KeyringEvent.AccountDeleted}`),params:(0,s.object)({id:a.UuidStruct})}),r.RequestApprovedEventStruct=(0,s.object)({method:(0,s.literal)(`${o.KeyringEvent.RequestApproved}`),params:(0,s.object)({id:a.UuidStruct,result:n.JsonStruct})}),r.RequestRejectedEventStruct=(0,s.object)({method:(0,s.literal)(`${o.KeyringEvent.RequestRejected}`),params:(0,s.object)({id:a.UuidStruct})})}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/internal/events.js"}],[1264,{"./api":1262,"./events":1263,"./types":1265},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./api"),r),s(e("./events"),r),s(e("./types"),r)}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/internal/index.js"}],[1265,{"../api":1259,"../superstruct":1268,superstruct:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.InternalAccountStruct=void 0;const n=e("superstruct"),s=e("../api"),i=e("../superstruct");r.InternalAccountStruct=(0,i.object)({...s.KeyringAccountStruct.schema,metadata:(0,i.object)({name:(0,n.string)(),snap:(0,i.exactOptional)((0,i.object)({id:(0,n.string)(),enabled:(0,n.boolean)(),name:(0,n.string)()})),lastSelected:(0,i.exactOptional)((0,n.number)()),keyring:(0,i.object)({type:(0,n.string)()})})})}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/internal/types.js"}],[1266,{"./JsonRpcRequest":1255,"./internal/api":1262,superstruct:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isKeyringRpcMethod=r.handleKeyringRequest=r.KeyringRpcMethod=r.MethodNotSupportedError=void 0;const n=e("superstruct"),s=e("./internal/api"),i=e("./JsonRpcRequest");class o extends Error{constructor(e){super(`Method not supported: ${e}`)}}var a;r.MethodNotSupportedError=o,function(e){e.ListAccounts="keyring_listAccounts",e.GetAccount="keyring_getAccount",e.CreateAccount="keyring_createAccount",e.FilterAccountChains="keyring_filterAccountChains",e.UpdateAccount="keyring_updateAccount",e.DeleteAccount="keyring_deleteAccount",e.ExportAccount="keyring_exportAccount",e.ListRequests="keyring_listRequests",e.GetRequest="keyring_getRequest",e.SubmitRequest="keyring_submitRequest",e.ApproveRequest="keyring_approveRequest",e.RejectRequest="keyring_rejectRequest"}(a=r.KeyringRpcMethod||(r.KeyringRpcMethod={})),r.handleKeyringRequest=async function(e,t){switch((0,n.assert)(t,i.JsonRpcRequestStruct),t.method){case a.ListAccounts:return(0,n.assert)(t,s.ListAccountsRequestStruct),e.listAccounts();case a.GetAccount:return(0,n.assert)(t,s.GetAccountRequestStruct),e.getAccount(t.params.id);case a.CreateAccount:return(0,n.assert)(t,s.CreateAccountRequestStruct),e.createAccount(t.params.options);case a.FilterAccountChains:return(0,n.assert)(t,s.FilterAccountChainsStruct),e.filterAccountChains(t.params.id,t.params.chains);case a.UpdateAccount:return(0,n.assert)(t,s.UpdateAccountRequestStruct),e.updateAccount(t.params.account);case a.DeleteAccount:return(0,n.assert)(t,s.DeleteAccountRequestStruct),e.deleteAccount(t.params.id);case a.ExportAccount:if(e.exportAccount===undefined)throw new o(t.method);return(0,n.assert)(t,s.ExportAccountRequestStruct),e.exportAccount(t.params.id);case a.ListRequests:if(e.listRequests===undefined)throw new o(t.method);return(0,n.assert)(t,s.ListRequestsRequestStruct),e.listRequests();case a.GetRequest:if(e.getRequest===undefined)throw new o(t.method);return(0,n.assert)(t,s.GetRequestRequestStruct),e.getRequest(t.params.id);case a.SubmitRequest:return(0,n.assert)(t,s.SubmitRequestRequestStruct),e.submitRequest(t.params);case a.ApproveRequest:if(e.approveRequest===undefined)throw new o(t.method);return(0,n.assert)(t,s.ApproveRequestRequestStruct),e.approveRequest(t.params.id,t.params.data);case a.RejectRequest:if(e.rejectRequest===undefined)throw new o(t.method);return(0,n.assert)(t,s.RejectRequestRequestStruct),e.rejectRequest(t.params.id);default:throw new o(t.method)}},r.isKeyringRpcMethod=function(e){return Object.values(a).includes(e)}}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/rpc-handler.js"}],[1267,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.emitSnapKeyringEvent=void 0,r.emitSnapKeyringEvent=async function(e,t,r){await e.request({method:"snap_manageAccounts",params:{method:t,params:{...r}}})}}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/snap-utils.js"}],[1268,{superstruct:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.exactOptional=r.object=void 0;const n=e("superstruct");function s(e){return e.path[e.path.length-1]in e.branch[e.branch.length-2]}r.object=function(e){return(0,n.object)(e)},r.exactOptional=function(e){return new n.Struct({...e,validator:(t,r)=>!s(r)||e.validator(t,r),refiner:(t,r)=>!s(r)||e.refiner(t,r)})}}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/superstruct.js"}],[1269,{superstruct:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.strictMask=r.UuidStruct=void 0;const n=e("superstruct");r.UuidStruct=(0,n.pattern)((0,n.string)(),/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/iu),r.strictMask=function(e,t,r){return(0,n.assert)(e,t,r),e}}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/utils.js"}],[127,{lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:42,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=42;const r=t.data;return t.data=function(e){e.AppStateController?e.AppStateController.connectedStatusPopoverHasBeenShown=!1:e.AppStateController={connectedStatusPopoverHasBeenShown:!1};return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/042.js"}],[1270,{"./nil.js":1273,"./parse.js":1274,"./stringify.js":1278,"./v1.js":1279,"./v3.js":1280,"./v4.js":1282,"./v5.js":1283,"./validate.js":1284,"./version.js":1285},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NIL",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"parse",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"v1",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"v3",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"v4",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"v5",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"validate",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"version",{enumerable:!0,get:function(){return c.default}});var n=h(e("./v1.js")),s=h(e("./v3.js")),i=h(e("./v4.js")),o=h(e("./v5.js")),a=h(e("./nil.js")),c=h(e("./version.js")),u=h(e("./validate.js")),l=h(e("./stringify.js")),d=h(e("./parse.js"));function h(e){return e&&e.__esModule?e:{default:e}}}}},{package:"@metamask/keyring-api>uuid",file:"node_modules/@metamask/keyring-api/node_modules/uuid/dist/index.js"}],[1271,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return 14+(e+64>>>9<<4)+1}function s(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function i(e,t,r,n,i,o){return s((a=s(s(t,e),s(n,o)))<<(c=i)|a>>>32-c,r);var a,c}function o(e,t,r,n,s,o,a){return i(t&r|~t&n,e,t,s,o,a)}function a(e,t,r,n,s,o,a){return i(t&n|r&~n,e,t,s,o,a)}function c(e,t,r,n,s,o,a){return i(t^r^n,e,t,s,o,a)}function u(e,t,r,n,s,o,a){return i(r^(t|~n),e,t,s,o,a)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){const t=[],r=32*e.length,n="0123456789abcdef";for(let s=0;s<r;s+=8){const r=e[s>>5]>>>s%32&255,i=parseInt(n.charAt(r>>>4&15)+n.charAt(15&r),16);t.push(i)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[n(t)-1]=t;let r=1732584193,i=-271733879,l=-1732584194,d=271733878;for(let t=0;t<e.length;t+=16){const n=r,h=i,f=l,p=d;r=o(r,i,l,d,e[t],7,-680876936),d=o(d,r,i,l,e[t+1],12,-389564586),l=o(l,d,r,i,e[t+2],17,606105819),i=o(i,l,d,r,e[t+3],22,-1044525330),r=o(r,i,l,d,e[t+4],7,-176418897),d=o(d,r,i,l,e[t+5],12,1200080426),l=o(l,d,r,i,e[t+6],17,-1473231341),i=o(i,l,d,r,e[t+7],22,-45705983),r=o(r,i,l,d,e[t+8],7,1770035416),d=o(d,r,i,l,e[t+9],12,-1958414417),l=o(l,d,r,i,e[t+10],17,-42063),i=o(i,l,d,r,e[t+11],22,-1990404162),r=o(r,i,l,d,e[t+12],7,1804603682),d=o(d,r,i,l,e[t+13],12,-40341101),l=o(l,d,r,i,e[t+14],17,-1502002290),i=o(i,l,d,r,e[t+15],22,1236535329),r=a(r,i,l,d,e[t+1],5,-165796510),d=a(d,r,i,l,e[t+6],9,-1069501632),l=a(l,d,r,i,e[t+11],14,643717713),i=a(i,l,d,r,e[t],20,-373897302),r=a(r,i,l,d,e[t+5],5,-701558691),d=a(d,r,i,l,e[t+10],9,38016083),l=a(l,d,r,i,e[t+15],14,-660478335),i=a(i,l,d,r,e[t+4],20,-405537848),r=a(r,i,l,d,e[t+9],5,568446438),d=a(d,r,i,l,e[t+14],9,-1019803690),l=a(l,d,r,i,e[t+3],14,-187363961),i=a(i,l,d,r,e[t+8],20,1163531501),r=a(r,i,l,d,e[t+13],5,-1444681467),d=a(d,r,i,l,e[t+2],9,-51403784),l=a(l,d,r,i,e[t+7],14,1735328473),i=a(i,l,d,r,e[t+12],20,-1926607734),r=c(r,i,l,d,e[t+5],4,-378558),d=c(d,r,i,l,e[t+8],11,-2022574463),l=c(l,d,r,i,e[t+11],16,1839030562),i=c(i,l,d,r,e[t+14],23,-35309556),r=c(r,i,l,d,e[t+1],4,-1530992060),d=c(d,r,i,l,e[t+4],11,1272893353),l=c(l,d,r,i,e[t+7],16,-155497632),i=c(i,l,d,r,e[t+10],23,-1094730640),r=c(r,i,l,d,e[t+13],4,681279174),d=c(d,r,i,l,e[t],11,-358537222),l=c(l,d,r,i,e[t+3],16,-722521979),i=c(i,l,d,r,e[t+6],23,76029189),r=c(r,i,l,d,e[t+9],4,-640364487),d=c(d,r,i,l,e[t+12],11,-421815835),l=c(l,d,r,i,e[t+15],16,530742520),i=c(i,l,d,r,e[t+2],23,-995338651),r=u(r,i,l,d,e[t],6,-198630844),d=u(d,r,i,l,e[t+7],10,1126891415),l=u(l,d,r,i,e[t+14],15,-1416354905),i=u(i,l,d,r,e[t+5],21,-57434055),r=u(r,i,l,d,e[t+12],6,1700485571),d=u(d,r,i,l,e[t+3],10,-1894986606),l=u(l,d,r,i,e[t+10],15,-1051523),i=u(i,l,d,r,e[t+1],21,-2054922799),r=u(r,i,l,d,e[t+8],6,1873313359),d=u(d,r,i,l,e[t+15],10,-30611744),l=u(l,d,r,i,e[t+6],15,-1560198380),i=u(i,l,d,r,e[t+13],21,1309151649),r=u(r,i,l,d,e[t+4],6,-145523070),d=u(d,r,i,l,e[t+11],10,-1120210379),l=u(l,d,r,i,e[t+2],15,718787259),i=u(i,l,d,r,e[t+9],21,-343485551),r=s(r,n),i=s(i,h),l=s(l,f),d=s(d,p)}return[r,i,l,d]}(function(e){if(0===e.length)return[];const t=8*e.length,r=new Uint32Array(n(t));for(let n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))};r.default=l}}},{package:"@metamask/keyring-api>uuid",file:"node_modules/@metamask/keyring-api/node_modules/uuid/dist/md5-browser.js"}],[1272,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};r.default=n}}},{package:"@metamask/keyring-api>uuid",file:"node_modules/@metamask/keyring-api/node_modules/uuid/dist/native-browser.js"}],[1273,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default="00000000-0000-0000-0000-000000000000"}}},{package:"@metamask/keyring-api>uuid",file:"node_modules/@metamask/keyring-api/node_modules/uuid/dist/nil.js"}],[1274,{"./validate.js":1284},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("./validate.js"))&&n.__esModule?n:{default:n};var i=function(e){if(!(0,s.default)(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};r.default=i}}},{package:"@metamask/keyring-api>uuid",file:"node_modules/@metamask/keyring-api/node_modules/uuid/dist/parse.js"}],[1275,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i}}},{package:"@metamask/keyring-api>uuid",file:"node_modules/@metamask/keyring-api/node_modules/uuid/dist/regex.js"}],[1276,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){let n;Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){if(!n&&(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(s)};const s=new Uint8Array(16)}}},{package:"@metamask/keyring-api>uuid",file:"node_modules/@metamask/keyring-api/node_modules/uuid/dist/rng-browser.js"}],[1277,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function s(e,t){return e<<t|e>>>32-t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=function(e){const t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const i=e.length/4+2,o=Math.ceil(i/16),a=new Array(o);for(let t=0;t<o;++t){const r=new Uint32Array(16);for(let n=0;n<16;++n)r[n]=e[64*t+4*n]<<24|e[64*t+4*n+1]<<16|e[64*t+4*n+2]<<8|e[64*t+4*n+3];a[t]=r}a[o-1][14]=8*(e.length-1)/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<o;++e){const i=new Uint32Array(80);for(let t=0;t<16;++t)i[t]=a[e][t];for(let e=16;e<80;++e)i[e]=s(i[e-3]^i[e-8]^i[e-14]^i[e-16],1);let o=r[0],c=r[1],u=r[2],l=r[3],d=r[4];for(let e=0;e<80;++e){const r=Math.floor(e/20),a=s(o,5)+n(r,c,u,l)+d+t[r]+i[e]>>>0;d=l,l=u,u=s(c,30)>>>0,c=o,o=a}r[0]=r[0]+o>>>0,r[1]=r[1]+c>>>0,r[2]=r[2]+u>>>0,r[3]=r[3]+l>>>0,r[4]=r[4]+d>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]};r.default=i}}},{package:"@metamask/keyring-api>uuid",file:"node_modules/@metamask/keyring-api/node_modules/uuid/dist/sha1-browser.js"}],[1278,{"./validate.js":1284},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.unsafeStringify=o;var n,s=(n=e("./validate.js"))&&n.__esModule?n:{default:n};const i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));function o(e,t=0){return(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase()}var a=function(e,t=0){const r=o(e,t);if(!(0,s.default)(r))throw TypeError("Stringified UUID is invalid");return r};r.default=a}}},{package:"@metamask/keyring-api>uuid",file:"node_modules/@metamask/keyring-api/node_modules/uuid/dist/stringify.js"}],[1279,{"./rng.js":1276,"./stringify.js":1278},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("./rng.js"))&&n.__esModule?n:{default:n},i=e("./stringify.js");let o,a,c=0,u=0;var l=function(e,t,r){let n=t&&r||0;const l=t||new Array(16);let d=(e=e||{}).node||o,h=e.clockseq!==undefined?e.clockseq:a;if(null==d||null==h){const t=e.random||(e.rng||s.default)();null==d&&(d=o=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==h&&(h=a=16383&(t[6]<<8|t[7]))}let f=e.msecs!==undefined?e.msecs:Date.now(),p=e.nsecs!==undefined?e.nsecs:u+1;const m=f-c+(p-u)/1e4;if(m<0&&e.clockseq===undefined&&(h=h+1&16383),(m<0||f>c)&&e.nsecs===undefined&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=f,u=p,a=h,f+=122192928e5;const g=(1e4*(268435455&f)+p)%4294967296;l[n++]=g>>>24&255,l[n++]=g>>>16&255,l[n++]=g>>>8&255,l[n++]=255&g;const y=f/4294967296*1e4&268435455;l[n++]=y>>>8&255,l[n++]=255&y,l[n++]=y>>>24&15|16,l[n++]=y>>>16&255,l[n++]=h>>>8|128,l[n++]=255&h;for(let e=0;e<6;++e)l[n+e]=d[e];return t||(0,i.unsafeStringify)(l)};r.default=l}}},{package:"@metamask/keyring-api>uuid",file:"node_modules/@metamask/keyring-api/node_modules/uuid/dist/v1.js"}],[128,{lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:43,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=43;const r=t.data;return t.data=function(e){var t;null!=e&&null!==(t=e.PreferencesController)&&void 0!==t&&t.currentAccountTab&&delete e.PreferencesController.currentAccountTab;return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/043.js"}],[1280,{"./md5.js":1271,"./v35.js":1281},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("./v35.js")),s=i(e("./md5.js"));function i(e){return e&&e.__esModule?e:{default:e}}var o=(0,n.default)("v3",48,s.default);r.default=o}}},{package:"@metamask/keyring-api>uuid",file:"node_modules/@metamask/keyring-api/node_modules/uuid/dist/v3.js"}],[1281,{"./parse.js":1274,"./stringify.js":1278},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.URL=r.DNS=void 0,r.default=function(e,t,r){function n(e,n,o,a){var c;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=(0,i.default)(n)),16!==(null===(c=n)||void 0===c?void 0:c.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+e.length);if(u.set(n),u.set(e,n.length),u=r(u),u[6]=15&u[6]|t,u[8]=63&u[8]|128,o){a=a||0;for(let e=0;e<16;++e)o[a+e]=u[e];return o}return(0,s.unsafeStringify)(u)}try{n.name=e}catch(e){}return n.DNS=o,n.URL=a,n};var n,s=e("./stringify.js"),i=(n=e("./parse.js"))&&n.__esModule?n:{default:n};const o="6ba7b810-9dad-11d1-80b4-00c04fd430c8";r.DNS=o;const a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";r.URL=a}}},{package:"@metamask/keyring-api>uuid",file:"node_modules/@metamask/keyring-api/node_modules/uuid/dist/v35.js"}],[1282,{"./native.js":1272,"./rng.js":1276,"./stringify.js":1278},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(e("./native.js")),s=o(e("./rng.js")),i=e("./stringify.js");function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e,t,r){if(n.default.randomUUID&&!t&&!e)return n.default.randomUUID();const o=(e=e||{}).random||(e.rng||s.default)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=o[e];return t}return(0,i.unsafeStringify)(o)};r.default=a}}},{package:"@metamask/keyring-api>uuid",file:"node_modules/@metamask/keyring-api/node_modules/uuid/dist/v4.js"}],[1283,{"./sha1.js":1277,"./v35.js":1281},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("./v35.js")),s=i(e("./sha1.js"));function i(e){return e&&e.__esModule?e:{default:e}}var o=(0,n.default)("v5",80,s.default);r.default=o}}},{package:"@metamask/keyring-api>uuid",file:"node_modules/@metamask/keyring-api/node_modules/uuid/dist/v5.js"}],[1284,{"./regex.js":1275},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("./regex.js"))&&n.__esModule?n:{default:n};var i=function(e){return"string"==typeof e&&s.default.test(e)};r.default=i}}},{package:"@metamask/keyring-api>uuid",file:"node_modules/@metamask/keyring-api/node_modules/uuid/dist/validate.js"}],[1285,{"./validate.js":1284},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("./validate.js"))&&n.__esModule?n:{default:n};var i=function(e){if(!(0,s.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)};r.default=i}}},{package:"@metamask/keyring-api>uuid",file:"node_modules/@metamask/keyring-api/node_modules/uuid/dist/version.js"}],[1286,{"@metamask/base-controller":1291,"@metamask/eth-keyring-controller":1115,"@metamask/utils":1786,"async-mutex":2332,"ethereumjs-util":2816,"ethereumjs-wallet":2826},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,o,a,c,u,l,d,h,f,p=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),m=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),g=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&p(t,e,r);return m(t,e),t},y=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},w=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},v=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.KeyringController=r.SignTypedDataVersion=r.AccountImportStrategy=r.KeyringTypes=void 0;const b=e("@metamask/base-controller"),k=e("@metamask/eth-keyring-controller"),_=e("@metamask/utils"),S=e("async-mutex"),T=e("ethereumjs-util"),E=g(e("ethereumjs-wallet")),A="KeyringController";var j,C;!function(e){e.simple="Simple Key Pair",e.hd="HD Key Tree",e.qr="QR Hardware Wallet Device",e.trezor="Trezor Hardware",e.ledger="Ledger Hardware",e.lattice="Lattice Hardware",e.snap="Snap Keyring",e.custody="Custody"}(j=r.KeyringTypes||(r.KeyringTypes={})),function(e){e.privateKey="privateKey",e.json="json"}(r.AccountImportStrategy||(r.AccountImportStrategy={})),function(e){e.V1="V1",e.V3="V3",e.V4="V4"}(C=r.SignTypedDataVersion||(r.SignTypedDataVersion={}));const P={isUnlocked:!1,keyrings:[]};function M(e){if(!((0,_.hasProperty)(e,"mnemonic")&&e.mnemonic instanceof Uint8Array))throw new Error("Can't get mnemonic bytes from keyring")}class O extends b.BaseControllerV2{constructor(e){var t;const{syncIdentities:r,updateIdentities:a,setSelectedAddress:c,setAccountLabel:u,keyringBuilders:f,messenger:p,state:m}=e;super({name:A,metadata:{vault:{persist:!0,anonymous:!1},isUnlocked:{persist:!1,anonymous:!0},keyrings:{persist:!1,anonymous:!1},encryptionKey:{persist:!1,anonymous:!1},encryptionSalt:{persist:!1,anonymous:!1}},messenger:p,state:Object.assign(Object.assign({},P),m)}),n.add(this),this.mutex=new S.Mutex,s.set(this,void 0),i.set(this,void 0),e.cacheEncryptionKey?w(this,s,new k.KeyringController({initState:m,encryptor:e.encryptor,keyringBuilders:f,cacheEncryptionKey:e.cacheEncryptionKey}),"f"):w(this,s,new k.KeyringController({initState:m,encryptor:e.encryptor,keyringBuilders:f,cacheEncryptionKey:null!==(t=e.cacheEncryptionKey)&&void 0!==t&&t}),"f"),v(this,s,"f").memStore.subscribe(v(this,n,"m",l).bind(this)),v(this,s,"f").store.subscribe(v(this,n,"m",l).bind(this)),v(this,s,"f").on("lock",v(this,n,"m",d).bind(this)),v(this,s,"f").on("unlock",v(this,n,"m",h).bind(this)),this.syncIdentities=r,this.updateIdentities=a,this.setSelectedAddress=c,this.setAccountLabel=u,v(this,n,"m",o).call(this)}addNewAccount(e){return y(this,void 0,void 0,(function*(){const t=v(this,s,"f").getKeyringsByType("HD Key Tree")[0];if(!t)throw new Error("No HD keyring found");const r=yield v(this,s,"f").getAccounts();if(e&&r.length!==e){if(e>r.length)throw new Error("Account out of sequence");const s=yield t.getAccounts();return{keyringState:v(this,n,"m",f).call(this),addedAccountAddress:s[e]}}yield v(this,s,"f").addNewAccount(t);const i=yield v(this,s,"f").getAccounts();yield this.verifySeedPhrase(),this.updateIdentities(i);const o=i.find((e=>!r.includes(e)));return(0,_.assertIsStrictHexString)(o),{keyringState:v(this,n,"m",f).call(this),addedAccountAddress:o}}))}addNewAccountForKeyring(e,t){return y(this,void 0,void 0,(function*(){const r=yield this.getAccounts();if(t&&r.length!==t){if(t>r.length)throw new Error("Account out of sequence");const e=r[t];return(0,_.assertIsStrictHexString)(e),e}yield v(this,s,"f").addNewAccount(e);const n=(yield this.getAccounts()).find((e=>!r.includes(e)));return(0,_.assertIsStrictHexString)(n),this.updateIdentities(yield v(this,s,"f").getAccounts()),n}))}addNewAccountWithoutUpdate(){return y(this,void 0,void 0,(function*(){const e=v(this,s,"f").getKeyringsByType("HD Key Tree")[0];if(!e)throw new Error("No HD keyring found");return yield v(this,s,"f").addNewAccount(e),yield this.verifySeedPhrase(),v(this,n,"m",f).call(this)}))}createNewVaultAndRestore(e,t){return y(this,void 0,void 0,(function*(){const r=yield this.mutex.acquire();if(!e||!e.length)throw new Error("Invalid password");try{return this.updateIdentities([]),yield v(this,s,"f").createNewVaultAndRestore(e,t),this.updateIdentities(yield v(this,s,"f").getAccounts()),v(this,n,"m",f).call(this)}finally{r()}}))}createNewVaultAndKeychain(e){return y(this,void 0,void 0,(function*(){const t=yield this.mutex.acquire();try{return(yield this.getAccounts()).length||(yield v(this,s,"f").createNewVaultAndKeychain(e),this.updateIdentities(yield this.getAccounts())),v(this,n,"m",f).call(this)}finally{t()}}))}addNewKeyring(e,t){return y(this,void 0,void 0,(function*(){return e===j.qr?this.getOrAddQRKeyring():v(this,s,"f").addNewKeyring(e,t)}))}verifyPassword(e){return y(this,void 0,void 0,(function*(){yield v(this,s,"f").verifyPassword(e)}))}isUnlocked(){return this.state.isUnlocked}exportSeedPhrase(e){return y(this,void 0,void 0,(function*(){return yield this.verifyPassword(e),M(v(this,s,"f").keyrings[0]),v(this,s,"f").keyrings[0].mnemonic}))}exportAccount(e,t){return y(this,void 0,void 0,(function*(){return yield this.verifyPassword(e),v(this,s,"f").exportAccount(t)}))}getAccounts(){return v(this,s,"f").getAccounts()}getEncryptionPublicKey(e,t){return y(this,void 0,void 0,(function*(){return v(this,s,"f").getEncryptionPublicKey(e,t)}))}decryptMessage(e){return y(this,void 0,void 0,(function*(){return v(this,s,"f").decryptMessage(e)}))}getKeyringForAccount(e){return y(this,void 0,void 0,(function*(){return v(this,s,"f").getKeyringForAccount(e)}))}getKeyringsByType(e){return v(this,s,"f").getKeyringsByType(e)}persistAllKeyrings(){return y(this,void 0,void 0,(function*(){return v(this,s,"f").persistAllKeyrings()}))}importAccountWithStrategy(e,t){return y(this,void 0,void 0,(function*(){let r;switch(e){case"privateKey":const[n]=t;if(!n)throw new Error("Cannot import an empty key.");const s=(0,T.addHexPrefix)(n);let i;try{i=(0,T.toBuffer)(s)}catch(e){throw new Error("Cannot import invalid private key.")}if(!(0,T.isValidPrivate)(i)||66!==(0,T.getBinarySize)(s))throw new Error("Cannot import invalid private key.");r=(0,T.stripHexPrefix)(s);break;case"json":let o;const[a,c]=t;try{o=E.thirdparty.fromEtherWallet(a,c)}catch(e){o=o||(yield E.default.fromV3(a,c,!0))}r=(0,T.bufferToHex)(o.getPrivateKey());break;default:throw new Error(`Unexpected import strategy: '${e}'`)}const i=yield v(this,s,"f").addNewKeyring(j.simple,[r]),o=yield i.getAccounts(),a=yield v(this,s,"f").getAccounts();return this.updateIdentities(a),{keyringState:v(this,n,"m",f).call(this),importedAccountAddress:o[0]}}))}removeAccount(e){return y(this,void 0,void 0,(function*(){return yield v(this,s,"f").removeAccount(e),this.messagingSystem.publish(`${A}:accountRemoved`,e),v(this,n,"m",f).call(this)}))}setLocked(){return y(this,void 0,void 0,(function*(){return v(this,n,"m",u).call(this),yield v(this,s,"f").setLocked(),v(this,n,"m",f).call(this)}))}signMessage(e){if(!e.data)throw new Error("Can't sign an empty message");return v(this,s,"f").signMessage(e)}signPersonalMessage(e){return v(this,s,"f").signPersonalMessage(e)}signTypedMessage(e,t){return y(this,void 0,void 0,(function*(){try{if(![C.V1,C.V3,C.V4].includes(t))throw new Error(`Unexpected signTypedMessage version: '${t}'`);return yield v(this,s,"f").signTypedMessage({from:e.from,data:t!==C.V1&&"string"==typeof e.data?JSON.parse(e.data):e.data},{version:t})}catch(e){throw new Error(`Keyring Controller signTypedMessage: ${e}`)}}))}signTransaction(e,t,r){return v(this,s,"f").signTransaction(e,t,r)}submitEncryptionKey(e,t){return y(this,void 0,void 0,(function*(){yield v(this,s,"f").submitEncryptionKey(e,t);const r=this.getQRKeyring();return r&&v(this,n,"m",c).call(this,r),v(this,n,"m",f).call(this)}))}submitPassword(e){return y(this,void 0,void 0,(function*(){yield v(this,s,"f").submitPassword(e);const t=yield v(this,s,"f").getAccounts(),r=this.getQRKeyring();return r&&v(this,n,"m",c).call(this,r),yield this.syncIdentities(t),v(this,n,"m",f).call(this)}))}verifySeedPhrase(){return y(this,void 0,void 0,(function*(){const e=v(this,s,"f").getKeyringsByType(j.hd)[0];if(!e)throw new Error("No HD keyring found.");M(e);const t=e.mnemonic,r=yield e.getAccounts();if(0===r.length)throw new Error("Cannot verify an empty keyring.");const n=v(this,s,"f").getKeyringBuilderForType(j.hd)();n.deserialize({mnemonic:t,numberOfAccounts:r.length});const i=yield n.getAccounts();if(i.length!==r.length)throw new Error("Seed phrase imported incorrect number of accounts.");i.forEach(((e,t)=>{if(e.toLowerCase()!==r[t].toLowerCase())throw new Error("Seed phrase imported different accounts.")}))}))}getQRKeyring(){return v(this,s,"f").getKeyringsByType(j.qr)[0]}getOrAddQRKeyring(){return y(this,void 0,void 0,(function*(){return this.getQRKeyring()||(yield v(this,n,"m",a).call(this))}))}restoreQRKeyring(e){return y(this,void 0,void 0,(function*(){(yield this.getOrAddQRKeyring()).deserialize(e),yield v(this,s,"f").persistAllKeyrings(),this.updateIdentities(yield v(this,s,"f").getAccounts())}))}resetQRKeyringState(){return y(this,void 0,void 0,(function*(){(yield this.getOrAddQRKeyring()).resetStore()}))}getQRKeyringState(){return y(this,void 0,void 0,(function*(){return(yield this.getOrAddQRKeyring()).getMemStore()}))}submitQRCryptoHDKey(e){return y(this,void 0,void 0,(function*(){(yield this.getOrAddQRKeyring()).submitCryptoHDKey(e)}))}submitQRCryptoAccount(e){return y(this,void 0,void 0,(function*(){(yield this.getOrAddQRKeyring()).submitCryptoAccount(e)}))}submitQRSignature(e,t){return y(this,void 0,void 0,(function*(){(yield this.getOrAddQRKeyring()).submitSignature(e,t)}))}cancelQRSignRequest(){return y(this,void 0,void 0,(function*(){(yield this.getOrAddQRKeyring()).cancelSignRequest()}))}cancelQRSynchronization(){return y(this,void 0,void 0,(function*(){(yield this.getOrAddQRKeyring()).cancelSync()}))}connectQRHardware(e){return y(this,void 0,void 0,(function*(){try{const t=yield this.getOrAddQRKeyring();let r;switch(e){case-1:r=yield t.getPreviousPage();break;case 1:r=yield t.getNextPage();break;default:r=yield t.getFirstPage()}return r.map((e=>Object.assign(Object.assign({},e),{balance:"0x0"})))}catch(e){throw new Error(`Unspecified error when connect QR Hardware, ${e}`)}}))}unlockQRHardwareWalletAccount(e){return y(this,void 0,void 0,(function*(){const t=yield this.getOrAddQRKeyring();t.setAccountToUnlock(e);const r=yield v(this,s,"f").getAccounts();yield v(this,s,"f").addNewAccount(t);const n=yield v(this,s,"f").getAccounts();this.updateIdentities(n),n.forEach((n=>{r.includes(n)||(this.setAccountLabel&&this.setAccountLabel(n,`${t.getName()} ${e}`),this.setSelectedAddress(n))})),yield v(this,s,"f").persistAllKeyrings()}))}getAccountKeyringType(e){return y(this,void 0,void 0,(function*(){return(yield v(this,s,"f").getKeyringForAccount(e)).type}))}forgetQRDevice(){return y(this,void 0,void 0,(function*(){(yield this.getOrAddQRKeyring()).forgetDevice();(yield v(this,s,"f").getAccounts()).forEach((e=>{this.setSelectedAddress(e)})),yield v(this,s,"f").persistAllKeyrings()}))}}r.KeyringController=O,s=new WeakMap,i=new WeakMap,n=new WeakSet,o=function(){this.messagingSystem.registerActionHandler(`${A}:signMessage`,this.signMessage.bind(this)),this.messagingSystem.registerActionHandler(`${A}:signPersonalMessage`,this.signPersonalMessage.bind(this)),this.messagingSystem.registerActionHandler(`${A}:signTypedMessage`,this.signTypedMessage.bind(this)),this.messagingSystem.registerActionHandler(`${A}:decryptMessage`,this.decryptMessage.bind(this)),this.messagingSystem.registerActionHandler(`${A}:getEncryptionPublicKey`,this.getEncryptionPublicKey.bind(this)),this.messagingSystem.registerActionHandler(`${A}:getAccounts`,this.getAccounts.bind(this)),this.messagingSystem.registerActionHandler(`${A}:getKeyringsByType`,this.getKeyringsByType.bind(this)),this.messagingSystem.registerActionHandler(`${A}:getKeyringForAccount`,this.getKeyringForAccount.bind(this)),this.messagingSystem.registerActionHandler(`${A}:persistAllKeyrings`,this.persistAllKeyrings.bind(this))},a=function(){return y(this,void 0,void 0,(function*(){const e=yield v(this,s,"f").addNewKeyring(j.qr);return v(this,n,"m",c).call(this,e),e}))},c=function(e){w(this,i,(e=>{this.messagingSystem.publish(`${A}:qrKeyringStateChange`,e)}),"f"),e.getMemStore().subscribe(v(this,i,"f"))},u=function(){v(this,s,"f").getKeyringsByType(j.qr).forEach((e=>{v(this,i,"f")&&e.getMemStore().unsubscribe(v(this,i,"f"))}))},l=function(){const{vault:e}=v(this,s,"f").store.getState(),{keyrings:t,isUnlocked:r,encryptionKey:n,encryptionSalt:i}=v(this,s,"f").memStore.getState();this.update((()=>({vault:e,keyrings:t,isUnlocked:r,encryptionKey:n,encryptionSalt:i})))},d=function(){this.messagingSystem.publish(`${A}:lock`)},h=function(){this.messagingSystem.publish(`${A}:unlock`)},f=function(){return{isUnlocked:this.state.isUnlocked,keyrings:this.state.keyrings}},r.default=O}}},{package:"@metamask/keyring-controller",file:"node_modules/@metamask/keyring-controller/dist/KeyringController.js"}],[1287,{"./KeyringController":1286},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./KeyringController"),r)}}},{package:"@metamask/keyring-controller",file:"node_modules/@metamask/keyring-controller/dist/index.js"}],[1288,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BaseController=void 0;class n{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e in this.internalConfig)void 0!==this.internalConfig[e]&&(this[e]=this.internalConfig[e])}else for(const t in e)void 0!==this.internalConfig[t]&&(this.internalConfig[t]=e[t],this[t]=e[t])}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}}r.BaseController=n,r.default=n}}},{package:"@metamask/keyring-controller>@metamask/base-controller",file:"node_modules/@metamask/keyring-controller/node_modules/@metamask/base-controller/dist/BaseController.js"}],[1289,{immer:3190},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseController=void 0;const n=e("immer");(0,n.enablePatches)();function s(e,t,r){return Object.keys(e).reduce(((n,s)=>{try{const i=t[s];if(!i)throw new Error(`No metadata found for '${s}'`);const o=i[r],a=e[s];return"function"==typeof o?n[s]=o(a):o&&(n[s]=a),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:n}){this.messagingSystem=e,this.name=r,this.internalState=n,this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state))}get state(){return this.internalState}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,s]=n.produceWithPatches(this.internalState,e);return this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:s}}applyPatches(e){const t=(0,n.applyPatches)(this.internalState,e);this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return s(e,t,"anonymous")},r.getPersistentState=function(e,t){return s(e,t,"persist")}}}},{package:"@metamask/keyring-controller>@metamask/base-controller",file:"node_modules/@metamask/keyring-controller/node_modules/@metamask/base-controller/dist/BaseControllerV2.js"}],[129,{lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:44,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=44;const r=t.data;return t.data=function(e){var t;void 0!==(null==e||null===(t=e.AppStateController)||void 0===t?void 0:t.mkrMigrationReminderTimestamp)&&delete e.AppStateController.mkrMigrationReminderTimestamp;return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/044.js"}],[1290,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ControllerMessenger=r.RestrictedControllerMessenger=void 0;class n{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:n}){this.controllerMessenger=e,this.controllerName=t,this.allowedActions=r||null,this.allowedEvents=n||null}registerActionHandler(e,t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed registering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.registerActionHandler(e,t)}unregisterActionHandler(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed unregistering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.unregisterActionHandler(e)}call(e,...t){if(null===this.allowedActions)throw new Error("No actions allowed");if(!this.allowedActions.includes(e))throw new Error(`Action missing from allow list: ${e}`);return this.controllerMessenger.call(e,...t)}publish(e,...t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed publishing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.publish(e,...t)}subscribe(e,t,r){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);return r?this.controllerMessenger.subscribe(e,t,r):this.controllerMessenger.subscribe(e,t)}unsubscribe(e,t){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);this.controllerMessenger.unsubscribe(e,t)}clearEventSubscriptions(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed clearing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.clearEventSubscriptions(e)}}r.RestrictedControllerMessenger=n;r.ControllerMessenger=class{constructor(){this.actions=new Map,this.events=new Map,this.eventPayloadCache=new Map}registerActionHandler(e,t){if(this.actions.has(e))throw new Error(`A handler for ${e} has already been registered`);this.actions.set(e,t)}unregisterActionHandler(e){this.actions.delete(e)}clearActions(){this.actions.clear()}call(e,...t){const r=this.actions.get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}publish(e,...t){const r=this.events.get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=this.eventPayloadCache.get(e),s=n(...t);s!==r&&(this.eventPayloadCache.set(e,s),e(s,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=this.events.get(e);n||(n=new Map,this.events.set(e,n)),n.set(t,r)}unsubscribe(e,t){const r=this.events.get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&this.eventPayloadCache.delete(t),r.delete(t)}clearEventSubscriptions(e){this.events.delete(e)}clearSubscriptions(){this.events.clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new n({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/keyring-controller>@metamask/base-controller",file:"node_modules/@metamask/keyring-controller/node_modules/@metamask/base-controller/dist/ControllerMessenger.js"}],[1291,{"./BaseController":1288,"./BaseControllerV2":1289,"./ControllerMessenger":1290},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseControllerV2=r.BaseController=void 0;var i=e("./BaseController");Object.defineProperty(r,"BaseController",{enumerable:!0,get:function(){return i.BaseController}});var o=e("./BaseControllerV2");Object.defineProperty(r,"BaseControllerV2",{enumerable:!0,get:function(){return o.BaseController}}),Object.defineProperty(r,"getAnonymizedState",{enumerable:!0,get:function(){return o.getAnonymizedState}}),Object.defineProperty(r,"getPersistentState",{enumerable:!0,get:function(){return o.getPersistentState}}),s(e("./ControllerMessenger"),r)}}},{package:"@metamask/keyring-controller>@metamask/base-controller",file:"node_modules/@metamask/keyring-controller/node_modules/@metamask/base-controller/dist/index.js"}],[1292,{"@metamask/base-controller":1301,uuid:4001},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.LoggingController=void 0;const o=e("@metamask/base-controller"),a=e("uuid"),c="LoggingController",u={logs:{persist:!0,anonymous:!1}},l={logs:{}};class d extends o.BaseControllerV2{constructor({messenger:e,state:t}){super({name:c,metadata:u,messenger:e,state:Object.assign(Object.assign({},l),t)}),n.add(this),this.messagingSystem.registerActionHandler(`${c}:add`,(e=>this.add(e)))}add(e){const t={id:i(this,n,"m",s).call(this),timestamp:Date.now(),log:e};this.update((e=>{e.logs[t.id]=t}))}clear(){this.update((e=>{e.logs={}}))}}r.LoggingController=d,n=new WeakSet,s=function(){let e=(0,a.v1)();for(;e in this.state.logs;)e=(0,a.v1)();return e}}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/LoggingController.js"}],[1293,{"./LoggingController":1292,"./logTypes":1297},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./LoggingController"),r),s(e("./logTypes"),r)}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/index.js"}],[1294,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SigningStage=r.SigningMethod=void 0,function(e){e.EthSign="eth_sign",e.PersonalSign="personal_sign",e.EthSignTypedData="eth_signTypedData",e.EthSignTypedDataV3="eth_signTypedData_v3",e.EthSignTypedDataV4="eth_signTypedData_v4"}(r.SigningMethod||(r.SigningMethod={})),function(e){e.Proposed="proposed",e.Rejected="rejected",e.Signed="signed"}(r.SigningStage||(r.SigningStage={}))}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/logTypes/EthSignLog.js"}],[1295,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/logTypes/GenericLog.js"}],[1296,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.LogType=void 0,function(e){e.GenericLog="GenericLog",e.EthSignLog="EthSignLog"}(r.LogType||(r.LogType={}))}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/logTypes/LogType.js"}],[1297,{"./EthSignLog":1294,"./GenericLog":1295,"./LogType":1296},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./EthSignLog"),r),s(e("./GenericLog"),r),s(e("./LogType"),r)}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/logTypes/index.js"}],[1298,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BaseController=void 0;class n{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e in this.internalConfig)void 0!==this.internalConfig[e]&&(this[e]=this.internalConfig[e])}else for(const t in e)void 0!==this.internalConfig[t]&&(this.internalConfig[t]=e[t],this[t]=e[t])}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}}r.BaseController=n,r.default=n}}},{package:"@metamask/logging-controller>@metamask/base-controller",file:"node_modules/@metamask/logging-controller/node_modules/@metamask/base-controller/dist/BaseController.js"}],[1299,{immer:3190},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseController=void 0;const n=e("immer");(0,n.enablePatches)();function s(e,t,r){return Object.keys(e).reduce(((n,s)=>{try{const i=t[s];if(!i)throw new Error(`No metadata found for '${s}'`);const o=i[r],a=e[s];return"function"==typeof o?n[s]=o(a):o&&(n[s]=a),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:n}){this.messagingSystem=e,this.name=r,this.internalState=n,this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state))}get state(){return this.internalState}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,s]=n.produceWithPatches(this.internalState,e);return this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:s}}applyPatches(e){const t=(0,n.applyPatches)(this.internalState,e);this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return s(e,t,"anonymous")},r.getPersistentState=function(e,t){return s(e,t,"persist")}}}},{package:"@metamask/logging-controller>@metamask/base-controller",file:"node_modules/@metamask/logging-controller/node_modules/@metamask/base-controller/dist/BaseControllerV2.js"}],[13,{"../../../../shared/constants/network":4064,"@ethersproject/providers":476,"ethereum-ens-network-map":2791},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=e("@ethersproject/providers"),i=(n=e("ethereum-ens-network-map"))&&n.__esModule?n:{default:n},o=e("../../../../shared/constants/network");r.default=class{static getChainEnsSupport(e){return Boolean(i.default[parseInt(e,16).toString()])}constructor({chainId:e,provider:t}={}){const r=o.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP[e],n=parseInt(e,16),a=i.default[n.toString()],c=new s.Web3Provider(t,{chainId:n,name:r,ensAddress:a});this._ethProvider=c}lookup(e){return this._ethProvider.resolveName(e)}reverse(e){return this._ethProvider.lookupAddress(e)}}}}},{package:"$root$",file:"app/scripts/controllers/ens/ens.js"}],[130,{lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:45,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=45;const r=t.data;return t.data=function(e){var t;s.includes(null==e||null===(t=e.PreferencesController)||void 0===t?void 0:t.ipfsGateway)&&(e.PreferencesController.ipfsGateway="dweb.link");return e}(r),t}};const s=["ipfs.io","ipfs.dweb.link"]}}},{package:"$root$",file:"app/scripts/migrations/045.js"}],[1300,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ControllerMessenger=r.RestrictedControllerMessenger=void 0;class n{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:n}){this.controllerMessenger=e,this.controllerName=t,this.allowedActions=r||null,this.allowedEvents=n||null}registerActionHandler(e,t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed registering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.registerActionHandler(e,t)}unregisterActionHandler(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed unregistering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.unregisterActionHandler(e)}call(e,...t){if(null===this.allowedActions)throw new Error("No actions allowed");if(!this.allowedActions.includes(e))throw new Error(`Action missing from allow list: ${e}`);return this.controllerMessenger.call(e,...t)}publish(e,...t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed publishing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.publish(e,...t)}subscribe(e,t,r){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);return r?this.controllerMessenger.subscribe(e,t,r):this.controllerMessenger.subscribe(e,t)}unsubscribe(e,t){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);this.controllerMessenger.unsubscribe(e,t)}clearEventSubscriptions(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed clearing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.clearEventSubscriptions(e)}}r.RestrictedControllerMessenger=n;r.ControllerMessenger=class{constructor(){this.actions=new Map,this.events=new Map,this.eventPayloadCache=new Map}registerActionHandler(e,t){if(this.actions.has(e))throw new Error(`A handler for ${e} has already been registered`);this.actions.set(e,t)}unregisterActionHandler(e){this.actions.delete(e)}clearActions(){this.actions.clear()}call(e,...t){const r=this.actions.get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}publish(e,...t){const r=this.events.get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=this.eventPayloadCache.get(e),s=n(...t);s!==r&&(this.eventPayloadCache.set(e,s),e(s,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=this.events.get(e);n||(n=new Map,this.events.set(e,n)),n.set(t,r)}unsubscribe(e,t){const r=this.events.get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&this.eventPayloadCache.delete(t),r.delete(t)}clearEventSubscriptions(e){this.events.delete(e)}clearSubscriptions(){this.events.clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new n({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/logging-controller>@metamask/base-controller",file:"node_modules/@metamask/logging-controller/node_modules/@metamask/base-controller/dist/ControllerMessenger.js"}],[1301,{"./BaseController":1298,"./BaseControllerV2":1299,"./ControllerMessenger":1300},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseControllerV2=r.BaseController=void 0;var i=e("./BaseController");Object.defineProperty(r,"BaseController",{enumerable:!0,get:function(){return i.BaseController}});var o=e("./BaseControllerV2");Object.defineProperty(r,"BaseControllerV2",{enumerable:!0,get:function(){return o.BaseController}}),Object.defineProperty(r,"getAnonymizedState",{enumerable:!0,get:function(){return o.getAnonymizedState}}),Object.defineProperty(r,"getPersistentState",{enumerable:!0,get:function(){return o.getPersistentState}}),s(e("./ControllerMessenger"),r)}}},{package:"@metamask/logging-controller>@metamask/base-controller",file:"node_modules/@metamask/logging-controller/node_modules/@metamask/base-controller/dist/index.js"}],[1305,{"@metamask/base-controller":1316,events:2868},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r};Object.defineProperty(r,"__esModule",{value:!0}),r.AbstractMessageManager=void 0;const i=e("@metamask/base-controller"),o=e("events");class a extends i.BaseController{constructor(e,t,r,n,s){super(e,t),this.hub=new o.EventEmitter,this.name="AbstractMessageManager",this.defaultState={unapprovedMessages:{},unapprovedMessagesCount:0},this.messages=[],this.securityProviderRequest=r,this.additionalFinishStatuses=null!=n?n:[],this.getCurrentChainId=s,this.initialize()}saveMessageList(e=!0){const t=this.getUnapprovedMessages(),r=this.getUnapprovedMessagesCount();this.update({unapprovedMessages:t,unapprovedMessagesCount:r}),e&&this.hub.emit("updateBadge")}setMessageStatus(e,t){const r=this.getMessage(e);if(!r)throw new Error(`${this.name}: Message not found for id: ${e}.`);r.status=t,this.updateMessage(r),this.hub.emit(`${e}:${t}`,r),("rejected"===t||"signed"===t||"errored"===t||this.additionalFinishStatuses.includes(t))&&this.hub.emit(`${e}:finished`,r)}updateMessage(e,t=!0){const r=this.messages.findIndex((t=>e.id===t.id));-1!==r&&(this.messages[r]=e),this.saveMessageList(t)}securityCheck(e){return n(this,void 0,void 0,(function*(){if(this.securityProviderRequest){const t=yield this.securityProviderRequest(e,e.type);return Object.assign(Object.assign({},e),{securityProviderResponse:t})}return e}))}getUnapprovedMessagesCount(){return Object.keys(this.getUnapprovedMessages()).length}getUnapprovedMessages(){return this.messages.filter((e=>"unapproved"===e.status)).reduce(((e,t)=>(e[t.id]=t,e)),{})}addMessage(e){return n(this,void 0,void 0,(function*(){const t=yield this.securityCheck(e);this.messages.push(t),this.saveMessageList()}))}getMessage(e){return this.messages.find((t=>t.id===e))}getAllMessages(){return this.messages}approveMessage(e){return this.setMessageStatusApproved(e.metamaskId),this.prepMessageForSigning(e)}setMessageStatusApproved(e){this.setMessageStatus(e,"approved")}setMessageStatusInProgress(e){this.setMessageStatus(e,"inProgress")}setMessageStatusSigned(e,t){this.setMessageStatusAndResult(e,t,"signed")}setMessageStatusAndResult(e,t,r){this.setResult(e,t),this.setMessageStatus(e,r)}setResult(e,t){const r=this.getMessage(e);r&&(r.rawSig=t,this.updateMessage(r,!1))}setMetadata(e,t){const r=this.getMessage(e);if(!r)throw new Error(`${this.name}: Message not found for id: ${e}.`);r.metadata=t,this.updateMessage(r,!1)}rejectMessage(e){this.setMessageStatus(e,"rejected")}waitForFinishStatus(e,t){return n(this,void 0,void 0,(function*(){const{metamaskId:r}=e,n=s(e,["metamaskId"]);return new Promise(((e,s)=>{this.hub.once(`${r}:finished`,(r=>{switch(r.status){case"signed":return e(r.rawSig);case"rejected":return s(new Error(`MetaMask ${t} Signature: User denied message signature.`));case"errored":return s(new Error(`MetaMask ${t} Signature: ${r.error}`));default:return s(new Error(`MetaMask ${t} Signature: Unknown problem: ${JSON.stringify(n)}`))}}))}))}))}}r.AbstractMessageManager=a,r.default=a}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/AbstractMessageManager.js"}],[1306,{"./AbstractMessageManager":1305,"./utils":1312,uuid:4001},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.DecryptMessageManager=void 0;const s=e("uuid"),i=e("./AbstractMessageManager"),o=e("./utils");class a extends i.AbstractMessageManager{constructor(){super(...arguments),this.name="DecryptMessageManager"}addUnapprovedMessageAsync(e,t){return n(this,void 0,void 0,(function*(){(0,o.validateDecryptedMessageData)(e);const r=yield this.addUnapprovedMessage(e,t);return new Promise(((t,n)=>{this.hub.once(`${r}:finished`,(r=>{switch(r.status){case"decrypted":return t(r.rawSig);case"rejected":return n(new Error("MetaMask DecryptMessage: User denied message decryption."));case"errored":return n(new Error("MetaMask DecryptMessage: This message cannot be decrypted."));default:return n(new Error(`MetaMask DecryptMessage: Unknown problem: ${JSON.stringify(e)}`))}}))}))}))}addUnapprovedMessage(e,t){return n(this,void 0,void 0,(function*(){t&&(e.origin=t.origin),e.data=(0,o.normalizeMessageData)(e.data);const r=(0,s.v1)(),n={id:r,messageParams:e,status:"unapproved",time:Date.now(),type:"eth_decrypt"};return yield this.addMessage(n),this.hub.emit("unapprovedMessage",Object.assign(Object.assign({},e),{metamaskId:r})),r}))}prepMessageForSigning(e){return delete e.metamaskId,Promise.resolve(e)}}r.DecryptMessageManager=a}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/DecryptMessageManager.js"}],[1307,{"./AbstractMessageManager":1305,"./utils":1312,uuid:4001},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.EncryptionPublicKeyManager=void 0;const s=e("uuid"),i=e("./AbstractMessageManager"),o=e("./utils");class a extends i.AbstractMessageManager{constructor(){super(...arguments),this.name="EncryptionPublicKeyManager"}addUnapprovedMessageAsync(e,t){return n(this,void 0,void 0,(function*(){(0,o.validateEncryptionPublicKeyMessageData)(e);const r=yield this.addUnapprovedMessage(e,t);return new Promise(((t,n)=>{this.hub.once(`${r}:finished`,(r=>{switch(r.status){case"received":return t(r.rawSig);case"rejected":return n(new Error("MetaMask EncryptionPublicKey: User denied message EncryptionPublicKey."));default:return n(new Error(`MetaMask EncryptionPublicKey: Unknown problem: ${JSON.stringify(e)}`))}}))}))}))}addUnapprovedMessage(e,t){return n(this,void 0,void 0,(function*(){t&&(e.origin=t.origin);const r=(0,s.v1)(),n={id:r,messageParams:e,status:"unapproved",time:Date.now(),type:"eth_getEncryptionPublicKey"};return yield this.addMessage(n),this.hub.emit("unapprovedMessage",Object.assign(Object.assign({},e),{metamaskId:r})),r}))}prepMessageForSigning(e){return delete e.metamaskId,Promise.resolve({from:e.data})}}r.EncryptionPublicKeyManager=a,r.default=a}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/EncryptionPublicKeyManager.js"}],[1308,{"./AbstractMessageManager":1305,"./utils":1312,uuid:4001},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r};Object.defineProperty(r,"__esModule",{value:!0}),r.MessageManager=void 0;const i=e("uuid"),o=e("./AbstractMessageManager"),a=e("./utils");class c extends o.AbstractMessageManager{constructor(){super(...arguments),this.name="MessageManager"}addUnapprovedMessage(e,t){return n(this,void 0,void 0,(function*(){(0,a.validateSignMessageData)(e),t&&(e.origin=t.origin),e.data=(0,a.normalizeMessageData)(e.data);const r=(0,i.v1)(),n={id:r,messageParams:e,securityAlertResponse:null==t?void 0:t.securityAlertResponse,status:"unapproved",time:Date.now(),type:"eth_sign"};return yield this.addMessage(n),this.hub.emit("unapprovedMessage",Object.assign(Object.assign({},e),{metamaskId:r})),r}))}prepMessageForSigning(e){const{metamaskId:t}=e,r=s(e,["metamaskId"]);return Promise.resolve(r)}}r.MessageManager=c,r.default=c}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/MessageManager.js"}],[1309,{"./AbstractMessageManager":1305,"./utils":1312,"@metamask/controller-utils":1083,uuid:4001},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r};Object.defineProperty(r,"__esModule",{value:!0}),r.PersonalMessageManager=void 0;const i=e("@metamask/controller-utils"),o=e("uuid"),a=e("./AbstractMessageManager"),c=e("./utils");class u extends a.AbstractMessageManager{constructor(){super(...arguments),this.name="PersonalMessageManager"}addUnapprovedMessage(e,t){return n(this,void 0,void 0,(function*(){(0,c.validateSignMessageData)(e),t&&(e.origin=t.origin),e.data=(0,c.normalizeMessageData)(e.data);const r=(0,i.detectSIWE)(e),n=Object.assign(Object.assign({},e),{siwe:r}),s=(0,o.v1)(),a={id:s,messageParams:n,securityAlertResponse:null==t?void 0:t.securityAlertResponse,status:"unapproved",time:Date.now(),type:"personal_sign"};return yield this.addMessage(a),this.hub.emit("unapprovedMessage",Object.assign(Object.assign({},n),{metamaskId:s})),s}))}prepMessageForSigning(e){const{metamaskId:t}=e,r=s(e,["metamaskId"]);return Promise.resolve(r)}}r.PersonalMessageManager=u,r.default=u}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/PersonalMessageManager.js"}],[131,{lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:46,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=46;const r=t.data;return t.data=function(e){void 0!==(null==e?void 0:e.ABTestController)&&delete e.ABTestController;return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/046.js"}],[1310,{"./AbstractMessageManager":1305,"./utils":1312,uuid:4001},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r};Object.defineProperty(r,"__esModule",{value:!0}),r.TypedMessageManager=void 0;const i=e("uuid"),o=e("./AbstractMessageManager"),a=e("./utils");class c extends o.AbstractMessageManager{constructor(){super(...arguments),this.name="TypedMessageManager"}addUnapprovedMessage(e,t,r){var s;return n(this,void 0,void 0,(function*(){if("V1"===r&&(0,a.validateTypedSignMessageDataV1)(e),"V3"===r||"V4"===r){const t=null===(s=this.getCurrentChainId)||void 0===s?void 0:s.call(this);(0,a.validateTypedSignMessageDataV3V4)(e,t)}"string"==typeof e.data||"V3"!==r&&"V4"!==r||(e.data=JSON.stringify(e.data));const n=(0,i.v1)(),o=Object.assign(Object.assign({},e),{metamaskId:n,version:r});t&&(e.origin=t.origin);const c={id:n,messageParams:e,securityAlertResponse:null==t?void 0:t.securityAlertResponse,status:"unapproved",time:Date.now(),type:"eth_signTypedData"};return yield this.addMessage(c),this.hub.emit("unapprovedMessage",o),n}))}setMessageStatusErrored(e,t){const r=this.getMessage(e);r&&(r.error=t,this.updateMessage(r),this.setMessageStatus(e,"errored"))}prepMessageForSigning(e){const{metamaskId:t,version:r}=e,n=s(e,["metamaskId","version"]);return Promise.resolve(n)}}r.TypedMessageManager=c,r.default=c}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/TypedMessageManager.js"}],[1311,{"./AbstractMessageManager":1305,"./DecryptMessageManager":1306,"./EncryptionPublicKeyManager":1307,"./MessageManager":1308,"./PersonalMessageManager":1309,"./TypedMessageManager":1310},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./AbstractMessageManager"),r),s(e("./MessageManager"),r),s(e("./PersonalMessageManager"),r),s(e("./TypedMessageManager"),r),s(e("./EncryptionPublicKeyManager"),r),s(e("./DecryptMessageManager"),r)}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/index.js"}],[1312,{"@metamask/controller-utils":1083,"@metamask/eth-sig-util":1122,buffer:2448,"ethereumjs-util":2816,jsonschema:1319},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.validateDecryptedMessageData=r.validateEncryptionPublicKeyMessageData=r.validateTypedSignMessageDataV3V4=r.validateTypedSignMessageDataV1=r.validateSignMessageData=r.normalizeMessageData=void 0;const n=e("@metamask/controller-utils"),s=e("@metamask/eth-sig-util"),i=e("ethereumjs-util"),o=e("jsonschema"),a=/^[0-9A-Fa-f]+$/gu;function c(e,t){if(!e||"string"!=typeof e||!(0,n.isValidHexAddress)(e))throw new Error(`Invalid "${t}" address: ${e} must be a valid string.`)}r.normalizeMessageData=function(e){try{const t=(0,i.stripHexPrefix)(e);if(t.match(a))return(0,i.addHexPrefix)(t)}catch(e){}return(0,i.bufferToHex)(t.from(e,"utf8"))},r.validateSignMessageData=function(e){const{from:t,data:r}=e;if(c(t,"from"),!r||"string"!=typeof r)throw new Error(`Invalid message "data": ${r} must be a valid string.`)},r.validateTypedSignMessageDataV1=function(e){if(c(e.from,"from"),!e.data||!Array.isArray(e.data))throw new Error(`Invalid message "data": ${e.data} must be a valid array.`);try{(0,s.typedSignatureHash)(e.data)}catch(e){throw new Error("Expected EIP712 typed data.")}},r.validateTypedSignMessageDataV3V4=function(e,t){if(c(e.from,"from"),!e.data||Array.isArray(e.data)||"object"!=typeof e.data&&"string"!=typeof e.data)throw new Error('Invalid message "data": Must be a valid string or object.');let r;if("object"==typeof e.data)r=e.data;else try{r=JSON.parse(e.data)}catch(e){throw new Error("Data must be passed as a valid JSON string.")}if((0,o.validate)(r,s.TYPED_MESSAGE_SCHEMA).errors.length>0)throw new Error("Data must conform to EIP-712 schema. See https://git.io/fNtcx.");if(!t)throw new Error("Current chainId cannot be null or undefined.");let{chainId:n}=r.domain;if(n){"string"==typeof n&&(n=parseInt(n,n.startsWith("0x")?16:10));const e=parseInt(t,16);if(Number.isNaN(e))throw new Error(`Cannot sign messages for chainId "${n}", because MetaMask is switching networks.`);if(n!==e)throw new Error(`Provided chainId "${n}" must match the active chainId "${e}"`)}},r.validateEncryptionPublicKeyMessageData=function(e){const{from:t}=e;c(t,"from")},r.validateDecryptedMessageData=function(e){const{from:t}=e;c(t,"from")}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/utils.js"}],[1313,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BaseController=void 0;class n{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e in this.internalConfig)void 0!==this.internalConfig[e]&&(this[e]=this.internalConfig[e])}else for(const t in e)void 0!==this.internalConfig[t]&&(this.internalConfig[t]=e[t],this[t]=e[t])}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}}r.BaseController=n,r.default=n}}},{package:"@metamask/message-manager>@metamask/base-controller",file:"node_modules/@metamask/message-manager/node_modules/@metamask/base-controller/dist/BaseController.js"}],[1314,{immer:3190},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseController=void 0;const n=e("immer");(0,n.enablePatches)();function s(e,t,r){return Object.keys(e).reduce(((n,s)=>{try{const i=t[s];if(!i)throw new Error(`No metadata found for '${s}'`);const o=i[r],a=e[s];return"function"==typeof o?n[s]=o(a):o&&(n[s]=a),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:n}){this.messagingSystem=e,this.name=r,this.internalState=n,this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state))}get state(){return this.internalState}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,s]=n.produceWithPatches(this.internalState,e);return this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:s}}applyPatches(e){const t=(0,n.applyPatches)(this.internalState,e);this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return s(e,t,"anonymous")},r.getPersistentState=function(e,t){return s(e,t,"persist")}}}},{package:"@metamask/message-manager>@metamask/base-controller",file:"node_modules/@metamask/message-manager/node_modules/@metamask/base-controller/dist/BaseControllerV2.js"}],[1315,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ControllerMessenger=r.RestrictedControllerMessenger=void 0;class n{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:n}){this.controllerMessenger=e,this.controllerName=t,this.allowedActions=r||null,this.allowedEvents=n||null}registerActionHandler(e,t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed registering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.registerActionHandler(e,t)}unregisterActionHandler(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed unregistering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.unregisterActionHandler(e)}call(e,...t){if(null===this.allowedActions)throw new Error("No actions allowed");if(!this.allowedActions.includes(e))throw new Error(`Action missing from allow list: ${e}`);return this.controllerMessenger.call(e,...t)}publish(e,...t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed publishing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.publish(e,...t)}subscribe(e,t,r){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);return r?this.controllerMessenger.subscribe(e,t,r):this.controllerMessenger.subscribe(e,t)}unsubscribe(e,t){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);this.controllerMessenger.unsubscribe(e,t)}clearEventSubscriptions(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed clearing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.clearEventSubscriptions(e)}}r.RestrictedControllerMessenger=n;r.ControllerMessenger=class{constructor(){this.actions=new Map,this.events=new Map,this.eventPayloadCache=new Map}registerActionHandler(e,t){if(this.actions.has(e))throw new Error(`A handler for ${e} has already been registered`);this.actions.set(e,t)}unregisterActionHandler(e){this.actions.delete(e)}clearActions(){this.actions.clear()}call(e,...t){const r=this.actions.get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}publish(e,...t){const r=this.events.get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=this.eventPayloadCache.get(e),s=n(...t);s!==r&&(this.eventPayloadCache.set(e,s),e(s,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=this.events.get(e);n||(n=new Map,this.events.set(e,n)),n.set(t,r)}unsubscribe(e,t){const r=this.events.get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&this.eventPayloadCache.delete(t),r.delete(t)}clearEventSubscriptions(e){this.events.delete(e)}clearSubscriptions(){this.events.clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new n({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/message-manager>@metamask/base-controller",file:"node_modules/@metamask/message-manager/node_modules/@metamask/base-controller/dist/ControllerMessenger.js"}],[1316,{"./BaseController":1313,"./BaseControllerV2":1314,"./ControllerMessenger":1315},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseControllerV2=r.BaseController=void 0;var i=e("./BaseController");Object.defineProperty(r,"BaseController",{enumerable:!0,get:function(){return i.BaseController}});var o=e("./BaseControllerV2");Object.defineProperty(r,"BaseControllerV2",{enumerable:!0,get:function(){return o.BaseController}}),Object.defineProperty(r,"getAnonymizedState",{enumerable:!0,get:function(){return o.getAnonymizedState}}),Object.defineProperty(r,"getPersistentState",{enumerable:!0,get:function(){return o.getPersistentState}}),s(e("./ControllerMessenger"),r)}}},{package:"@metamask/message-manager>@metamask/base-controller",file:"node_modules/@metamask/message-manager/node_modules/@metamask/base-controller/dist/index.js"}],[1317,{"./helpers":1318},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./helpers"),s=n.ValidatorResult,i=n.SchemaError,o={ignoreProperties:{id:!0,default:!0,description:!0,title:!0,exclusiveMinimum:!0,exclusiveMaximum:!0,additionalItems:!0,$schema:!0,$ref:!0,extends:!0}},a=o.validators={};function c(e,t,r,n,s){var i=t.throwError;t.throwError=!1;var o=this.validateSchema(e,s,t,r);return t.throwError=i,!o.valid&&n instanceof Function&&n(o),o.valid}function u(e,t,r,n,s,i){if(this.types.object(e)&&(!t.properties||t.properties[s]===undefined))if(!1===t.additionalProperties)i.addError({name:"additionalProperties",argument:s,message:"additionalProperty "+JSON.stringify(s)+" exists in instance when not allowed"});else{var o=t.additionalProperties||{};"function"==typeof r.preValidateProperty&&r.preValidateProperty(e,s,o,r,n);var a=this.validateSchema(e[s],o,r,n.makeChild(o,s));a.instance!==i.instance[s]&&(i.instance[s]=a.instance),i.importErrors(a)}}a.type=function(e,t,r,n){if(e===undefined)return null;var i=new s(e,t,r,n),o=Array.isArray(t.type)?t.type:[t.type];if(!o.some(this.testType.bind(this,e,t,r,n))){var a=o.map((function(e){return e.id&&"<"+e.id+">"||e+""}));i.addError({name:"type",argument:a,message:"is not of a type(s) "+a})}return i},a.anyOf=function(e,t,r,n){if(e===undefined)return null;var o=new s(e,t,r,n),a=new s(e,t,r,n);if(!Array.isArray(t.anyOf))throw new i("anyOf must be an array");if(!t.anyOf.some(c.bind(this,e,r,n,(function(e){a.importErrors(e)})))){var u=t.anyOf.map((function(e,t){return e.id&&"<"+e.id+">"||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"}));r.nestedErrors&&o.importErrors(a),o.addError({name:"anyOf",argument:u,message:"is not any of "+u.join(",")})}return o},a.allOf=function(e,t,r,n){if(e===undefined)return null;if(!Array.isArray(t.allOf))throw new i("allOf must be an array");var o=new s(e,t,r,n),a=this;return t.allOf.forEach((function(t,s){var i=a.validateSchema(e,t,r,n);if(!i.valid){var c=t.id&&"<"+t.id+">"||t.title&&JSON.stringify(t.title)||t.$ref&&"<"+t.$ref+">"||"[subschema "+s+"]";o.addError({name:"allOf",argument:{id:c,length:i.errors.length,valid:i},message:"does not match allOf schema "+c+" with "+i.errors.length+" error[s]:"}),o.importErrors(i)}})),o},a.oneOf=function(e,t,r,n){if(e===undefined)return null;if(!Array.isArray(t.oneOf))throw new i("oneOf must be an array");var o=new s(e,t,r,n),a=new s(e,t,r,n),u=t.oneOf.filter(c.bind(this,e,r,n,(function(e){a.importErrors(e)}))).length,l=t.oneOf.map((function(e,t){return e.id&&"<"+e.id+">"||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"}));return 1!==u&&(r.nestedErrors&&o.importErrors(a),o.addError({name:"oneOf",argument:l,message:"is not exactly one from "+l.join(",")})),o},a.properties=function(e,t,r,n){if(this.types.object(e)){var i=new s(e,t,r,n),o=t.properties||{};for(var a in o){"function"==typeof r.preValidateProperty&&r.preValidateProperty(e,a,o[a],r,n);var c=Object.hasOwnProperty.call(e,a)?e[a]:undefined,u=this.validateSchema(c,o[a],r,n.makeChild(o[a],a));u.instance!==i.instance[a]&&(i.instance[a]=u.instance),i.importErrors(u)}return i}},a.patternProperties=function(e,t,r,n){if(this.types.object(e)){var i=new s(e,t,r,n),o=t.patternProperties||{};for(var a in e){var c=!0;for(var l in o){if(new RegExp(l).test(a)){c=!1,"function"==typeof r.preValidateProperty&&r.preValidateProperty(e,a,o[l],r,n);var d=this.validateSchema(e[a],o[l],r,n.makeChild(o[l],a));d.instance!==i.instance[a]&&(i.instance[a]=d.instance),i.importErrors(d)}}c&&u.call(this,e,t,r,n,a,i)}return i}},a.additionalProperties=function(e,t,r,n){if(this.types.object(e)){if(t.patternProperties)return null;var i=new s(e,t,r,n);for(var o in e)u.call(this,e,t,r,n,o,i);return i}},a.minProperties=function(e,t,r,n){if(this.types.object(e)){var i=new s(e,t,r,n);return Object.keys(e).length>=t.minProperties||i.addError({name:"minProperties",argument:t.minProperties,message:"does not meet minimum property length of "+t.minProperties}),i}},a.maxProperties=function(e,t,r,n){if(this.types.object(e)){var i=new s(e,t,r,n);return Object.keys(e).length<=t.maxProperties||i.addError({name:"maxProperties",argument:t.maxProperties,message:"does not meet maximum property length of "+t.maxProperties}),i}},a.items=function(e,t,r,n){var i=this;if(this.types.array(e)&&t.items){var o=new s(e,t,r,n);return e.every((function(e,s){var a=Array.isArray(t.items)?t.items[s]||t.additionalItems:t.items;if(a===undefined)return!0;if(!1===a)return o.addError({name:"items",message:"additionalItems not permitted"}),!1;var c=i.validateSchema(e,a,r,n.makeChild(a,s));return c.instance!==o.instance[s]&&(o.instance[s]=c.instance),o.importErrors(c),!0})),o}},a.minimum=function(e,t,r,n){if(this.types.number(e)){var i=new s(e,t,r,n);return(t.exclusiveMinimum&&!0===t.exclusiveMinimum?e>t.minimum:e>=t.minimum)||i.addError({name:"minimum",argument:t.minimum,message:"must have a minimum value of "+t.minimum}),i}},a.maximum=function(e,t,r,n){if(this.types.number(e)){var i=new s(e,t,r,n);return(t.exclusiveMaximum&&!0===t.exclusiveMaximum?e<t.maximum:e<=t.maximum)||i.addError({name:"maximum",argument:t.maximum,message:"must have a maximum value of "+t.maximum}),i}};var l=function(e,t,r,o,a,c){if(this.types.number(e)){var u=t[a];if(0==u)throw new i(a+" cannot be zero");var l=new s(e,t,r,o),d=n.getDecimalPlaces(e),h=n.getDecimalPlaces(u),f=Math.max(d,h),p=Math.pow(10,f);return Math.round(e*p)%Math.round(u*p)!=0&&l.addError({name:a,argument:u,message:c+JSON.stringify(u)}),l}};function d(e,t,r){var s,i=r.length;for(s=t+1;s<i;s++)if(n.deepCompareStrict(e,r[s]))return!1;return!0}a.multipleOf=function(e,t,r,n){return l.call(this,e,t,r,n,"multipleOf","is not a multiple of (divisible by) ")},a.divisibleBy=function(e,t,r,n){return l.call(this,e,t,r,n,"divisibleBy","is not divisible by (multiple of) ")},a.required=function(e,t,r,n){var i=new s(e,t,r,n);return e===undefined&&!0===t.required?i.addError({name:"required",message:"is required"}):this.types.object(e)&&Array.isArray(t.required)&&t.required.forEach((function(t){e[t]===undefined&&i.addError({name:"required",argument:t,message:"requires property "+JSON.stringify(t)})})),i},a.pattern=function(e,t,r,n){if(this.types.string(e)){var i=new s(e,t,r,n);return e.match(t.pattern)||i.addError({name:"pattern",argument:t.pattern,message:"does not match pattern "+JSON.stringify(t.pattern)}),i}},a.format=function(e,t,r,i){if(e!==undefined){var o=new s(e,t,r,i);return o.disableFormat||n.isFormat(e,t.format,this)||o.addError({name:"format",argument:t.format,message:"does not conform to the "+JSON.stringify(t.format)+" format"}),o}},a.minLength=function(e,t,r,n){if(this.types.string(e)){var i=new s(e,t,r,n),o=e.match(/[\uDC00-\uDFFF]/g);return e.length-(o?o.length:0)>=t.minLength||i.addError({name:"minLength",argument:t.minLength,message:"does not meet minimum length of "+t.minLength}),i}},a.maxLength=function(e,t,r,n){if(this.types.string(e)){var i=new s(e,t,r,n),o=e.match(/[\uDC00-\uDFFF]/g);return e.length-(o?o.length:0)<=t.maxLength||i.addError({name:"maxLength",argument:t.maxLength,message:"does not meet maximum length of "+t.maxLength}),i}},a.minItems=function(e,t,r,n){if(this.types.array(e)){var i=new s(e,t,r,n);return e.length>=t.minItems||i.addError({name:"minItems",argument:t.minItems,message:"does not meet minimum length of "+t.minItems}),i}},a.maxItems=function(e,t,r,n){if(this.types.array(e)){var i=new s(e,t,r,n);return e.length<=t.maxItems||i.addError({name:"maxItems",argument:t.maxItems,message:"does not meet maximum length of "+t.maxItems}),i}},a.uniqueItems=function(e,t,r,i){if(this.types.array(e)){var o=new s(e,t,r,i);return e.every((function(e,t,r){for(var s=t+1;s<r.length;s++)if(n.deepCompareStrict(e,r[s]))return!1;return!0}))||o.addError({name:"uniqueItems",message:"contains duplicate item"}),o}},a.uniqueItems=function(e,t,r,n){if(this.types.array(e)){var i=new s(e,t,r,n);return e.every(d)||i.addError({name:"uniqueItems",message:"contains duplicate item"}),i}},a.dependencies=function(e,t,r,n){if(this.types.object(e)){var i=new s(e,t,r,n);for(var o in t.dependencies)if(e[o]!==undefined){var a=t.dependencies[o],c=n.makeChild(a,o);if("string"==typeof a&&(a=[a]),Array.isArray(a))a.forEach((function(t){e[t]===undefined&&i.addError({name:"dependencies",argument:c.propertyPath,message:"property "+t+" not found, required by "+c.propertyPath})}));else{var u=this.validateSchema(e,a,r,c);i.instance!==u.instance&&(i.instance=u.instance),u&&u.errors.length&&(i.addError({name:"dependencies",argument:c.propertyPath,message:"does not meet dependency required by "+c.propertyPath}),i.importErrors(u))}}return i}},a.enum=function(e,t,r,o){if(e===undefined)return null;if(!Array.isArray(t.enum))throw new i("enum expects an array",t);var a=new s(e,t,r,o);return t.enum.some(n.deepCompareStrict.bind(null,e))||a.addError({name:"enum",argument:t.enum,message:"is not one of enum values: "+t.enum.map(String).join(",")}),a},a.const=function(e,t,r,i){if(e===undefined)return null;var o=new s(e,t,r,i);return n.deepCompareStrict(t.const,e)||o.addError({name:"const",argument:t.const,message:"does not exactly match expected constant: "+t.const}),o},a.not=a.disallow=function(e,t,r,n){var i=this;if(e===undefined)return null;var o=new s(e,t,r,n),a=t.not||t.disallow;return a?(Array.isArray(a)||(a=[a]),a.forEach((function(s){if(i.testType(e,t,r,n,s)){var a=s&&s.id&&"<"+s.id+">"||s;o.addError({name:"not",argument:a,message:"is of prohibited type "+a})}})),o):null},t.exports=o}}},{package:"@metamask/message-manager>jsonschema",file:"node_modules/@metamask/message-manager/node_modules/jsonschema/lib/attribute.js"}],[1318,{url:3977},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("url"),s=r.ValidationError=function(e,t,r,n,s,i){n&&(this.property=n),e&&(this.message=e),r&&(r.id?this.schema=r.id:this.schema=r),t&&(this.instance=t),this.name=s,this.argument=i,this.stack=this.toString()};s.prototype.toString=function(){return this.property+" "+this.message};var i=r.ValidatorResult=function(e,t,r,n){this.instance=e,this.schema=t,this.propertyPath=n.propertyPath,this.errors=[],this.throwError=r&&r.throwError,this.disableFormat=r&&!0===r.disableFormat};function o(e,t){return t+": "+e.toString()+"\n"}i.prototype.addError=function(e){var t;if("string"==typeof e)t=new s(e,this.instance,this.schema,this.propertyPath);else{if(!e)throw new Error("Missing error detail");if(!e.message)throw new Error("Missing error message");if(!e.name)throw new Error("Missing validator type");t=new s(e.message,this.instance,this.schema,this.propertyPath,e.name,e.argument)}if(this.throwError)throw t;return this.errors.push(t),t},i.prototype.importErrors=function(e){"string"==typeof e||e&&e.validatorType?this.addError(e):e&&e.errors&&Array.prototype.push.apply(this.errors,e.errors)},i.prototype.toString=function(e){return this.errors.map(o).join("")},Object.defineProperty(i.prototype,"valid",{get:function(){return!this.errors.length}});var a=r.SchemaError=function e(t,r){this.message=t,this.schema=r,Error.call(this,t),Error.captureStackTrace(this,e)};a.prototype=Object.create(Error.prototype,{constructor:{value:a,enumerable:!1},name:{value:"SchemaError",enumerable:!1}});var c=r.SchemaContext=function(e,t,r,n,s){this.schema=e,this.options=t,this.propertyPath=r,this.base=n,this.schemas=s};c.prototype.resolve=function(e){return n.resolve(this.base,e)},c.prototype.makeChild=function(e,t){var r=t===undefined?this.propertyPath:this.propertyPath+l(t),s=n.resolve(this.base,e.id||""),i=new c(e,this.options,r,s,Object.create(this.schemas));return e.id&&!i.schemas[s]&&(i.schemas[s]=e),i};var u=r.FORMAT_REGEXPS={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,email:/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/,"utc-millisec":function(e){return"string"==typeof e&&parseFloat(e)===parseInt(e,10)&&!isNaN(e)},regex:function(e){var t=!0;try{new RegExp(e)}catch(e){t=!1}return t},style:/\s*(.+?):\s*([^;]+);?/g,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/};u.regexp=u.regex,u.pattern=u.regex,u.ipv4=u["ip-address"],r.isFormat=function(e,t,r){if("string"==typeof e&&u[t]!==undefined){if(u[t]instanceof RegExp)return u[t].test(e);if("function"==typeof u[t])return u[t](e)}else if(r&&r.customFormats&&"function"==typeof r.customFormats[t])return r.customFormats[t](e);return!0};var l=r.makeSuffix=function(e){return(e=e.toString()).match(/[.\s\[\]]/)||e.match(/^[\d]/)?e.match(/^\d+$/)?"["+e+"]":"["+JSON.stringify(e)+"]":"."+e};function d(e,t,r,n){"object"==typeof r?t[n]=p(e[n],r):-1===e.indexOf(r)&&t.push(r)}function h(e,t,r){t[r]=e[r]}function f(e,t,r,n){"object"==typeof t[n]&&t[n]&&e[n]?r[n]=p(e[n],t[n]):r[n]=t[n]}function p(e,t){var r=Array.isArray(t),n=r&&[]||{};return r?(e=e||[],n=n.concat(e),t.forEach(d.bind(null,e,n))):(e&&"object"==typeof e&&Object.keys(e).forEach(h.bind(null,e,n)),Object.keys(t).forEach(f.bind(null,e,t,n))),n}function m(e){return"/"+encodeURIComponent(e).replace(/~/g,"%7E")}r.deepCompareStrict=function e(t,r){if(typeof t!=typeof r)return!1;if(t instanceof Array)return r instanceof Array&&(t.length===r.length&&t.every((function(n,s){return e(t[s],r[s])})));if("object"==typeof t){if(!t||!r)return t===r;var n=Object.keys(t),s=Object.keys(r);return n.length===s.length&&n.every((function(n){return e(t[n],r[n])}))}return t===r},t.exports.deepMerge=p,r.objectGetPath=function(e,t){for(var r,n=t.split("/").slice(1);"string"==typeof(r=n.shift());){var s=decodeURIComponent(r.replace(/~0/,"~").replace(/~1/g,"/"));if(!(s in e))return;e=e[s]}return e},r.encodePath=function(e){return e.map(m).join("")},r.getDecimalPlaces=function(e){var t=0;if(isNaN(e))return t;"number"!=typeof e&&(e=Number(e));var r=e.toString().split("e");if(2===r.length){if("-"!==r[1][0])return t;t=Number(r[1].slice(1))}var n=r[0].split(".");return 2===n.length&&(t+=n[1].length),t}}}},{package:"@metamask/message-manager>jsonschema",file:"node_modules/@metamask/message-manager/node_modules/jsonschema/lib/helpers.js"}],[1319,{"./helpers":1318,"./scan":1320,"./validator":1321},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=t.exports.Validator=e("./validator");t.exports.ValidatorResult=e("./helpers").ValidatorResult,t.exports.ValidationError=e("./helpers").ValidationError,t.exports.SchemaError=e("./helpers").SchemaError,t.exports.SchemaScanResult=e("./scan").SchemaScanResult,t.exports.scan=e("./scan").scan,t.exports.validate=function(e,t,r){return(new n).validate(e,t,r)}}}},{package:"@metamask/message-manager>jsonschema",file:"node_modules/@metamask/message-manager/node_modules/jsonschema/lib/index.js"}],[132,{lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:47,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=47;const r=t.data;return t.data=function(e){var t;const r=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions;Array.isArray(r)&&r.forEach((e=>{"number"==typeof e.metamaskNetworkId&&(e.metamaskNetworkId=e.metamaskNetworkId.toString())}));return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/047.js"}],[1320,{"./helpers":1318,url:3977},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("url"),s=e("./helpers");function i(e,t){this.id=e,this.ref=t}t.exports.SchemaScanResult=i,t.exports.scan=function(e,t){function r(e,t){if(t&&"object"==typeof t)if(t.$ref){var i=n.resolve(e,t.$ref);u[i]=u[i]?u[i]+1:0}else{var l=t.id?n.resolve(e,t.id):e;if(l){if(l.indexOf("#")<0&&(l+="#"),c[l]){if(!s.deepCompareStrict(c[l],t))throw new Error("Schema <"+t+"> already exists with different definition");return c[l]}c[l]=t,"#"==l[l.length-1]&&(c[l.substring(0,l.length-1)]=t)}o(l+"/items",t.items instanceof Array?t.items:[t.items]),o(l+"/extends",t.extends instanceof Array?t.extends:[t.extends]),r(l+"/additionalItems",t.additionalItems),a(l+"/properties",t.properties),r(l+"/additionalProperties",t.additionalProperties),a(l+"/definitions",t.definitions),a(l+"/patternProperties",t.patternProperties),a(l+"/dependencies",t.dependencies),o(l+"/disallow",t.disallow),o(l+"/allOf",t.allOf),o(l+"/anyOf",t.anyOf),o(l+"/oneOf",t.oneOf),r(l+"/not",t.not)}}function o(e,t){if(t instanceof Array)for(var n=0;n<t.length;n++)r(e+"/"+n,t[n])}function a(e,t){if(t&&"object"==typeof t)for(var n in t)r(e+"/"+n,t[n])}var c={},u={};return r(e,t),new i(c,u)}}}},{package:"@metamask/message-manager>jsonschema",file:"node_modules/@metamask/message-manager/node_modules/jsonschema/lib/scan.js"}],[1321,{"./attribute":1317,"./helpers":1318,"./scan":1320,url:3977},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("url"),s=e("./attribute"),i=e("./helpers"),o=e("./scan").scan,a=i.ValidatorResult,c=i.SchemaError,u=i.SchemaContext,l=function e(){this.customFormats=Object.create(e.prototype.customFormats),this.schemas={},this.unresolvedRefs=[],this.types=Object.create(h),this.attributes=Object.create(s.validators)};function d(e){var t="string"==typeof e?e:e.$ref;return"string"==typeof t&&t}l.prototype.customFormats={},l.prototype.schemas=null,l.prototype.types=null,l.prototype.attributes=null,l.prototype.unresolvedRefs=null,l.prototype.addSchema=function(e,t){var r=this;if(!e)return null;var n=o(t||"/",e),s=t||e.id;for(var i in n.id)this.schemas[i]=n.id[i];for(var i in n.ref)this.unresolvedRefs.push(i);return this.unresolvedRefs=this.unresolvedRefs.filter((function(e){return void 0===r.schemas[e]})),this.schemas[s]},l.prototype.addSubSchemaArray=function(e,t){if(t instanceof Array)for(var r=0;r<t.length;r++)this.addSubSchema(e,t[r])},l.prototype.addSubSchemaObject=function(e,t){if(t&&"object"==typeof t)for(var r in t)this.addSubSchema(e,t[r])},l.prototype.setSchemas=function(e){this.schemas=e},l.prototype.getSchema=function(e){return this.schemas[e]},l.prototype.validate=function(e,t,r,s){r||(r={});var i=r.propertyName||"instance",a=n.resolve(r.base||"/",t.id||"");if(!s){(s=new u(t,r,i,a,Object.create(this.schemas))).schemas[a]||(s.schemas[a]=t);var l=o(a,t);for(var d in l.id){var h=l.id[d];s.schemas[d]=h}}if(t){var f=this.validateSchema(e,t,r,s);if(!f)throw new Error("Result undefined");return f}throw new c("no schema specified",t)},l.prototype.validateSchema=function(e,t,r,n){var o,l=new a(e,t,r,n);if("boolean"==typeof t)!0===t?t={}:!1===t&&(t={type:[]});else if(!t)throw new Error("schema is undefined");if(t.extends)if(t.extends instanceof Array){var h={schema:t,ctx:n};t.extends.forEach(this.schemaTraverser.bind(this,h)),t=h.schema,h.schema=null,h.ctx=null,h=null}else t=i.deepMerge(t,this.superResolve(t.extends,n));if(o=d(t)){var f=this.resolve(t,o,n),p=new u(f.subschema,r,n.propertyPath,f.switchSchema,n.schemas);return this.validateSchema(e,f.subschema,r,p)}var m=r&&r.skipAttributes||[];for(var g in t)if(!s.ignoreProperties[g]&&m.indexOf(g)<0){var y=null,w=this.attributes[g];if(w)y=w.call(this,e,t,r,n);else if(!1===r.allowUnknownAttributes)throw new c("Unsupported attribute: "+g,t);y&&l.importErrors(y)}if("function"==typeof r.rewrite){var v=r.rewrite.call(this,e,t,r,n);l.instance=v}return l},l.prototype.schemaTraverser=function(e,t){e.schema=i.deepMerge(e.schema,this.superResolve(t,e.ctx))},l.prototype.superResolve=function(e,t){var r;return(r=d(e))?this.resolve(e,r,t).subschema:e},l.prototype.resolve=function(e,t,r){if(t=r.resolve(t),r.schemas[t])return{subschema:r.schemas[t],switchSchema:t};var s=n.parse(t),o=s&&s.hash,a=o&&o.length&&t.substr(0,t.length-o.length);if(!a||!r.schemas[a])throw new c("no such schema <"+t+">",e);var u=i.objectGetPath(r.schemas[a],o.substr(1));if(u===undefined)throw new c("no such schema "+o+" located in <"+a+">",e);return{subschema:u,switchSchema:t}},l.prototype.testType=function(e,t,r,n,s){if("function"==typeof this.types[s])return this.types[s].call(this,e);if(s&&"object"==typeof s){var i=this.validateSchema(e,s,r,n);return i===undefined||!(i&&i.errors.length)}return!0};var h=l.prototype.types={};h.string=function(e){return"string"==typeof e},h.number=function(e){return"number"==typeof e&&isFinite(e)},h.integer=function(e){return"number"==typeof e&&e%1==0},h.boolean=function(e){return"boolean"==typeof e},h.array=function(e){return Array.isArray(e)},h.null=function(e){return null===e},h.date=function(e){return e instanceof Date},h.any=function(e){return!0},h.object=function(e){return e&&"object"==typeof e&&!(e instanceof Array)&&!(e instanceof Date)},t.exports=l}}},{package:"@metamask/message-manager>jsonschema",file:"node_modules/@metamask/message-manager/node_modules/jsonschema/lib/validator.js"}],[133,{lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:48,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=48;const r=t.data;return t.data=function(e={}){var t,r,n,o,a,c,u,l;null===(t=e.NetworkController)||void 0===t||delete t.settings;const d=(null===(r=e.NetworkController)||void 0===r?void 0:r.provider)||{};if(("rpc"!==d.type||"string"==typeof d.chainId&&i.test(d.chainId))&&"localhost"!==d.type){if(null!==(n=e.NetworkController)&&void 0!==n&&n.provider){var h;if("rpcTarget"in e.NetworkController.provider){const t=e.NetworkController.provider.rpcTarget;e.NetworkController.provider.rpcUrl=t}null===(h=e.NetworkController)||void 0===h||null===(h=h.provider)||void 0===h||delete h.rpcTarget}}else e.NetworkController.provider={type:"rinkeby",rpcUrl:"",chainId:"0x4",nickname:"",rpcPrefs:{},ticker:"ETH"};e.PreferencesController||(e.PreferencesController={});e.PreferencesController.frequentRpcListDetail||(e.PreferencesController.frequentRpcListDetail=[]);e.PreferencesController.frequentRpcListDetail.unshift({rpcUrl:"http://localhost:8545",chainId:"0x539",ticker:"ETH",nickname:"Localhost 8545",rpcPrefs:{}}),null===(o=e.CachedBalancesController)||void 0===o||delete o.cachedBalances;const f=null===(a=e.TransactionController)||void 0===a?void 0:a.transactions;Array.isArray(f)&&f.forEach((e=>{const t=null==e?void 0:e.metamaskNetworkId;"string"==typeof t&&s.test(t)&&(e.metamaskNetworkId=parseInt(t,16).toString(10))}));const p=(null===(c=e.AddressBookController)||void 0===c?void 0:c.addressBook)||{};Object.keys(p).forEach((e=>{if(/^\d+$/iu.test(e)){const t=`0x${parseInt(e,10).toString(16)}`;!function(e,t){Object.values(e).forEach((e=>{e&&"object"==typeof e&&(e.chainId=t)}))}(p[e],t),p[t]?function(e,t,r){const n=e[t]||{},s={...e[r]};Object.keys(n).forEach((e=>{if(s[e]&&"object"==typeof s[e]){const t={};new Set([...Object.keys(s[e]),...Object.keys(n[e]||{})]).forEach((r=>{var i;t[r]=s[e][r]||(null===(i=n[e])||void 0===i?void 0:i[r])||""})),s[e]=t}else n[e]&&"object"==typeof n[e]&&(s[e]=n[e])})),e[r]=s}(p,e,t):p[t]=p[e],delete p[e]}})),null===(u=e.IncomingTransactionsController)||void 0===u||null===(u=u.incomingTxLastFetchedBlocksByNetwork)||void 0===u||delete u.localhost;const m=null===(l=e.PreferencesController)||void 0===l?void 0:l.accountTokens;m&&Object.keys(m).forEach((e=>{var t,r;const n=(null===(t=m[e])||void 0===t?void 0:t.localhost)||[];if(n.length>0){const t=m[e].rpc||[];t.length>0?m[e].rpc=function(e,t){const r=i(e),n=i(t),s=[];return new Set([...Object.keys(r),...Object.keys(n)]).forEach((e=>{s.push({...r[e],...n[e]})})),s;function i(e){return e.reduce(((e,t)=>(null!=t&&t.address&&"string"==typeof(null==t?void 0:t.address)&&(e[t.address]=t),e)),{})}}(n,t):m[e].rpc=n}null===(r=m[e])||void 0===r||delete r.localhost}));return e}(r),t}};const s=/^0x[0-9a-f]+$/iu,i=/^0x[1-9a-f]+[0-9a-f]*$/iu}}},{package:"$root$",file:"app/scripts/migrations/048.js"}],[1336,{"./constants":1337,"./create-auto-managed-network-client":1338,"./logger":1341,"./types":1342,"@metamask/base-controller":1078,"@metamask/controller-utils":1344,"@metamask/eth-query":1120,"@metamask/rpc-errors":1505,"@metamask/swappable-obj-proxy":1726,"@metamask/utils":1786,assert:2444,uuid:4001},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,o,a,c,u,l,d,h,f,p,m,g,y,w,v,b=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},k=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},_=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},S=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.NetworkController=r.defaultState=r.knownKeysOf=void 0;const T=e("@metamask/base-controller"),E=e("@metamask/controller-utils"),A=S(e("@metamask/eth-query")),j=e("@metamask/rpc-errors"),C=e("@metamask/swappable-obj-proxy"),P=e("@metamask/utils"),M=e("assert"),O=e("uuid"),R=e("./constants"),I=e("./create-auto-managed-network-client"),N=e("./logger"),x=e("./types"),B=(0,N.createModuleLogger)(N.projectLogger,"NetworkController");function K(e){return Object.keys(e)}function D(e,t){const r=t.reduce(((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]})),{});var n,s,i;return n=r,s=()=>t.every((e=>e in r)),i="The reduce did not produce an object with all of the desired keys.",M.strict.ok(s(n),i),r}function $(e){return"object"==typeof e&&null!==e&&"code"in e}function L(e){return"string"==typeof e?e:e.type}function U(...e){if(1===e.length)return e[0];const[{id:t,rpcUrl:r},n]=e;if(t===undefined){const e=Object.values(n).find((e=>e.rpcUrl===r.toLowerCase()));return e?e.id:r.toLowerCase()}return t}function q(e){return(0,E.isInfuraNetworkType)(e.type)}function H(e){return e.type===E.NetworkType.rpc}function F(e){if(e.chainId===undefined)throw new Error("chainId must be provided for custom RPC endpoints");if(e.rpcUrl===undefined)throw new Error("rpcUrl must be provided for custom RPC endpoints")}r.knownKeysOf=K;r.defaultState={selectedNetworkClientId:E.NetworkType.mainnet,providerConfig:{type:E.NetworkType.mainnet,chainId:E.ChainId.mainnet,ticker:E.NetworksTicker.mainnet},networksMetadata:{},networkConfigurations:{}};class V extends T.BaseController{constructor({messenger:e,state:t,infuraProjectId:d,trackMetaMetricsEvent:h}){if(super({name:"NetworkController",metadata:{selectedNetworkClientId:{persist:!0,anonymous:!1},networksMetadata:{persist:!0,anonymous:!1},providerConfig:{persist:!0,anonymous:!1},networkConfigurations:{persist:!0,anonymous:!1}},messenger:e,state:Object.assign(Object.assign({},r.defaultState),t)}),n.add(this),s.set(this,void 0),i.set(this,void 0),o.set(this,void 0),a.set(this,void 0),c.set(this,void 0),u.set(this,void 0),l.set(this,void 0),!d||"string"!=typeof d)throw new Error("Invalid Infura project ID");k(this,i,d,"f"),k(this,o,h,"f"),this.messagingSystem.registerActionHandler(`${this.name}:getProviderConfig`,(()=>this.state.providerConfig)),this.messagingSystem.registerActionHandler(`${this.name}:getEthQuery`,(()=>_(this,s,"f"))),this.messagingSystem.registerActionHandler(`${this.name}:getNetworkClientById`,this.getNetworkClientById.bind(this)),this.messagingSystem.registerActionHandler(`${this.name}:getEIP1559Compatibility`,this.getEIP1559Compatibility.bind(this)),this.messagingSystem.registerActionHandler(`${this.name}:setActiveNetwork`,this.setActiveNetwork.bind(this)),this.messagingSystem.registerActionHandler(`${this.name}:setProviderType`,this.setProviderType.bind(this)),this.messagingSystem.registerActionHandler(`${this.name}:findNetworkClientIdByChainId`,this.findNetworkClientIdByChainId.bind(this)),this.messagingSystem.registerActionHandler(`${this.name}:getNetworkConfigurationByNetworkClientId`,this.getNetworkConfigurationByNetworkClientId.bind(this)),k(this,a,this.state.providerConfig,"f")}getProviderAndBlockTracker(){return{provider:_(this,c,"f"),blockTracker:_(this,u,"f")}}getNetworkClientRegistry(){const e=_(this,n,"m",p).call(this);return Object.assign({},e[x.NetworkClientType.Infura],e[x.NetworkClientType.Custom])}getNetworkClientById(e){if(!e)throw new Error("No network client ID was provided.");const t=_(this,n,"m",p).call(this);if((0,E.isInfuraNetworkType)(e)){const r=t[x.NetworkClientType.Infura][e];if(!r)throw new Error(`No Infura network client was found with the ID "${e}".`);return r}const r=t[x.NetworkClientType.Custom][e];if(!r)throw new Error(`No custom network client was found with the ID "${e}".`);return r}initializeProvider(){return b(this,void 0,void 0,(function*(){_(this,n,"m",p).call(this),_(this,n,"m",v).call(this),yield this.lookupNetwork()}))}lookupNetworkByClientId(e){return b(this,void 0,void 0,(function*(){const t=(0,E.isInfuraNetworkType)(e);let r,s;try{s=yield _(this,n,"m",f).call(this,e),r=R.NetworkStatus.Available}catch(e){if($(e)){let n;if(t&&(0,P.hasProperty)(e,"message")&&"string"==typeof e.message)try{n=JSON.parse(e.message)}catch(e){}r=(0,P.isPlainObject)(n)&&n.error===R.INFURA_BLOCKED_KEY?R.NetworkStatus.Blocked:e.code===j.errorCodes.rpc.internal?R.NetworkStatus.Unknown:R.NetworkStatus.Unavailable}else{if("undefined"!=typeof Error&&(0,P.hasProperty)(e,"message")&&"string"==typeof e.message&&e.message.includes("No custom network client was found with the ID"))throw e;B("NetworkController - could not determine network status",e),r=R.NetworkStatus.Unknown}}this.update((t=>{t.networksMetadata[e]===undefined&&(t.networksMetadata[e]={status:R.NetworkStatus.Unknown,EIPS:{}});const n=t.networksMetadata[e];n.status=r,s===undefined?delete n.EIPS[1559]:n.EIPS[1559]=s}))}))}lookupNetwork(e){return b(this,void 0,void 0,(function*(){if(e)return void(yield this.lookupNetworkByClientId(e));if(!_(this,s,"f"))return;const t=q(this.state.providerConfig);let r=!1;const i=()=>{r=!0,this.messagingSystem.unsubscribe("NetworkController:networkDidChange",i)};let o,a;this.messagingSystem.subscribe("NetworkController:networkDidChange",i);try{const e=yield _(this,n,"m",f).call(this,this.state.selectedNetworkClientId);o=R.NetworkStatus.Available,a=e}catch(e){if($(e)){let r;if(t&&(0,P.hasProperty)(e,"message")&&"string"==typeof e.message)try{r=JSON.parse(e.message)}catch(e){}o=(0,P.isPlainObject)(r)&&r.error===R.INFURA_BLOCKED_KEY?R.NetworkStatus.Blocked:e.code===j.errorCodes.rpc.internal?R.NetworkStatus.Unknown:R.NetworkStatus.Unavailable}else B("NetworkController - could not determine network status",e),o=R.NetworkStatus.Unknown}r||(this.messagingSystem.unsubscribe("NetworkController:networkDidChange",i),this.update((e=>{const t=e.networksMetadata[e.selectedNetworkClientId];t.status=o,a===undefined?delete t.EIPS[1559]:t.EIPS[1559]=a})),t?o===R.NetworkStatus.Available?this.messagingSystem.publish("NetworkController:infuraIsUnblocked"):o===R.NetworkStatus.Blocked&&this.messagingSystem.publish("NetworkController:infuraIsBlocked"):this.messagingSystem.publish("NetworkController:infuraIsUnblocked"))}))}setProviderType(e){return b(this,void 0,void 0,(function*(){M.strict.notStrictEqual(e,E.NetworkType.rpc,`NetworkController - cannot call "setProviderType" with type "${E.NetworkType.rpc}". Use "setActiveNetwork"`),M.strict.ok((0,E.isInfuraNetworkType)(e),`Unknown Infura provider type "${e}".`),yield this.setActiveNetwork(e)}))}setActiveNetwork(e){return b(this,void 0,void 0,(function*(){let t;if(k(this,a,this.state.providerConfig,"f"),(0,E.isInfuraNetworkType)(e)){const r=E.NetworksTicker[e];t={chainId:E.ChainId[e],id:undefined,rpcPrefs:E.BUILT_IN_NETWORKS[e].rpcPrefs,rpcUrl:undefined,nickname:undefined,ticker:r,type:e}}else{if(!Object.keys(this.state.networkConfigurations).includes(e))throw new Error(`networkConfigurationId ${e} does not match a configured networkConfiguration or built-in network type`);t=Object.assign(Object.assign({},this.state.networkConfigurations[e]),{type:E.NetworkType.rpc})}_(this,n,"m",p).call(this),this.update((e=>{e.providerConfig=t})),yield _(this,n,"m",d).call(this)}))}getEIP1559Compatibility(e){return b(this,void 0,void 0,(function*(){if(e)return this.get1559CompatibilityWithNetworkClientId(e);if(!_(this,s,"f"))return!1;const{EIPS:t}=this.state.networksMetadata[this.state.selectedNetworkClientId];if(t[1559]!==undefined)return t[1559];const r=yield _(this,n,"m",f).call(this,this.state.selectedNetworkClientId);return this.update((e=>{r!==undefined&&(e.networksMetadata[e.selectedNetworkClientId].EIPS[1559]=r)})),r}))}get1559CompatibilityWithNetworkClientId(e){return b(this,void 0,void 0,(function*(){let t=this.state.networksMetadata[e];t===undefined&&(yield this.lookupNetwork(e),t=this.state.networksMetadata[e]);const{EIPS:r}=t;return r[1559]}))}resetConnection(){return b(this,void 0,void 0,(function*(){_(this,n,"m",p).call(this),yield _(this,n,"m",d).call(this)}))}getNetworkConfigurationByNetworkClientId(e){if((0,E.isInfuraNetworkType)(e)){const t=`https://${e}.infura.io/v3/${_(this,i,"f")}`;return Object.assign({rpcUrl:t},E.BUILT_IN_NETWORKS[e])}return this.state.networkConfigurations[e]}upsertNetworkConfiguration(e,{referrer:t,source:r,setActive:s=!1}){return b(this,void 0,void 0,(function*(){const i=D(e,["rpcUrl","chainId","ticker","nickname","rpcPrefs"]),{rpcUrl:a,chainId:c,ticker:u}=i;if((0,P.assertIsStrictHexString)(c),!(0,E.isSafeChainId)(c))throw new Error(`Invalid chain ID "${c}": numerical value greater than max safe value.`);if(!a)throw new Error("An rpcUrl is required to add or update network configuration");if(!t||!r)throw new Error("referrer and source are required arguments for adding or updating a network configuration");try{new URL(a)}catch(e){if(e.message.includes("Invalid URL"))throw new Error("rpcUrl must be a valid URL")}if(!u)throw new Error("A ticker is required to add or update networkConfiguration");const l=_(this,n,"m",p).call(this),d=Object.values(this.state.networkConfigurations).find((e=>e.rpcUrl.toLowerCase()===a.toLowerCase())),h=d?d.id:(0,O.v4)(),f=U(h),m=l[x.NetworkClientType.Custom],g=m[f],y=g&&g.configuration.chainId!==c;return y&&g.destroy(),g&&!y||(m[f]=(0,I.createAutoManagedNetworkClient)({type:x.NetworkClientType.Custom,chainId:c,rpcUrl:a,ticker:u})),this.update((e=>{e.networkConfigurations[h]=Object.assign({id:h},i)})),d||_(this,o,"f").call(this,{event:"Custom Network Added",category:"Network",referrer:{url:t},properties:{chain_id:c,symbol:u,source:r}}),s&&(yield this.setActiveNetwork(h)),h}))}removeNetworkConfiguration(e){if(!this.state.networkConfigurations[e])throw new Error(`networkConfigurationId ${e} does not match a configured networkConfiguration`);const t=_(this,n,"m",p).call(this),r=U(e);this.update((t=>{delete t.networkConfigurations[e]}));const s=t[x.NetworkClientType.Custom];s[r].destroy(),delete s[r]}rollbackToPreviousProvider(){return b(this,void 0,void 0,(function*(){_(this,n,"m",p).call(this),this.update((e=>{e.providerConfig=_(this,a,"f")})),yield _(this,n,"m",d).call(this)}))}destroy(){var e;return b(this,void 0,void 0,(function*(){yield null===(e=_(this,u,"f"))||void 0===e?void 0:e.destroy()}))}loadBackup({networkConfigurations:e}){this.update((t=>{t.networkConfigurations=Object.assign(Object.assign({},t.networkConfigurations),e)}))}findNetworkClientIdByChainId(e){const t=this.getNetworkClientRegistry(),r=Object.entries(t).find((([t,r])=>r.configuration.chainId===e));if(r===undefined)throw new Error("Couldn't find networkClientId for chainId");return r[0]}}r.NetworkController=V,s=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,n=new WeakSet,d=function(){return b(this,void 0,void 0,(function*(){this.messagingSystem.publish("NetworkController:networkWillChange",this.state),_(this,n,"m",v).call(this),this.messagingSystem.publish("NetworkController:networkDidChange",this.state),yield this.lookupNetwork()}))},h=function(e){e===undefined&&(e=this.state.selectedNetworkClientId);const t=this.getNetworkClientById(e),r=new A.default(t.provider);return new Promise(((e,t)=>{r.sendAsync({method:"eth_getBlockByNumber",params:["latest",!1]},((r,n)=>{r?t(r):e(n)}))}))},f=function(e){return b(this,void 0,void 0,(function*(){const t=yield _(this,n,"m",h).call(this,e);return t?t.baseFeePerGas!==undefined:undefined}))},p=function(){var e;const t=null!==(e=_(this,l,"f"))&&void 0!==e?e:_(this,n,"m",m).call(this);return k(this,l,t,"f"),t},m=function(){return[..._(this,n,"m",g).call(this),..._(this,n,"m",y).call(this),..._(this,n,"m",w).call(this)].reduce(((e,[t,r,n])=>{const s=(0,I.createAutoManagedNetworkClient)(n);return r in e[t]?e:Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},e[t]),{[r]:s})})}),{[x.NetworkClientType.Infura]:{},[x.NetworkClientType.Custom]:{}})},g=function(){return K(E.InfuraNetworkType).map((e=>{const t=L(e),r={type:x.NetworkClientType.Infura,network:e,infuraProjectId:_(this,i,"f"),chainId:E.BUILT_IN_NETWORKS[e].chainId,ticker:E.BUILT_IN_NETWORKS[e].ticker};return[x.NetworkClientType.Infura,t,r]}))},y=function(){return Object.entries(this.state.networkConfigurations).map((([e,t])=>{if(t.chainId===undefined)throw new Error("chainId must be provided for custom RPC endpoints");if(t.rpcUrl===undefined)throw new Error("rpcUrl must be provided for custom RPC endpoints");const r=U(e),n={type:x.NetworkClientType.Custom,chainId:t.chainId,rpcUrl:t.rpcUrl,ticker:t.ticker};return[x.NetworkClientType.Custom,r,n]}))},w=function(){const{providerConfig:e}=this.state;if(H(e)){F(e);const t=U(e,this.state.networkConfigurations),r={chainId:e.chainId,rpcUrl:e.rpcUrl,type:x.NetworkClientType.Custom,ticker:e.ticker};return[[x.NetworkClientType.Custom,t,r]]}if(q(e))return[];throw new Error(`Unrecognized network type: '${e.type}'`)},v=function(){if(!_(this,l,"f"))throw new Error("initializeProvider must be called first in order to switch the network");const{providerConfig:e}=this.state;let t,r;if(q(e)){const n=x.NetworkClientType.Infura;r=L(e);if(t=_(this,l,"f")[n][r],!t)throw new Error(`Could not find custom network matching ${r}`)}else{if(!H(e))throw new Error("Could not determine type of provider config");{F(e);const n=x.NetworkClientType.Custom;r=U(e,this.state.networkConfigurations);if(t=_(this,l,"f")[n][r],!t)throw new Error(`Could not find built-in network matching ${r}`)}}this.update((e=>{e.selectedNetworkClientId=r,e.networksMetadata[r]===undefined&&(e.networksMetadata[r]={status:R.NetworkStatus.Unknown,EIPS:{}})}));const{provider:n,blockTracker:i}=t;_(this,c,"f")?_(this,c,"f").setTarget(n):k(this,c,(0,C.createEventEmitterProxy)(n),"f"),_(this,u,"f")?_(this,u,"f").setTarget(i):k(this,u,(0,C.createEventEmitterProxy)(i,{eventFilter:"skipInternal"}),"f"),k(this,s,new A.default(_(this,c,"f")),"f")}}}},{package:"@metamask/network-controller",file:"node_modules/@metamask/network-controller/dist/NetworkController.js"}],[1337,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.INFURA_BLOCKED_KEY=r.NetworkStatus=void 0,function(e){e.Unknown="unknown",e.Available="available",e.Unavailable="unavailable",e.Blocked="blocked"}(r.NetworkStatus||(r.NetworkStatus={})),r.INFURA_BLOCKED_KEY="countryBlocked"}}},{package:"@metamask/network-controller",file:"node_modules/@metamask/network-controller/dist/constants.js"}],[1338,{"./create-network-client":1339},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createAutoManagedNetworkClient=void 0;const n=e("./create-network-client"),s="__target__",i={__UNINITIALIZED__:!0};r.createAutoManagedNetworkClient=function(e){let t;const r=new Proxy(i,{get(r,i,o){if(i===s)return null==t?void 0:t.provider;if(null!=t||(t=(0,n.createNetworkClient)(e)),t===undefined)throw new Error("It looks like `createNetworkClient` didn't return anything. Perhaps it's being mocked?");const{provider:a}=t;if(i in a){const e=a[i];return"function"==typeof e?function(...t){return e.apply(this===o?a:this,t)}:e}return undefined},has(r,i){if(i===s)return!0;null!=t||(t=(0,n.createNetworkClient)(e));const{provider:o}=t;return i in o}}),o=new Proxy(i,{get(r,i,o){if(i===s)return null==t?void 0:t.blockTracker;if(null!=t||(t=(0,n.createNetworkClient)(e)),t===undefined)throw new Error("It looks like createNetworkClient returned undefined. Perhaps it's mocked?");const{blockTracker:a}=t;if(i in a){const e=a[i];return"function"==typeof e?function(...t){return e.apply(this===o?a:this,t)}:e}return undefined},has(r,i){if(i===s)return!0;null!=t||(t=(0,n.createNetworkClient)(e));const{blockTracker:o}=t;return i in o}});return{configuration:e,provider:r,blockTracker:o,destroy:()=>{null==t||t.destroy()}}}}}},{package:"@metamask/network-controller",file:"node_modules/@metamask/network-controller/dist/create-auto-managed-network-client.js"}],[1339,{"./types":1342,"@metamask/controller-utils":1344,"@metamask/eth-json-rpc-infura":1092,"@metamask/eth-json-rpc-middleware":1099,"@metamask/eth-json-rpc-provider":1108,"@metamask/json-rpc-engine":1217,"eth-block-tracker":2718},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){this&&this.__awaiter;Object.defineProperty(r,"__esModule",{value:!0}),r.createNetworkClient=void 0;const n=e("@metamask/controller-utils"),s=e("@metamask/eth-json-rpc-infura"),i=e("@metamask/eth-json-rpc-middleware"),o=e("@metamask/eth-json-rpc-provider"),a=e("@metamask/json-rpc-engine"),c=e("eth-block-tracker"),u=e("./types");function l({network:e}){return(0,a.createScaffoldMiddleware)({eth_chainId:n.ChainId[e]})}r.createNetworkClient=function(e){const t=e.type===u.NetworkClientType.Infura?(0,s.createInfuraMiddleware)({network:e.network,projectId:e.infuraProjectId,maxAttempts:5,source:"metamask"}):(0,i.createFetchMiddleware)({btoa:global.btoa,fetch:global.fetch,rpcUrl:e.rpcUrl}),r=(0,o.providerFromMiddleware)(t),n={},h=new c.PollingBlockTracker(Object.assign(Object.assign({},n),{provider:r})),f=e.type===u.NetworkClientType.Infura?function({blockTracker:e,network:t,rpcProvider:r,rpcApiMiddleware:n}){return(0,a.mergeMiddleware)([l({network:t}),(0,i.createBlockCacheMiddleware)({blockTracker:e}),(0,i.createInflightCacheMiddleware)(),(0,i.createBlockRefMiddleware)({blockTracker:e,provider:r}),(0,i.createRetryOnEmptyMiddleware)({blockTracker:e,provider:r}),(0,i.createBlockTrackerInspectorMiddleware)({blockTracker:e}),n])}({blockTracker:h,network:e.network,rpcProvider:r,rpcApiMiddleware:t}):function({blockTracker:e,chainId:t,rpcApiMiddleware:r}){const n=[];return(0,a.mergeMiddleware)([...n,d(t),(0,i.createBlockRefRewriteMiddleware)({blockTracker:e}),(0,i.createBlockCacheMiddleware)({blockTracker:e}),(0,i.createInflightCacheMiddleware)(),(0,i.createBlockTrackerInspectorMiddleware)({blockTracker:e}),r])}({blockTracker:h,chainId:e.chainId,rpcApiMiddleware:t}),p=new a.JsonRpcEngine;return p.push(f),{configuration:e,provider:(0,o.providerFromEngine)(p),blockTracker:h,destroy:()=>{h.destroy()}}};const d=e=>(t,r,n,s)=>"eth_chainId"===t.method?(r.result=e,s()):n()}}},{package:"@metamask/network-controller",file:"node_modules/@metamask/network-controller/dist/create-network-client.js"}],[134,{lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:49,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=49;const r=t.data;return t.data=function(e={}){if(e.PreferencesController){const{metaMetricsId:t,participateInMetaMetrics:r,metaMetricsSendCount:n}=e.PreferencesController;e.MetaMetricsController=e.MetaMetricsController??{},t!==undefined&&(e.MetaMetricsController.metaMetricsId=t,delete e.PreferencesController.metaMetricsId),r!==undefined&&(e.MetaMetricsController.participateInMetaMetrics=r,delete e.PreferencesController.participateInMetaMetrics),n!==undefined&&(e.MetaMetricsController.metaMetricsSendCount=n,delete e.PreferencesController.metaMetricsSendCount)}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/049.js"}],[1340,{"./NetworkController":1336,"./constants":1337,"./types":1342},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.NetworkClientType=void 0,s(e("./NetworkController"),r),s(e("./constants"),r);var i=e("./types");Object.defineProperty(r,"NetworkClientType",{enumerable:!0,get:function(){return i.NetworkClientType}})}}},{package:"@metamask/network-controller",file:"node_modules/@metamask/network-controller/dist/index.js"}],[1341,{"@metamask/utils":1786},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("network-controller")}}},{package:"@metamask/network-controller",file:"node_modules/@metamask/network-controller/dist/logger.js"}],[1342,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.NetworkClientType=void 0,function(e){e.Custom="custom",e.Infura="infura"}(r.NetworkClientType||(r.NetworkClientType={}))}}},{package:"@metamask/network-controller",file:"node_modules/@metamask/network-controller/dist/types.js"}],[1343,{"./types":1347},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=r.ApprovalType=r.ORIGIN_METAMASK=r.OPENSEA_PROXY_URL=r.BUILT_IN_NETWORKS=r.TESTNET_TICKER_SYMBOLS=r.ASSET_TYPES=r.GWEI=r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID=r.ERC1155_METADATA_URI_INTERFACE_ID=r.ERC1155_INTERFACE_ID=r.ERC721_ENUMERABLE_INTERFACE_ID=r.ERC721_METADATA_INTERFACE_ID=r.ERC721_INTERFACE_ID=r.ERC20=r.ERC1155=r.ERC721=r.MAX_SAFE_CHAIN_ID=r.GANACHE_CHAIN_ID=r.IPFS_DEFAULT_GATEWAY_URL=r.FALL_BACK_VS_CURRENCY=r.RPC=void 0;const n=e("./types");r.RPC="rpc",r.FALL_BACK_VS_CURRENCY="ETH",r.IPFS_DEFAULT_GATEWAY_URL="https://cloudflare-ipfs.com/ipfs/",r.GANACHE_CHAIN_ID="0x539",r.MAX_SAFE_CHAIN_ID=0xfffffffffffec,r.ERC721="ERC721",r.ERC1155="ERC1155",r.ERC20="ERC20",r.ERC721_INTERFACE_ID="0x80ac58cd",r.ERC721_METADATA_INTERFACE_ID="0x5b5e139f",r.ERC721_ENUMERABLE_INTERFACE_ID="0x780e9d63",r.ERC1155_INTERFACE_ID="0xd9b67a26",r.ERC1155_METADATA_URI_INTERFACE_ID="0x0e89341c",r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID="0x4e2312e0",r.GWEI="gwei",r.ASSET_TYPES={NATIVE:"NATIVE",TOKEN:"TOKEN",NFT:"NFT",UNKNOWN:"UNKNOWN"},r.TESTNET_TICKER_SYMBOLS={GOERLI:"GoerliETH",SEPOLIA:"SepoliaETH",LINEA_GOERLI:"LineaETH"},r.BUILT_IN_NETWORKS={[n.NetworkType.goerli]:{chainId:n.ChainId.goerli,ticker:n.NetworksTicker.goerli,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.goerli}.etherscan.io`}},[n.NetworkType.sepolia]:{chainId:n.ChainId.sepolia,ticker:n.NetworksTicker.sepolia,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.sepolia}.etherscan.io`}},[n.NetworkType.mainnet]:{chainId:n.ChainId.mainnet,ticker:n.NetworksTicker.mainnet,rpcPrefs:{blockExplorerUrl:"https://etherscan.io"}},[n.NetworkType["linea-goerli"]]:{chainId:n.ChainId["linea-goerli"],ticker:n.NetworksTicker["linea-goerli"],rpcPrefs:{blockExplorerUrl:"https://goerli.lineascan.build"}},[n.NetworkType["linea-mainnet"]]:{chainId:n.ChainId["linea-mainnet"],ticker:n.NetworksTicker["linea-mainnet"],rpcPrefs:{blockExplorerUrl:"https://lineascan.build"}},[n.NetworkType.rpc]:{chainId:undefined,blockExplorerUrl:undefined,ticker:undefined,rpcPrefs:undefined}},r.OPENSEA_PROXY_URL="https://proxy.metafi.codefi.network/opensea/v1/api/v2",r.ORIGIN_METAMASK="metamask",function(e){e.AddEthereumChain="wallet_addEthereumChain",e.ConnectAccounts="connect_accounts",e.EthDecrypt="eth_decrypt",e.EthGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.EthSign="eth_sign",e.EthSignTypedData="eth_signTypedData",e.PersonalSign="personal_sign",e.ResultError="result_error",e.ResultSuccess="result_success",e.SnapDialogAlert="snap_dialog:alert",e.SnapDialogConfirmation="snap_dialog:confirmation",e.SnapDialogPrompt="snap_dialog:prompt",e.SwitchEthereumChain="wallet_switchEthereumChain",e.Transaction="transaction",e.Unlock="unlock",e.WalletConnect="wallet_connect",e.WalletRequestPermissions="wallet_requestPermissions",e.WatchAsset="wallet_watchAsset"}(r.ApprovalType||(r.ApprovalType={})),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP={[n.ChainId.goerli]:n.BuiltInNetworkName.Goerli,[n.ChainId.sepolia]:n.BuiltInNetworkName.Sepolia,[n.ChainId.mainnet]:n.BuiltInNetworkName.Mainnet,[n.ChainId["linea-goerli"]]:n.BuiltInNetworkName.LineaGoerli,[n.ChainId["linea-mainnet"]]:n.BuiltInNetworkName.LineaMainnet,[n.ChainId.aurora]:n.BuiltInNetworkName.Aurora}}}},{package:"@metamask/network-controller>@metamask/controller-utils",file:"node_modules/@metamask/network-controller/node_modules/@metamask/controller-utils/dist/constants.js"}],[1344,{"./constants":1343,"./siwe":1346,"./types":1347,"./util":1348},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./constants"),r),s(e("./util"),r),s(e("./types"),r),s(e("./siwe"),r)}}},{package:"@metamask/network-controller>@metamask/controller-utils",file:"node_modules/@metamask/network-controller/node_modules/@metamask/controller-utils/dist/index.js"}],[1345,{"@metamask/utils":1786},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("controller-utils")}}},{package:"@metamask/network-controller>@metamask/controller-utils",file:"node_modules/@metamask/network-controller/node_modules/@metamask/controller-utils/dist/logger.js"}],[1346,{"./logger":1345,"@spruceid/siwe-parser":1976,buffer:2448,"ethereumjs-util":2816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.detectSIWE=r.isValidSIWEOrigin=r.parseDomainParts=void 0;const n=e("@spruceid/siwe-parser"),s=e("ethereumjs-util"),i=e("./logger"),o=(0,i.createModuleLogger)(i.projectLogger,"detect-siwe");function a(e){try{const n="string"!=typeof(r=e)?r:(0,s.isHexPrefixed)(r)?r.slice(2):r,i=t.from(n,"hex");return 32===i.length?e:i.toString("utf8")}catch(t){return o(t),e}var r}const c={"http:":"80","https:":"443"};r.parseDomainParts=(e,t)=>e.match(/^[^/:]*:\/\//u)?new URL(e):new URL(`${t}//${e}`);r.isValidSIWEOrigin=e=>{var t;try{const{origin:n,siwe:s}=e;if(!n||!(null===(t=null==s?void 0:s.parsedMessage)||void 0===t?void 0:t.domain))return!1;const i=new URL(n),o=(0,r.parseDomainParts)(s.parsedMessage.domain,i.protocol);return 0===o.hostname.localeCompare(i.hostname,undefined,{sensitivity:"accent"})&&(""!==o.port&&o.port!==i.port?""===i.port&&o.port===c[i.protocol]:""===o.username||o.username===i.username)}catch(e){return o(e),!1}};r.detectSIWE=e=>{try{const{data:t}=e,r=a(t);return{isSIWEMessage:!0,parsedMessage:new n.ParsedMessage(r)}}catch(e){return{isSIWEMessage:!1,parsedMessage:null}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/network-controller>@metamask/controller-utils",file:"node_modules/@metamask/network-controller/node_modules/@metamask/controller-utils/dist/siwe.js"}],[1347,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n;Object.defineProperty(r,"__esModule",{value:!0}),r.NetworksTicker=r.ChainId=r.BuiltInNetworkName=r.isInfuraNetworkType=r.isNetworkType=r.NetworkType=r.InfuraNetworkType=void 0,r.InfuraNetworkType={mainnet:"mainnet",goerli:"goerli",sepolia:"sepolia","linea-goerli":"linea-goerli","linea-mainnet":"linea-mainnet"},r.NetworkType=Object.assign(Object.assign({},r.InfuraNetworkType),{rpc:"rpc"}),r.isNetworkType=function(e){return Object.values(r.NetworkType).includes(e)},r.isInfuraNetworkType=function(e){return Object.keys(r.InfuraNetworkType).includes(e)},function(e){e.Mainnet="mainnet",e.Goerli="goerli",e.Sepolia="sepolia",e.LineaGoerli="linea-goerli",e.LineaMainnet="linea-mainnet",e.Aurora="aurora"}(n=r.BuiltInNetworkName||(r.BuiltInNetworkName={})),r.ChainId={[n.Mainnet]:"0x1",[n.Goerli]:"0x5",[n.Sepolia]:"0xaa36a7",[n.Aurora]:"0x4e454152",[n.LineaGoerli]:"0xe704",[n.LineaMainnet]:"0xe708"},function(e){e.mainnet="ETH",e.goerli="GoerliETH",e.sepolia="SepoliaETH",e["linea-goerli"]="LineaETH",e["linea-mainnet"]="ETH",e.rpc=""}(r.NetworksTicker||(r.NetworksTicker={}))}}},{package:"@metamask/network-controller>@metamask/controller-utils",file:"node_modules/@metamask/network-controller/node_modules/@metamask/controller-utils/dist/types.js"}],[1348,{"./constants":1343,"@metamask/ethjs-unit":1193,"@metamask/utils":1786,buffer:2448,"eth-ens-namehash":2726,"ethereumjs-util":2816,"fast-deep-equal":2896},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.isValidJson=r.isNonEmptyArray=r.isPlainObject=r.convertHexToDecimal=r.query=r.normalizeEnsName=r.timeoutFetch=r.fetchWithErrorHandling=r.handleFetch=r.successfulFetch=r.isSmartContractCode=r.isValidHexAddress=r.toChecksumHexAddress=r.safelyExecuteWithTimeout=r.safelyExecute=r.toHex=r.fromHex=r.hexToText=r.hexToBN=r.getBuyURL=r.weiHexToGweiDec=r.gweiDecToWEIBN=r.fractionBN=r.BNToHex=r.isSafeChainId=void 0;const i=e("@metamask/ethjs-unit"),o=e("@metamask/utils"),a=s(e("eth-ens-namehash")),c=e("ethereumjs-util"),u=s(e("fast-deep-equal")),l=e("./constants"),d=new Error("timeout");function h(e){return e?new c.BN((0,c.stripHexPrefix)(e),16):new c.BN(0)}function f(e,t){return n(this,void 0,void 0,(function*(){const r=yield fetch(e,t);if(!r.ok)throw new Error(`Fetch failed with status '${r.status}' for request '${String(e)}'`);return r}))}function p(e,t){return n(this,void 0,void 0,(function*(){const r=yield f(e,t);return yield r.json()}))}r.isSafeChainId=function(e){if(!(0,c.isHexString)(e))return!1;const t=Number.parseInt(e);return Number.isSafeInteger(t)&&t>0&&t<=l.MAX_SAFE_CHAIN_ID},r.BNToHex=function(e){return(0,c.addHexPrefix)(e.toString(16))},r.fractionBN=function(e,t,r){const n=new c.BN(t),s=new c.BN(r);return e.mul(n).div(s)},r.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new c.BN(0);const t=e.toString().split("."),r=t[0]||"0";let n=t[1]||"";if(!n)return(0,i.toWei)(r,"gwei");if(n.length<=9)return(0,i.toWei)(`${r}.${n}`,"gwei");const s=n.slice(9)[0];n=n.slice(0,9);let o=(0,i.toWei)(`${r}.${n}`,"gwei");return Number(s)>=5&&(o=o.add(new c.BN(1))),o},r.weiHexToGweiDec=function(e){const t=new c.BN((0,c.stripHexPrefix)(e),16);return(0,i.fromWei)(t,"gwei")},r.getBuyURL=function(e="1",t,r=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${r}&address=${t}&crypto_currency=ETH`;case"5":return"https://goerli-faucet.slock.it/";case"11155111":return"https://sepoliafaucet.net/";default:return undefined}},r.hexToBN=h,r.hexToText=function(e){try{const r=(0,c.stripHexPrefix)(e);return t.from(r,"hex").toString("utf8")}catch(t){return e}},r.fromHex=function(e){return c.BN.isBN(e)?e:new c.BN(h(e).toString(10))},r.toHex=function(e){return"string"==typeof e&&(0,o.isStrictHexString)(e)?e:`0x${c.BN.isBN(e)?e.toString(16):new c.BN(e.toString(),10).toString(16)}`},r.safelyExecute=function(e,t=!1){return n(this,void 0,void 0,(function*(){try{return yield e()}catch(e){return t&&console.error(e),undefined}}))},r.safelyExecuteWithTimeout=function(e,t=!1,r=500){return n(this,void 0,void 0,(function*(){try{return yield Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(d)}),r)))])}catch(e){return t&&console.error(e),undefined}}))},r.toChecksumHexAddress=function(e){const t=(0,c.addHexPrefix)(e);return(0,c.isHexString)(t)?(0,c.toChecksumAddress)(t):t},r.isValidHexAddress=function(e,{allowNonPrefixed:t=!0}={}){const r=t?(0,c.addHexPrefix)(e):e;return!!(0,c.isHexString)(r)&&(0,c.isValidAddress)(r)},r.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},r.successfulFetch=f,r.handleFetch=p,r.fetchWithErrorHandling=function({url:e,options:t,timeout:r,errorCodesToCatch:s}){return n(this,void 0,void 0,(function*(){let n;try{n=r?Promise.race([yield p(e,t),new Promise(((e,t)=>setTimeout((()=>{t(d)}),r)))]):yield p(e,t)}catch(e){!function(e,t=[]){var r;if(!e)return;const n=t.some((t=>{var r;return null===(r=e.message)||void 0===r?void 0:r.includes(`Fetch failed with status '${t}'`)}));if(!(e instanceof Error&&(n||(null===(r=e.message)||void 0===r?void 0:r.includes("Failed to fetch"))||e===d)))throw e;console.error(e)}(e,s)}return n}))},r.timeoutFetch=function(e,t,r=500){return n(this,void 0,void 0,(function*(){return Promise.race([f(e,t),new Promise(((e,t)=>setTimeout((()=>{t(d)}),r)))])}))},r.normalizeEnsName=function(e){if(e&&"string"==typeof e)try{const t=a.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},r.query=function(e,t,r=[]){return new Promise(((n,s)=>{const i=(e,t)=>{e?s(e):n(t)};t in e&&"function"==typeof e[t]?e[t](...r,i):e.sendAsync({method:t,params:r},i)}))};r.convertHexToDecimal=(e="0x0")=>(0,c.isHexString)(e)?parseInt(e,16):Number(e)?Number(e):0,r.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)},r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isValidJson=function(e){try{return(0,u.default)(e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/network-controller>@metamask/controller-utils",file:"node_modules/@metamask/network-controller/node_modules/@metamask/controller-utils/dist/util.js"}],[1349,{"@metamask/base-controller":1354,"@metamask/utils":1363,nanoid:1373},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.NotificationController=void 0;const n=e("nanoid"),s=e("@metamask/utils"),i=e("@metamask/base-controller"),o="NotificationController",a={notifications:{persist:!0,anonymous:!1}},c={notifications:{}};class u extends i.BaseControllerV2{constructor({messenger:e,state:t}){super({name:o,metadata:a,messenger:e,state:Object.assign(Object.assign({},c),t)}),this.messagingSystem.registerActionHandler(`${o}:show`,((e,t)=>this.show(e,t))),this.messagingSystem.registerActionHandler(`${o}:dismiss`,(e=>this.dismiss(e))),this.messagingSystem.registerActionHandler(`${o}:markRead`,(e=>this.markRead(e))),this.messagingSystem.registerActionHandler(`${o}:clear`,(()=>this.clear()))}show(e,t){const r=(0,n.nanoid)(),s={id:r,origin:e,createdDate:Date.now(),readDate:null,message:t};this.update((e=>{e.notifications[r]=s}))}dismiss(e){this.update((t=>{for(const r of e)(0,s.hasProperty)(t.notifications,r)&&delete t.notifications[r]}))}markRead(e){this.update((t=>{for(const r of e)(0,s.hasProperty)(t.notifications,r)&&(t.notifications[r].readDate=Date.now())}))}clear(){this.update((()=>Object.assign({},c)))}}r.NotificationController=u}}},{package:"@metamask/notification-controller",file:"node_modules/@metamask/notification-controller/dist/NotificationController.js"}],[135,{lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");const s=["METASWAP_GAS_PRICE_ESTIMATES_LAST_RETRIEVED","METASWAP_GAS_PRICE_ESTIMATES","cachedFetch","BASIC_PRICE_ESTIMATES_LAST_RETRIEVED","BASIC_PRICE_ESTIMATES","BASIC_GAS_AND_TIME_API_ESTIMATES","BASIC_GAS_AND_TIME_API_ESTIMATES_LAST_RETRIEVED","GAS_API_ESTIMATES_LAST_RETRIEVED","GAS_API_ESTIMATES"];r.default={version:50,async migrate(e){const t=(0,n.cloneDeep)(e);return t.meta.version=50,s.forEach((e=>{var t;return null===(t=window.localStorage)||void 0===t?void 0:t.removeItem(e)})),t}}}}},{package:"$root$",file:"app/scripts/migrations/050.js"}],[1350,{"./NotificationController":1349},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./NotificationController"),r)}}},{package:"@metamask/notification-controller",file:"node_modules/@metamask/notification-controller/dist/index.js"}],[1351,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BaseController=void 0;class n{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e in this.internalConfig)void 0!==this.internalConfig[e]&&(this[e]=this.internalConfig[e])}else for(const t in e)void 0!==this.internalConfig[t]&&(this.internalConfig[t]=e[t],this[t]=e[t])}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}}r.BaseController=n,r.default=n}}},{package:"@metamask/notification-controller>@metamask/base-controller",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/base-controller/dist/BaseController.js"}],[1352,{immer:3190},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseController=void 0;const n=e("immer");(0,n.enablePatches)();function s(e,t,r){return Object.keys(e).reduce(((n,s)=>{try{const i=t[s];if(!i)throw new Error(`No metadata found for '${s}'`);const o=i[r],a=e[s];return"function"==typeof o?n[s]=o(a):o&&(n[s]=a),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:n}){this.messagingSystem=e,this.name=r,this.internalState=n,this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state))}get state(){return this.internalState}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,s]=n.produceWithPatches(this.internalState,e);return this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:s}}applyPatches(e){const t=(0,n.applyPatches)(this.internalState,e);this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return s(e,t,"anonymous")},r.getPersistentState=function(e,t){return s(e,t,"persist")}}}},{package:"@metamask/notification-controller>@metamask/base-controller",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/base-controller/dist/BaseControllerV2.js"}],[1353,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ControllerMessenger=r.RestrictedControllerMessenger=void 0;class n{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:n}){this.controllerMessenger=e,this.controllerName=t,this.allowedActions=r||null,this.allowedEvents=n||null}registerActionHandler(e,t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed registering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.registerActionHandler(e,t)}unregisterActionHandler(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed unregistering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.unregisterActionHandler(e)}call(e,...t){if(null===this.allowedActions)throw new Error("No actions allowed");if(!this.allowedActions.includes(e))throw new Error(`Action missing from allow list: ${e}`);return this.controllerMessenger.call(e,...t)}publish(e,...t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed publishing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.publish(e,...t)}subscribe(e,t,r){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);return r?this.controllerMessenger.subscribe(e,t,r):this.controllerMessenger.subscribe(e,t)}unsubscribe(e,t){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);this.controllerMessenger.unsubscribe(e,t)}clearEventSubscriptions(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed clearing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.clearEventSubscriptions(e)}}r.RestrictedControllerMessenger=n;r.ControllerMessenger=class{constructor(){this.actions=new Map,this.events=new Map,this.eventPayloadCache=new Map}registerActionHandler(e,t){if(this.actions.has(e))throw new Error(`A handler for ${e} has already been registered`);this.actions.set(e,t)}unregisterActionHandler(e){this.actions.delete(e)}clearActions(){this.actions.clear()}call(e,...t){const r=this.actions.get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}publish(e,...t){const r=this.events.get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=this.eventPayloadCache.get(e),s=n(...t);s!==r&&(this.eventPayloadCache.set(e,s),e(s,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=this.events.get(e);n||(n=new Map,this.events.set(e,n)),n.set(t,r)}unsubscribe(e,t){const r=this.events.get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&this.eventPayloadCache.delete(t),r.delete(t)}clearEventSubscriptions(e){this.events.delete(e)}clearSubscriptions(){this.events.clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new n({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/notification-controller>@metamask/base-controller",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/base-controller/dist/ControllerMessenger.js"}],[1354,{"./BaseController":1351,"./BaseControllerV2":1352,"./ControllerMessenger":1353},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseControllerV2=r.BaseController=void 0;var i=e("./BaseController");Object.defineProperty(r,"BaseController",{enumerable:!0,get:function(){return i.BaseController}});var o=e("./BaseControllerV2");Object.defineProperty(r,"BaseControllerV2",{enumerable:!0,get:function(){return o.BaseController}}),Object.defineProperty(r,"getAnonymizedState",{enumerable:!0,get:function(){return o.getAnonymizedState}}),Object.defineProperty(r,"getPersistentState",{enumerable:!0,get:function(){return o.getPersistentState}}),s(e("./ControllerMessenger"),r)}}},{package:"@metamask/notification-controller>@metamask/base-controller",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/base-controller/dist/index.js"}],[1355,{superstruct:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.assertExhaustive=r.assertStruct=r.assert=r.AssertionError=void 0;const n=e("superstruct");function s(e,t){return r=e,Boolean("string"==typeof(null===(s=null===(n=null==r?void 0:r.prototype)||void 0===n?void 0:n.constructor)||void 0===s?void 0:s.name))?new e({message:t}):e({message:t});var r,n,s}class i extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}r.AssertionError=i,r.assert=function(e,t="Assertion failed.",r=i){if(!e){if(t instanceof Error)throw t;throw s(r,t)}},r.assertStruct=function(e,t,r="Assertion failed",o=i){try{(0,n.assert)(e,t)}catch(e){throw s(o,`${r}: ${function(e){const t=function(e){return"object"==typeof e&&null!==e&&"message"in e}(e)?e.message:String(e);return t.endsWith(".")?t.slice(0,-1):t}(e)}.`)}},r.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/assert.js"}],[1356,{"./assert":1355,superstruct:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.base64=void 0;const n=e("superstruct"),s=e("./assert");r.base64=(e,t={})=>{var r,i;const o=null!==(r=t.paddingRequired)&&void 0!==r&&r,a=null!==(i=t.characterSet)&&void 0!==i?i:"base64";let c,u;return"base64"===a?c=String.raw`[A-Za-z0-9+\/]`:((0,s.assert)("base64url"===a),c=String.raw`[-_A-Za-z0-9]`),u=o?new RegExp(`^(?:${c}{4})*(?:${c}{3}=|${c}{2}==)?$`,"u"):new RegExp(`^(?:${c}{4})*(?:${c}{2,3}|${c}{3}=|${c}{2}==)?$`,"u"),(0,n.pattern)(e,u)}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/base64.js"}],[1357,{"./assert":1355,"./hex":1362,buffer:2448},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.createDataView=r.concatBytes=r.valueToBytes=r.stringToBytes=r.numberToBytes=r.signedBigIntToBytes=r.bigIntToBytes=r.hexToBytes=r.bytesToString=r.bytesToNumber=r.bytesToSignedBigInt=r.bytesToBigInt=r.bytesToHex=r.assertIsBytes=r.isBytes=void 0;const n=e("./assert"),s=e("./hex"),i=48,o=58,a=87;const c=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function u(e){return e instanceof Uint8Array}function l(e){(0,n.assert)(u(e),"Value must be a Uint8Array.")}function d(e){if(l(e),0===e.length)return"0x";const t=c(),r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[e[n]];return(0,s.add0x)(r.join(""))}function h(e){l(e);const t=d(e);return BigInt(t)}function f(e){var t;if("0x"===(null===(t=null==e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e)))return new Uint8Array;(0,s.assertIsHexString)(e);const r=(0,s.remove0x)(e).toLowerCase(),n=r.length%2==0?r:`0${r}`,c=new Uint8Array(n.length/2);for(let e=0;e<c.length;e++){const t=n.charCodeAt(2*e),r=n.charCodeAt(2*e+1),s=t-(t<o?i:a),u=r-(r<o?i:a);c[e]=16*s+u}return c}function p(e){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return f(e.toString(16))}function m(e){(0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return f(e.toString(16))}function g(e){return(0,n.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function y(e){if("bigint"==typeof e)return p(e);if("number"==typeof e)return m(e);if("string"==typeof e)return e.startsWith("0x")?f(e):g(e);if(u(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}r.isBytes=u,r.assertIsBytes=l,r.bytesToHex=d,r.bytesToBigInt=h,r.bytesToSignedBigInt=function(e){l(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)},r.bytesToNumber=function(e){l(e);const t=h(e);return(0,n.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},r.bytesToString=function(e){return l(e),(new TextDecoder).decode(e)},r.hexToBytes=f,r.bigIntToBytes=p,r.signedBigIntToBytes=function(e,t){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)("number"==typeof t,"Byte length must be a number."),(0,n.assert)(t>0,"Byte length must be greater than 0."),(0,n.assert)(function(e,t){(0,n.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let r=e;const s=new Uint8Array(t);for(let e=0;e<s.length;e++)s[e]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return s.reverse()},r.numberToBytes=m,r.stringToBytes=g,r.valueToBytes=y,r.concatBytes=function(e){const t=new Array(e.length);let r=0;for(let n=0;n<e.length;n++){const s=y(e[n]);t[n]=s,r+=s.length}const n=new Uint8Array(r);for(let e=0,r=0;e<t.length;e++)n.set(t[e],r),r+=t[e].length;return n},r.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/bytes.js"}],[1358,{"./base64":1356,superstruct:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ChecksumStruct=void 0;const n=e("superstruct"),s=e("./base64");r.ChecksumStruct=(0,n.size)((0,s.base64)((0,n.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/checksum.js"}],[1359,{"./assert":1355,"./bytes":1357,"./hex":1362,superstruct:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createHex=r.createBytes=r.createBigInt=r.createNumber=void 0;const n=e("superstruct"),s=e("./assert"),i=e("./bytes"),o=e("./hex"),a=(0,n.union)([(0,n.number)(),(0,n.bigint)(),(0,n.string)(),o.StrictHexStruct]),c=(0,n.coerce)((0,n.number)(),a,Number),u=(0,n.coerce)((0,n.bigint)(),a,BigInt),l=((0,n.union)([o.StrictHexStruct,(0,n.instance)(Uint8Array)]),(0,n.coerce)((0,n.instance)(Uint8Array),(0,n.union)([o.StrictHexStruct]),i.hexToBytes)),d=(0,n.coerce)(o.StrictHexStruct,(0,n.instance)(Uint8Array),i.bytesToHex);r.createNumber=function(e){try{const t=(0,n.create)(e,c);return(0,s.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof n.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},r.createBigInt=function(e){try{return(0,n.create)(e,u)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},r.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,n.create)(e,l)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},r.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,n.create)(e,d)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/coercers.js"}],[136,{"../../../shared/constants/network":4064,lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/network");r.default={version:51,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=51;const r=t.data;return t.data=function(e){var t,r;const{chainId:n,type:i}=(null==e||null===(t=e.NetworkController)||void 0===t?void 0:t.provider)||{},o=null===(r=s.BUILT_IN_NETWORKS[i])||void 0===r?void 0:r.chainId;o&&n!==o&&(e.NetworkController.provider.chainId=o);return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/051.js"}],[1360,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},o=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.FrozenSet=r.FrozenMap=void 0;class a{constructor(e){n.set(this,void 0),i(this,n,new Map(e),"f"),Object.freeze(this)}get size(){return o(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return o(this,n,"f")[Symbol.iterator]()}entries(){return o(this,n,"f").entries()}forEach(e,t){return o(this,n,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}get(e){return o(this,n,"f").get(e)}has(e){return o(this,n,"f").has(e)}keys(){return o(this,n,"f").keys()}values(){return o(this,n,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}r.FrozenMap=a;class c{constructor(e){s.set(this,void 0),i(this,s,new Set(e),"f"),Object.freeze(this)}get size(){return o(this,s,"f").size}[(s=new WeakMap,Symbol.iterator)](){return o(this,s,"f")[Symbol.iterator]()}entries(){return o(this,s,"f").entries()}forEach(e,t){return o(this,s,"f").forEach(((r,n,s)=>e.call(t,r,n,this)))}has(e){return o(this,s,"f").has(e)}keys(){return o(this,s,"f").keys()}values(){return o(this,s,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}r.FrozenSet=c,Object.freeze(a),Object.freeze(a.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/collections.js"}],[1361,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/encryption-types.js"}],[1362,{"./assert":1355,superstruct:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.remove0x=r.add0x=r.assertIsStrictHexString=r.assertIsHexString=r.isStrictHexString=r.isHexString=r.StrictHexStruct=r.HexStruct=void 0;const n=e("superstruct"),s=e("./assert");function i(e){return(0,n.is)(e,r.HexStruct)}function o(e){return(0,n.is)(e,r.StrictHexStruct)}r.HexStruct=(0,n.pattern)((0,n.string)(),/^(?:0x)?[0-9a-f]+$/iu),r.StrictHexStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]+$/iu),r.isHexString=i,r.isStrictHexString=o,r.assertIsHexString=function(e){(0,s.assert)(i(e),"Value must be a hexadecimal string.")},r.assertIsStrictHexString=function(e){(0,s.assert)(o(e),'Value must be a hexadecimal string, starting with "0x".')},r.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},r.remove0x=function(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/hex.js"}],[1363,{"./assert":1355,"./base64":1356,"./bytes":1357,"./checksum":1358,"./coercers":1359,"./collections":1360,"./encryption-types":1361,"./hex":1362,"./json":1364,"./keyring":1365,"./logging":1366,"./misc":1367,"./number":1368,"./opaque":1369,"./time":1370,"./transaction-types":1371,"./versions":1372},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./assert"),r),s(e("./base64"),r),s(e("./bytes"),r),s(e("./checksum"),r),s(e("./coercers"),r),s(e("./collections"),r),s(e("./encryption-types"),r),s(e("./hex"),r),s(e("./json"),r),s(e("./keyring"),r),s(e("./logging"),r),s(e("./misc"),r),s(e("./number"),r),s(e("./opaque"),r),s(e("./time"),r),s(e("./transaction-types"),r),s(e("./versions"),r)}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/index.js"}],[1364,{"./assert":1355,superstruct:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getJsonRpcIdValidator=r.assertIsJsonRpcError=r.isJsonRpcError=r.assertIsJsonRpcFailure=r.isJsonRpcFailure=r.assertIsJsonRpcSuccess=r.isJsonRpcSuccess=r.assertIsJsonRpcResponse=r.isJsonRpcResponse=r.assertIsPendingJsonRpcResponse=r.isPendingJsonRpcResponse=r.JsonRpcResponseStruct=r.JsonRpcFailureStruct=r.JsonRpcSuccessStruct=r.PendingJsonRpcResponseStruct=r.assertIsJsonRpcRequest=r.isJsonRpcRequest=r.assertIsJsonRpcNotification=r.isJsonRpcNotification=r.JsonRpcNotificationStruct=r.JsonRpcRequestStruct=r.JsonRpcParamsStruct=r.JsonRpcErrorStruct=r.JsonRpcIdStruct=r.JsonRpcVersionStruct=r.jsonrpc2=r.getJsonSize=r.isValidJson=r.JsonStruct=r.UnsafeJsonStruct=void 0;const n=e("superstruct"),s=e("./assert");r.UnsafeJsonStruct=(0,n.union)([(0,n.literal)(null),(0,n.boolean)(),(0,n.define)("finite number",(e=>(0,n.is)(e,(0,n.number)())&&Number.isFinite(e))),(0,n.string)(),(0,n.array)((0,n.lazy)((()=>r.UnsafeJsonStruct))),(0,n.record)((0,n.string)(),(0,n.lazy)((()=>r.UnsafeJsonStruct)))]),r.JsonStruct=(0,n.define)("Json",((e,t)=>{function n(e,r){const n=[...r.validator(e,t)];return!(n.length>0)||n}try{const t=n(e,r.UnsafeJsonStruct);return!0!==t?t:n(JSON.parse(JSON.stringify(e)),r.UnsafeJsonStruct)}catch(e){return e instanceof RangeError&&"Circular reference detected"}})),r.isValidJson=function(e){return(0,n.is)(e,r.JsonStruct)},r.getJsonSize=function(e){(0,s.assertStruct)(e,r.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},r.jsonrpc2="2.0",r.JsonRpcVersionStruct=(0,n.literal)(r.jsonrpc2),r.JsonRpcIdStruct=(0,n.nullable)((0,n.union)([(0,n.number)(),(0,n.string)()])),r.JsonRpcErrorStruct=(0,n.object)({code:(0,n.integer)(),message:(0,n.string)(),data:(0,n.optional)(r.JsonStruct),stack:(0,n.optional)((0,n.string)())}),r.JsonRpcParamsStruct=(0,n.optional)((0,n.union)([(0,n.record)((0,n.string)(),r.JsonStruct),(0,n.array)(r.JsonStruct)])),r.JsonRpcRequestStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:r.JsonRpcParamsStruct}),r.JsonRpcNotificationStruct=(0,n.omit)(r.JsonRpcRequestStruct,["id"]),r.isJsonRpcNotification=function(e){return(0,n.is)(e,r.JsonRpcNotificationStruct)},r.assertIsJsonRpcNotification=function(e,t){(0,s.assertStruct)(e,r.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},r.isJsonRpcRequest=function(e){return(0,n.is)(e,r.JsonRpcRequestStruct)},r.assertIsJsonRpcRequest=function(e,t){(0,s.assertStruct)(e,r.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},r.PendingJsonRpcResponseStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:(0,n.optional)((0,n.unknown)()),error:(0,n.optional)(r.JsonRpcErrorStruct)}),r.JsonRpcSuccessStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:r.JsonStruct}),r.JsonRpcFailureStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,error:r.JsonRpcErrorStruct}),r.JsonRpcResponseStruct=(0,n.union)([r.JsonRpcSuccessStruct,r.JsonRpcFailureStruct]),r.isPendingJsonRpcResponse=function(e){return(0,n.is)(e,r.PendingJsonRpcResponseStruct)},r.assertIsPendingJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},r.isJsonRpcResponse=function(e){return(0,n.is)(e,r.JsonRpcResponseStruct)},r.assertIsJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,r.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},r.isJsonRpcSuccess=function(e){return(0,n.is)(e,r.JsonRpcSuccessStruct)},r.assertIsJsonRpcSuccess=function(e,t){(0,s.assertStruct)(e,r.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},r.isJsonRpcFailure=function(e){return(0,n.is)(e,r.JsonRpcFailureStruct)},r.assertIsJsonRpcFailure=function(e,t){(0,s.assertStruct)(e,r.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},r.isJsonRpcError=function(e){return(0,n.is)(e,r.JsonRpcErrorStruct)},r.assertIsJsonRpcError=function(e,t){(0,s.assertStruct)(e,r.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},r.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:r,permitNull:n}=Object.assign({permitEmptyString:!0,permitFractions:!1,permitNull:!0},e);return e=>Boolean("number"==typeof e&&(r||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||n&&null===e)}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/json.js"}],[1365,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/keyring.js"}],[1366,{debug:2674},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.createProjectLogger=void 0;const s=(0,n(e("debug")).default)("metamask");r.createProjectLogger=function(e){return s.extend(e)},r.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/logging.js"}],[1367,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.calculateNumberSize=r.calculateStringSize=r.isASCII=r.isPlainObject=r.ESCAPE_CHARACTERS_REGEXP=r.JsonSize=r.hasProperty=r.isObject=r.isNullOrUndefined=r.isNonEmptyArray=void 0,r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isNullOrUndefined=function(e){return null===e||e===undefined},r.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function n(e){return e.charCodeAt(0)<=127}r.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(r.JsonSize||(r.JsonSize={})),r.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,r.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},r.isASCII=n,r.calculateStringSize=function(e){var t;return e.split("").reduce(((e,t)=>n(t)?e+1:e+2),0)+(null!==(t=e.match(r.ESCAPE_CHARACTERS_REGEXP))&&void 0!==t?t:[]).length},r.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/misc.js"}],[1368,{"./assert":1355,"./hex":1362},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hexToBigInt=r.hexToNumber=r.bigIntToHex=r.numberToHex=void 0;const n=e("./assert"),s=e("./hex");r.numberToHex=e=>((0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,s.add0x)(e.toString(16)));r.bigIntToHex=e=>((0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=0,"Value must be a non-negative bigint."),(0,s.add0x)(e.toString(16)));r.hexToNumber=e=>{(0,s.assertIsHexString)(e);const t=parseInt(e,16);return(0,n.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};r.hexToBigInt=e=>((0,s.assertIsHexString)(e),BigInt((0,s.add0x)(e)))}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/number.js"}],[1369,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/opaque.js"}],[137,{"../../../shared/constants/network":4064,lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/network");r.default={version:52,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=52;const r=t.data;return t.data=function(e={}){if(e.PreferencesController){const{accountTokens:t,accountHiddenTokens:r,frequentRpcListDetail:n}=e.PreferencesController,i={},o={};if(t&&Object.keys(t).length>0){for(const e of Object.keys(t)){i[e]={},t[e][s.NETWORK_TYPES.RPC]&&n.forEach((r=>{i[e][r.chainId]=t[e][s.NETWORK_TYPES.RPC]}));for(const r of Object.keys(t[e]))switch(r){case s.NETWORK_TYPES.MAINNET:i[e][s.CHAIN_IDS.MAINNET]=t[e][s.NETWORK_TYPES.MAINNET];break;case"ropsten":i[e]["0x3"]=t[e].ropsten;break;case"rinkeby":i[e]["0x4"]=t[e].rinkeby;break;case s.NETWORK_TYPES.GOERLI:i[e][s.CHAIN_IDS.GOERLI]=t[e][s.NETWORK_TYPES.GOERLI];break;case"kovan":i[e]["0x2a"]=t[e].kovan}}e.PreferencesController.accountTokens=i}if(r&&Object.keys(r).length>0){for(const e of Object.keys(r)){o[e]={},r[e][s.NETWORK_TYPES.RPC]&&n.forEach((t=>{o[e][t.chainId]=r[e][s.NETWORK_TYPES.RPC]}));for(const t of Object.keys(r[e]))switch(t){case s.NETWORK_TYPES.MAINNET:o[e][s.CHAIN_IDS.MAINNET]=r[e][s.NETWORK_TYPES.MAINNET];break;case"ropsten":o[e]["0x3"]=r[e].ropsten;break;case"rinkeby":o[e]["0x4"]=r[e].rinkeby;break;case s.NETWORK_TYPES.GOERLI:o[e][s.CHAIN_IDS.GOERLI]=r[e][s.NETWORK_TYPES.GOERLI];break;case"kovan":o[e]["0x2a"]=r[e].kovan}}e.PreferencesController.accountHiddenTokens=o}}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/052.js"}],[1370,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.timeSince=r.inMilliseconds=r.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(r.Duration||(r.Duration={}));const n=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};r.inMilliseconds=function(e,t){return n(e,"count"),e*t},r.timeSince=function(e){return n(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/time.js"}],[1371,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/transaction-types.js"}],[1372,{"./assert":1355,semver:3872,superstruct:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.satisfiesVersionRange=r.gtRange=r.gtVersion=r.assertIsSemVerRange=r.assertIsSemVerVersion=r.isValidSemVerRange=r.isValidSemVerVersion=r.VersionRangeStruct=r.VersionStruct=void 0;const n=e("semver"),s=e("superstruct"),i=e("./assert");r.VersionStruct=(0,s.refine)((0,s.string)(),"Version",(e=>null!==(0,n.valid)(e)||`Expected SemVer version, got "${e}"`)),r.VersionRangeStruct=(0,s.refine)((0,s.string)(),"Version range",(e=>null!==(0,n.validRange)(e)||`Expected SemVer range, got "${e}"`)),r.isValidSemVerVersion=function(e){return(0,s.is)(e,r.VersionStruct)},r.isValidSemVerRange=function(e){return(0,s.is)(e,r.VersionRangeStruct)},r.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,r.VersionStruct)},r.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,r.VersionRangeStruct)},r.gtVersion=function(e,t){return(0,n.gt)(e,t)},r.gtRange=function(e,t){return(0,n.gtr)(e,t)},r.satisfiesVersionRange=function(e,t){return(0,n.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/versions.js"}],[1373,{"./url-alphabet/index.cjs":1374},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){let{urlAlphabet:n}=e("./url-alphabet/index.cjs"),s=e=>crypto.getRandomValues(new Uint8Array(e)),i=(e,t,r)=>{let n=(2<<Math.log(e.length-1)/Math.LN2)-1,s=-~(1.6*n*t/e.length);return(i=t)=>{let o="";for(;;){let t=r(s),a=s;for(;a--;)if(o+=e[t[a]&n]||"",o.length===i)return o}}};t.exports={nanoid:(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),""),customAlphabet:(e,t=21)=>i(e,t,s),customRandom:i,urlAlphabet:n,random:s}}}},{package:"@metamask/notification-controller>nanoid",file:"node_modules/@metamask/notification-controller/node_modules/nanoid/index.browser.cjs"}],[1374,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={urlAlphabet:"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"}}}},{package:"@metamask/notification-controller>nanoid",file:"node_modules/@metamask/notification-controller/node_modules/nanoid/url-alphabet/index.cjs"}],[138,{"@metamask/transaction-controller":1733,lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/transaction-controller");r.default={version:53,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=53;const r=t.data;return t.data=function(e){var t,r;const n=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions,i=null==e||null===(r=e.IncomingTransactionsController)||void 0===r?void 0:r.incomingTransactions;Array.isArray(n)&&n.forEach((e=>{e&&(e.type!==s.TransactionType.retry&&e.type!==s.TransactionType.cancel&&(e.type=e.transactionCategory),delete e.transactionCategory)}));if(i){Object.entries(i).forEach((([t,r])=>{r&&(delete r.transactionCategory,e.IncomingTransactionsController.incomingTransactions[t]={...r,type:s.TransactionType.incoming})}))}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/053.js"}],[139,{lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");function s(e){return"number"==typeof e||"string"==typeof e&&e.match(/^(0x)?\d+$/u)}r.default={version:54,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=54;const r=function(e){const t=e;if(!t.PreferencesController)return t;const r=t.PreferencesController.tokens||[],n=r.filter((({decimals:e})=>s(e)));for(const e of n)"string"==typeof e.decimals&&(e.decimals=parseInt(e.decimals));t.PreferencesController.tokens=n;const{accountTokens:i}=t.PreferencesController;if(i&&"object"==typeof i)for(const e of Object.keys(i)){const t=i[e];if(t&&"object"==typeof t)for(const e of Object.keys(t)){const r=(t[e]||[]).filter((({decimals:e})=>s(e)));for(const e of r)"string"==typeof e.decimals&&(e.decimals=parseInt(e.decimals));t[e]=r}}return t.PreferencesController.accountTokens=i,t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/054.js"}],[1393,{"./ObservableStore":1395},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ComposedStore=void 0;const n=e("./ObservableStore");class s extends n.ObservableStore{constructor(e){super({}),this._children=e||{},Object.keys(this._children).forEach((e=>{const t=this._children[e];this._addChild(e,t)}))}_addChild(e,t){const r=t=>{const r=this.getState();r[e]=t,this.putState(r)};t.subscribe(r),r(t.getState())}}r.ComposedStore=s}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/ComposedStore.js"}],[1394,{"./ObservableStore":1395},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MergedStore=void 0;const n=e("./ObservableStore");class s extends n.ObservableStore{constructor(e=[]){super({}),this._children=e,e.forEach((e=>this._addChild(e))),this._updateWholeState()}_addChild(e){e.subscribe((()=>this._updateWholeState()))}_updateWholeState(){const e=this._children.map((e=>e.getState())),t=Object.assign({},...e);this.putState(t)}}r.MergedStore=s}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/MergedStore.js"}],[1395,{"@metamask/safe-event-emitter":1507},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.ObservableStore=void 0;const s=n(e("@metamask/safe-event-emitter"));class i extends s.default{constructor(e){super(),e===undefined?this._state={}:this._state=e}getState(){return this._getState()}putState(e){this._putState(e),this.emit("update",e)}updateState(e){if(e&&"object"==typeof e){const t=this.getState();this.putState(Object.assign(Object.assign({},t),e))}else this.putState(e)}subscribe(e){this.on("update",e)}unsubscribe(e){this.removeListener("update",e)}_getState(){return this._state}_putState(e){this._state=e}}r.ObservableStore=i}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/ObservableStore.js"}],[1396,{stream:3904},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.storeAsStream=void 0;const n=e("stream");class s extends n.Duplex{constructor(e){super({objectMode:!0}),this.resume(),this.handler=e=>this.push(e),this.obsStore=e,this.obsStore.subscribe(this.handler)}pipe(e,t){const r=super.pipe(e,t);return e.write(this.obsStore.getState()),r}_write(e,t,r){this.obsStore.putState(e),r()}_read(e){return undefined}_destroy(e,t){this.obsStore.unsubscribe(this.handler),super._destroy(e,t)}}r.storeAsStream=function(e){return new s(e)}}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/asStream.js"}],[1397,{"./ComposedStore":1393,"./MergedStore":1394,"./ObservableStore":1395,"./asStream":1396,"./transform":1398},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./asStream"),r),s(e("./ComposedStore"),r),s(e("./MergedStore"),r),s(e("./ObservableStore"),r),s(e("./transform"),r)}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/index.js"}],[1398,{through2:1399},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.storeTransformStream=void 0;const n=e("through2");r.storeTransformStream=function(e){return n.obj(((t,r,n)=>{try{return n(null,e(t)),undefined}catch(e){return n(e),undefined}}))}}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/transform.js"}],[1399,{_process:3570,"readable-stream":3799,util:4e3,xtend:4042},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("readable-stream").Transform,s=e("util").inherits,i=e("xtend");function o(e){n.call(this,e),this._destroyed=!1}function a(e,t,r){r(null,e)}function c(e){return function(t,r,n){return"function"==typeof t&&(n=r,r=t,t={}),"function"!=typeof r&&(r=a),"function"!=typeof n&&(n=null),e(t,r,n)}}s(o,n),o.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;r.nextTick((function(){e&&t.emit("error",e),t.emit("close")}))}},t.exports=c((function(e,t,r){var n=new o(e);return n._transform=t,r&&(n._flush=r),n})),t.exports.ctor=c((function(e,t,r){function n(t){if(!(this instanceof n))return new n(t);this.options=i(e,t),o.call(this,this.options)}return s(n,o),n.prototype._transform=t,r&&(n.prototype._flush=r),n})),t.exports.obj=c((function(e,t,r){var n=new o(i({objectMode:!0,highWaterMark:16},e));return n._transform=t,r&&(n._flush=r),n}))}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/obs-store>through2",file:"node_modules/@metamask/obs-store/node_modules/through2/through2.js"}],[14,{"../../../../shared/modules/hexstring-utils":4095,"./ens":13,"@metamask/obs-store":1397,loglevel:3447,"punycode/punycode":3604},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=c(e("punycode/punycode")),s=e("@metamask/obs-store"),i=c(e("loglevel")),o=e("../../../../shared/modules/hexstring-utils"),a=c(e("./ens"));function c(e){return e&&e.__esModule?e:{default:e}}r.default=class{constructor({ens:e,provider:t,onNetworkDidChange:r,getCurrentChainId:n}={}){const i={ensResolutionsByAddress:{}};if(this._ens=e,!this._ens){const e=n();a.default.getChainEnsSupport(e)&&(this._ens=new a.default({chainId:e,provider:t}))}this.store=new s.ObservableStore(i),this.resetState=()=>{this.store.updateState(i)},r((()=>{this.store.putState(i);const e=n();a.default.getChainEnsSupport(e)?this._ens=new a.default({chainId:e,provider:t}):delete this._ens}))}reverseResolveAddress(e){return this._reverseResolveAddress((0,o.toChecksumHexAddress)(e))}async _reverseResolveAddress(e){if(!this._ens)return undefined;const t=this.store.getState();if(t.ensResolutionsByAddress[e])return t.ensResolutionsByAddress[e];let r,s;try{r=await this._ens.reverse(e)}catch(e){return i.default.debug(e),undefined}try{s=await this._ens.lookup(r)}catch(e){return i.default.debug(e),undefined}return"0x0000000000000000000000000000000000000000"===s||"0x"===s||(0,o.toChecksumHexAddress)(s)!==e?undefined:(this._updateResolutionsByAddress(e,n.default.toASCII(r)),r)}_updateResolutionsByAddress(e,t){const r=this.store.getState();this.store.putState({ensResolutionsByAddress:{...r.ensResolutionsByAddress,[e]:t}})}}}}},{package:"$root$",file:"app/scripts/controllers/ens/index.js"}],[140,{"../../../shared/constants/network":4064,lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/network");r.default={version:55,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=55;const r=t.data;return t.data=function(e){var t;null!=e&&null!==(t=e.IncomingTransactionsController)&&void 0!==t&&t.incomingTxLastFetchedBlocksByNetwork&&(e.IncomingTransactionsController.incomingTxLastFetchedBlockByChainId=(0,n.mapKeys)(e.IncomingTransactionsController.incomingTxLastFetchedBlocksByNetwork,((e,t)=>{var r;return(null===(r=s.BUILT_IN_NETWORKS[t])||void 0===r?void 0:r.chainId)??i})),delete e.IncomingTransactionsController.incomingTxLastFetchedBlockByChainId[i],delete e.IncomingTransactionsController.incomingTxLastFetchedBlocksByNetwork);return e}(r),t}};const i="UNKNOWN";s.BUILT_IN_NETWORKS.rinkeby={networkId:"4",chainId:"0x4",ticker:"ETH"},s.BUILT_IN_NETWORKS.ropsten={networkId:"3",chainId:"0x3",ticker:"ETH"},s.BUILT_IN_NETWORKS.kovan={networkId:"42",chainId:"0x2a",ticker:"ETH"}}}},{package:"$root$",file:"app/scripts/migrations/055.js"}],[141,{lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:56,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=56;const{PreferencesController:r}=t.data;return Array.isArray(null==r?void 0:r.tokens)&&(r.tokens=r.tokens.filter((({address:e})=>e))),null!=r&&r.accountTokens&&"object"==typeof r.accountTokens&&Object.keys(r.accountTokens).forEach((e=>{Object.keys(r.accountTokens[e]).forEach((t=>{r.accountTokens[e][t]=r.accountTokens[e][t].filter((({address:e})=>e))}))})),null!=r&&r.assetImages&&"undefined"in r.assetImages&&delete r.assetImages.undefined,t}}}}},{package:"$root$",file:"app/scripts/migrations/056.js"}],[142,{"../../../shared/modules/random-id":4100,lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=e("lodash"),i=(n=e("../../../shared/modules/random-id"))&&n.__esModule?n:{default:n};r.default={version:57,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=57;const r=t.data;return t.data=function(e){var t;null!=e&&null!==(t=e.TransactionController)&&void 0!==t&&t.transactions&&Array.isArray(e.TransactionController.transactions)&&!e.TransactionController.transactions.some((e=>"object"!=typeof e||void 0===e.txParams))&&(e.TransactionController.transactions=(0,s.keyBy)(e.TransactionController.transactions,(e=>(void 0!==e.id&&null!==e.id||(e.id=(0,i.default)()),e.id))));return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/057.js"}],[1420,{"./utils":1422,"@metamask/base-controller":1078,"@metamask/controller-utils":1424,"eth-phishing-detect/src/detector":2765,"punycode/":3604},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,o,a,c,u,l,d,h,f=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},p=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},m=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},g=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r},y=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.PhishingController=r.phishingListKeyNameMap=r.ListNames=r.ListKeys=r.METAMASK_HOTLIST_DIFF_URL=r.METAMASK_STALELIST_URL=r.STALELIST_REFRESH_INTERVAL=r.HOTLIST_REFRESH_INTERVAL=r.METAMASK_HOTLIST_DIFF_FILE=r.METAMASK_STALELIST_FILE=r.PHISHING_CONFIG_BASE_URL=void 0;const w=e("@metamask/base-controller"),v=e("@metamask/controller-utils"),b=y(e("eth-phishing-detect/src/detector")),k=e("punycode/"),_=e("./utils");var S,T;r.PHISHING_CONFIG_BASE_URL="https://phishing-detection.metafi.codefi.network",r.METAMASK_STALELIST_FILE="/v1/stalelist",r.METAMASK_HOTLIST_DIFF_FILE="/v1/diffsSince",r.HOTLIST_REFRESH_INTERVAL=1800,r.STALELIST_REFRESH_INTERVAL=345600,r.METAMASK_STALELIST_URL=`${r.PHISHING_CONFIG_BASE_URL}${r.METAMASK_STALELIST_FILE}`,r.METAMASK_HOTLIST_DIFF_URL=`${r.PHISHING_CONFIG_BASE_URL}${r.METAMASK_HOTLIST_DIFF_FILE}`,function(e){e.PhishfortHotlist="phishfort_hotlist",e.EthPhishingDetectConfig="eth_phishing_detect_config"}(S=r.ListKeys||(r.ListKeys={})),function(e){e.MetaMask="MetaMask",e.Phishfort="Phishfort"}(T=r.ListNames||(r.ListNames={}));const E={[T.Phishfort]:S.PhishfortHotlist,[T.MetaMask]:S.EthPhishingDetectConfig};r.phishingListKeyNameMap={[S.EthPhishingDetectConfig]:T.MetaMask,[S.PhishfortHotlist]:T.Phishfort};const A="PhishingController",j={phishingLists:{persist:!0,anonymous:!1},whitelist:{persist:!0,anonymous:!1},hotlistLastFetched:{persist:!0,anonymous:!1},stalelistLastFetched:{persist:!0,anonymous:!1}};class C extends w.BaseController{constructor({stalelistRefreshInterval:e=r.STALELIST_REFRESH_INTERVAL,hotlistRefreshInterval:t=r.HOTLIST_REFRESH_INTERVAL,messenger:l,state:d={}}){super({name:A,metadata:j,messenger:l,state:Object.assign(Object.assign({},{phishingLists:[],whitelist:[],hotlistLastFetched:0,stalelistLastFetched:0}),d)}),n.add(this),s.set(this,void 0),i.set(this,void 0),o.set(this,void 0),a.set(this,void 0),c.set(this,void 0),p(this,i,e,"f"),p(this,o,t,"f"),m(this,n,"m",u).call(this),this.updatePhishingDetector()}updatePhishingDetector(){p(this,s,new b.default(this.state.phishingLists),"f")}setStalelistRefreshInterval(e){p(this,i,e,"f")}setHotlistRefreshInterval(e){p(this,o,e,"f")}isStalelistOutOfDate(){return(0,_.fetchTimeNow)()-this.state.stalelistLastFetched>=m(this,i,"f")}isHotlistOutOfDate(){return(0,_.fetchTimeNow)()-this.state.hotlistLastFetched>=m(this,o,"f")}maybeUpdateState(){return f(this,void 0,void 0,(function*(){if(this.isStalelistOutOfDate())return void(yield this.updateStalelist());this.isHotlistOutOfDate()&&(yield this.updateHotlist())}))}test(e){const t=(0,k.toASCII)(e);return this.state.whitelist.includes(t)?{result:!1,type:"all"}:m(this,s,"f").check(t)}bypass(e){const t=(0,k.toASCII)(e),{whitelist:r}=this.state;r.includes(t)||this.update((e=>{e.whitelist.push(t)}))}updateHotlist(){return f(this,void 0,void 0,(function*(){if(m(this,a,"f"))yield m(this,a,"f");else try{p(this,a,m(this,n,"m",d).call(this),"f"),yield m(this,a,"f")}finally{p(this,a,undefined,"f")}}))}updateStalelist(){return f(this,void 0,void 0,(function*(){if(m(this,c,"f"))yield m(this,c,"f");else try{p(this,c,m(this,n,"m",l).call(this),"f"),yield m(this,c,"f")}finally{p(this,c,undefined,"f")}}))}}r.PhishingController=C,s=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap,n=new WeakSet,u=function(){this.messagingSystem.registerActionHandler(`${A}:maybeUpdateState`,this.maybeUpdateState.bind(this)),this.messagingSystem.registerActionHandler(`${A}:testOrigin`,this.test.bind(this))},l=function(){return f(this,void 0,void 0,(function*(){let e,t;try{e=yield m(this,n,"m",h).call(this,r.METAMASK_STALELIST_URL).then((e=>e)),(null==e?void 0:e.data)&&e.data.lastUpdated>0&&(t=yield m(this,n,"m",h).call(this,`${r.METAMASK_HOTLIST_DIFF_URL}/${e.data.lastUpdated}`))}finally{const e=(0,_.fetchTimeNow)();this.update((t=>{t.stalelistLastFetched=e,t.hotlistLastFetched=e}))}if(!e||!t)return;const s=e.data,{phishfort_hotlist:i,eth_phishing_detect_config:o}=s,a=g(s,["phishfort_hotlist","eth_phishing_detect_config"]),c=Object.assign(Object.assign(Object.assign({},i),a),{fuzzylist:[],allowlist:[],name:r.phishingListKeyNameMap.phishfort_hotlist}),u=Object.assign(Object.assign(Object.assign({},o),a),{name:r.phishingListKeyNameMap.eth_phishing_detect_config}),l=(0,_.applyDiffs)(c,t.data,S.PhishfortHotlist),d=(0,_.applyDiffs)(u,t.data,S.EthPhishingDetectConfig);this.update((e=>{e.phishingLists=[d,l]})),this.updatePhishingDetector()}))},d=function(){return f(this,void 0,void 0,(function*(){const e=Math.max(...this.state.phishingLists.map((({lastUpdated:e})=>e)));let t;try{t=yield m(this,n,"m",h).call(this,`${r.METAMASK_HOTLIST_DIFF_URL}/${e}`)}finally{this.update((e=>{e.hotlistLastFetched=(0,_.fetchTimeNow)()}))}if(!(null==t?void 0:t.data))return;const s=t.data,i=this.state.phishingLists.map((e=>(0,_.applyDiffs)(e,s,E[e.name])));this.update((e=>{e.phishingLists=i})),this.updatePhishingDetector()}))},h=function(e){return f(this,void 0,void 0,(function*(){const t=yield(0,v.safelyExecute)((()=>fetch(e,{cache:"no-cache"})),!0);return 200===(null==t?void 0:t.status)?yield t.json():null}))},r.default=C}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/PhishingController.js"}],[1421,{"./PhishingController":1420},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./PhishingController"),r)}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/index.js"}],[1422,{"./PhishingController":1420},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.applyDiffs=r.fetchTimeNow=void 0;const n=e("./PhishingController");r.fetchTimeNow=()=>Math.round(Date.now()/1e3);const s=e=>{const t=e.indexOf(".");return[e.slice(0,t),e.slice(t+1)]};r.applyDiffs=(e,t,r)=>{const i=t.filter((({timestamp:t,targetList:n})=>t>e.lastUpdated&&s(n)[0]===r));let o=e.lastUpdated;const a={allowlist:new Set(e.allowlist),blocklist:new Set(e.blocklist),fuzzylist:new Set(e.fuzzylist)};for(const{isRemoval:e,targetList:t,url:r,timestamp:n}of i){const i=s(t)[1];n>o&&(o=n),e?a[i].delete(r):a[i].add(r)}return{allowlist:Array.from(a.allowlist),blocklist:Array.from(a.blocklist),fuzzylist:Array.from(a.fuzzylist),version:e.version,name:n.phishingListKeyNameMap[r],tolerance:e.tolerance,lastUpdated:o}}}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/utils.js"}],[1423,{"./types":1427},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=r.ApprovalType=r.ORIGIN_METAMASK=r.OPENSEA_PROXY_URL=r.BUILT_IN_NETWORKS=r.TESTNET_TICKER_SYMBOLS=r.ASSET_TYPES=r.GWEI=r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID=r.ERC1155_METADATA_URI_INTERFACE_ID=r.ERC1155_INTERFACE_ID=r.ERC721_ENUMERABLE_INTERFACE_ID=r.ERC721_METADATA_INTERFACE_ID=r.ERC721_INTERFACE_ID=r.ERC20=r.ERC1155=r.ERC721=r.MAX_SAFE_CHAIN_ID=r.GANACHE_CHAIN_ID=r.IPFS_DEFAULT_GATEWAY_URL=r.FALL_BACK_VS_CURRENCY=r.RPC=void 0;const n=e("./types");r.RPC="rpc",r.FALL_BACK_VS_CURRENCY="ETH",r.IPFS_DEFAULT_GATEWAY_URL="https://cloudflare-ipfs.com/ipfs/",r.GANACHE_CHAIN_ID="0x539",r.MAX_SAFE_CHAIN_ID=0xfffffffffffec,r.ERC721="ERC721",r.ERC1155="ERC1155",r.ERC20="ERC20",r.ERC721_INTERFACE_ID="0x80ac58cd",r.ERC721_METADATA_INTERFACE_ID="0x5b5e139f",r.ERC721_ENUMERABLE_INTERFACE_ID="0x780e9d63",r.ERC1155_INTERFACE_ID="0xd9b67a26",r.ERC1155_METADATA_URI_INTERFACE_ID="0x0e89341c",r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID="0x4e2312e0",r.GWEI="gwei",r.ASSET_TYPES={NATIVE:"NATIVE",TOKEN:"TOKEN",NFT:"NFT",UNKNOWN:"UNKNOWN"},r.TESTNET_TICKER_SYMBOLS={GOERLI:"GoerliETH",SEPOLIA:"SepoliaETH",LINEA_GOERLI:"LineaETH"},r.BUILT_IN_NETWORKS={[n.NetworkType.goerli]:{chainId:n.ChainId.goerli,ticker:n.NetworksTicker.goerli,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.goerli}.etherscan.io`}},[n.NetworkType.sepolia]:{chainId:n.ChainId.sepolia,ticker:n.NetworksTicker.sepolia,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.sepolia}.etherscan.io`}},[n.NetworkType.mainnet]:{chainId:n.ChainId.mainnet,ticker:n.NetworksTicker.mainnet,rpcPrefs:{blockExplorerUrl:"https://etherscan.io"}},[n.NetworkType["linea-goerli"]]:{chainId:n.ChainId["linea-goerli"],ticker:n.NetworksTicker["linea-goerli"],rpcPrefs:{blockExplorerUrl:"https://goerli.lineascan.build"}},[n.NetworkType["linea-mainnet"]]:{chainId:n.ChainId["linea-mainnet"],ticker:n.NetworksTicker["linea-mainnet"],rpcPrefs:{blockExplorerUrl:"https://lineascan.build"}},[n.NetworkType.rpc]:{chainId:undefined,blockExplorerUrl:undefined,ticker:undefined,rpcPrefs:undefined}},r.OPENSEA_PROXY_URL="https://proxy.metafi.codefi.network/opensea/v1/api/v2",r.ORIGIN_METAMASK="metamask",function(e){e.AddEthereumChain="wallet_addEthereumChain",e.ConnectAccounts="connect_accounts",e.EthDecrypt="eth_decrypt",e.EthGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.EthSign="eth_sign",e.EthSignTypedData="eth_signTypedData",e.PersonalSign="personal_sign",e.ResultError="result_error",e.ResultSuccess="result_success",e.SnapDialogAlert="snap_dialog:alert",e.SnapDialogConfirmation="snap_dialog:confirmation",e.SnapDialogPrompt="snap_dialog:prompt",e.SwitchEthereumChain="wallet_switchEthereumChain",e.Transaction="transaction",e.Unlock="unlock",e.WalletConnect="wallet_connect",e.WalletRequestPermissions="wallet_requestPermissions",e.WatchAsset="wallet_watchAsset"}(r.ApprovalType||(r.ApprovalType={})),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP={[n.ChainId.goerli]:n.BuiltInNetworkName.Goerli,[n.ChainId.sepolia]:n.BuiltInNetworkName.Sepolia,[n.ChainId.mainnet]:n.BuiltInNetworkName.Mainnet,[n.ChainId["linea-goerli"]]:n.BuiltInNetworkName.LineaGoerli,[n.ChainId["linea-mainnet"]]:n.BuiltInNetworkName.LineaMainnet,[n.ChainId.aurora]:n.BuiltInNetworkName.Aurora}}}},{package:"@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/phishing-controller/node_modules/@metamask/controller-utils/dist/constants.js"}],[1424,{"./constants":1423,"./siwe":1426,"./types":1427,"./util":1428},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./constants"),r),s(e("./util"),r),s(e("./types"),r),s(e("./siwe"),r)}}},{package:"@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/phishing-controller/node_modules/@metamask/controller-utils/dist/index.js"}],[1425,{"@metamask/utils":1786},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("controller-utils")}}},{package:"@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/phishing-controller/node_modules/@metamask/controller-utils/dist/logger.js"}],[1426,{"./logger":1425,"@spruceid/siwe-parser":1976,buffer:2448,"ethereumjs-util":2816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.detectSIWE=r.isValidSIWEOrigin=r.parseDomainParts=void 0;const n=e("@spruceid/siwe-parser"),s=e("ethereumjs-util"),i=e("./logger"),o=(0,i.createModuleLogger)(i.projectLogger,"detect-siwe");function a(e){try{const n="string"!=typeof(r=e)?r:(0,s.isHexPrefixed)(r)?r.slice(2):r,i=t.from(n,"hex");return 32===i.length?e:i.toString("utf8")}catch(t){return o(t),e}var r}const c={"http:":"80","https:":"443"};r.parseDomainParts=(e,t)=>e.match(/^[^/:]*:\/\//u)?new URL(e):new URL(`${t}//${e}`);r.isValidSIWEOrigin=e=>{var t;try{const{origin:n,siwe:s}=e;if(!n||!(null===(t=null==s?void 0:s.parsedMessage)||void 0===t?void 0:t.domain))return!1;const i=new URL(n),o=(0,r.parseDomainParts)(s.parsedMessage.domain,i.protocol);return 0===o.hostname.localeCompare(i.hostname,undefined,{sensitivity:"accent"})&&(""!==o.port&&o.port!==i.port?""===i.port&&o.port===c[i.protocol]:""===o.username||o.username===i.username)}catch(e){return o(e),!1}};r.detectSIWE=e=>{try{const{data:t}=e,r=a(t);return{isSIWEMessage:!0,parsedMessage:new n.ParsedMessage(r)}}catch(e){return{isSIWEMessage:!1,parsedMessage:null}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/phishing-controller/node_modules/@metamask/controller-utils/dist/siwe.js"}],[1427,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n;Object.defineProperty(r,"__esModule",{value:!0}),r.NetworksTicker=r.ChainId=r.BuiltInNetworkName=r.isInfuraNetworkType=r.isNetworkType=r.NetworkType=r.InfuraNetworkType=void 0,r.InfuraNetworkType={mainnet:"mainnet",goerli:"goerli",sepolia:"sepolia","linea-goerli":"linea-goerli","linea-mainnet":"linea-mainnet"},r.NetworkType=Object.assign(Object.assign({},r.InfuraNetworkType),{rpc:"rpc"}),r.isNetworkType=function(e){return Object.values(r.NetworkType).includes(e)},r.isInfuraNetworkType=function(e){return Object.keys(r.InfuraNetworkType).includes(e)},function(e){e.Mainnet="mainnet",e.Goerli="goerli",e.Sepolia="sepolia",e.LineaGoerli="linea-goerli",e.LineaMainnet="linea-mainnet",e.Aurora="aurora"}(n=r.BuiltInNetworkName||(r.BuiltInNetworkName={})),r.ChainId={[n.Mainnet]:"0x1",[n.Goerli]:"0x5",[n.Sepolia]:"0xaa36a7",[n.Aurora]:"0x4e454152",[n.LineaGoerli]:"0xe704",[n.LineaMainnet]:"0xe708"},function(e){e.mainnet="ETH",e.goerli="GoerliETH",e.sepolia="SepoliaETH",e["linea-goerli"]="LineaETH",e["linea-mainnet"]="ETH",e.rpc=""}(r.NetworksTicker||(r.NetworksTicker={}))}}},{package:"@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/phishing-controller/node_modules/@metamask/controller-utils/dist/types.js"}],[1428,{"./constants":1423,"@metamask/ethjs-unit":1193,"@metamask/utils":1786,buffer:2448,"eth-ens-namehash":2726,"ethereumjs-util":2816,"fast-deep-equal":2896},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.isValidJson=r.isNonEmptyArray=r.isPlainObject=r.convertHexToDecimal=r.query=r.normalizeEnsName=r.timeoutFetch=r.fetchWithErrorHandling=r.handleFetch=r.successfulFetch=r.isSmartContractCode=r.isValidHexAddress=r.toChecksumHexAddress=r.safelyExecuteWithTimeout=r.safelyExecute=r.toHex=r.fromHex=r.hexToText=r.hexToBN=r.getBuyURL=r.weiHexToGweiDec=r.gweiDecToWEIBN=r.fractionBN=r.BNToHex=r.isSafeChainId=void 0;const i=e("@metamask/ethjs-unit"),o=e("@metamask/utils"),a=s(e("eth-ens-namehash")),c=e("ethereumjs-util"),u=s(e("fast-deep-equal")),l=e("./constants"),d=new Error("timeout");function h(e){return e?new c.BN((0,c.stripHexPrefix)(e),16):new c.BN(0)}function f(e,t){return n(this,void 0,void 0,(function*(){const r=yield fetch(e,t);if(!r.ok)throw new Error(`Fetch failed with status '${r.status}' for request '${String(e)}'`);return r}))}function p(e,t){return n(this,void 0,void 0,(function*(){const r=yield f(e,t);return yield r.json()}))}r.isSafeChainId=function(e){if(!(0,c.isHexString)(e))return!1;const t=Number.parseInt(e);return Number.isSafeInteger(t)&&t>0&&t<=l.MAX_SAFE_CHAIN_ID},r.BNToHex=function(e){return(0,c.addHexPrefix)(e.toString(16))},r.fractionBN=function(e,t,r){const n=new c.BN(t),s=new c.BN(r);return e.mul(n).div(s)},r.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new c.BN(0);const t=e.toString().split("."),r=t[0]||"0";let n=t[1]||"";if(!n)return(0,i.toWei)(r,"gwei");if(n.length<=9)return(0,i.toWei)(`${r}.${n}`,"gwei");const s=n.slice(9)[0];n=n.slice(0,9);let o=(0,i.toWei)(`${r}.${n}`,"gwei");return Number(s)>=5&&(o=o.add(new c.BN(1))),o},r.weiHexToGweiDec=function(e){const t=new c.BN((0,c.stripHexPrefix)(e),16);return(0,i.fromWei)(t,"gwei")},r.getBuyURL=function(e="1",t,r=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${r}&address=${t}&crypto_currency=ETH`;case"5":return"https://goerli-faucet.slock.it/";case"11155111":return"https://sepoliafaucet.net/";default:return undefined}},r.hexToBN=h,r.hexToText=function(e){try{const r=(0,c.stripHexPrefix)(e);return t.from(r,"hex").toString("utf8")}catch(t){return e}},r.fromHex=function(e){return c.BN.isBN(e)?e:new c.BN(h(e).toString(10))},r.toHex=function(e){return"string"==typeof e&&(0,o.isStrictHexString)(e)?e:`0x${c.BN.isBN(e)?e.toString(16):new c.BN(e.toString(),10).toString(16)}`},r.safelyExecute=function(e,t=!1){return n(this,void 0,void 0,(function*(){try{return yield e()}catch(e){return t&&console.error(e),undefined}}))},r.safelyExecuteWithTimeout=function(e,t=!1,r=500){return n(this,void 0,void 0,(function*(){try{return yield Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(d)}),r)))])}catch(e){return t&&console.error(e),undefined}}))},r.toChecksumHexAddress=function(e){const t=(0,c.addHexPrefix)(e);return(0,c.isHexString)(t)?(0,c.toChecksumAddress)(t):t},r.isValidHexAddress=function(e,{allowNonPrefixed:t=!0}={}){const r=t?(0,c.addHexPrefix)(e):e;return!!(0,c.isHexString)(r)&&(0,c.isValidAddress)(r)},r.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},r.successfulFetch=f,r.handleFetch=p,r.fetchWithErrorHandling=function({url:e,options:t,timeout:r,errorCodesToCatch:s}){return n(this,void 0,void 0,(function*(){let n;try{n=r?Promise.race([yield p(e,t),new Promise(((e,t)=>setTimeout((()=>{t(d)}),r)))]):yield p(e,t)}catch(e){!function(e,t=[]){var r;if(!e)return;const n=t.some((t=>{var r;return null===(r=e.message)||void 0===r?void 0:r.includes(`Fetch failed with status '${t}'`)}));if(!(e instanceof Error&&(n||(null===(r=e.message)||void 0===r?void 0:r.includes("Failed to fetch"))||e===d)))throw e;console.error(e)}(e,s)}return n}))},r.timeoutFetch=function(e,t,r=500){return n(this,void 0,void 0,(function*(){return Promise.race([f(e,t),new Promise(((e,t)=>setTimeout((()=>{t(d)}),r)))])}))},r.normalizeEnsName=function(e){if(e&&"string"==typeof e)try{const t=a.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},r.query=function(e,t,r=[]){return new Promise(((n,s)=>{const i=(e,t)=>{e?s(e):n(t)};t in e&&"function"==typeof e[t]?e[t](...r,i):e.sendAsync({method:t,params:r},i)}))};r.convertHexToDecimal=(e="0x0")=>(0,c.isHexString)(e)?parseInt(e,16):Number(e)?Number(e):0,r.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)},r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isValidJson=function(e){try{return(0,u.default)(e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/phishing-controller/node_modules/@metamask/controller-utils/dist/util.js"}],[143,{lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:58,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=58;const r=t.data;return t.data=function(e){var t;return null===(t=e.AppStateController)||void 0===t||delete t.swapsWelcomeMessageHasBeenShown,e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/058.js"}],[144,{"@metamask/transaction-controller":1733,lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("@metamask/transaction-controller");r.default={version:59,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=59;const r=t.data;return t.data=function(e){var t;const r=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions;if((0,n.isPlainObject)(r)){const t=(0,n.groupBy)(Object.values(r),(e=>{var t;return`${null===(t=e.txParams)||void 0===t?void 0:t.nonce}-${e.chainId??e.metamaskNetworkId}`})),i=(0,n.pickBy)(t,(e=>e.some((e=>e.type!==s.TransactionType.cancel&&e.type!==s.TransactionType.retry))));e.TransactionController.transactions=(0,n.keyBy)((0,n.concat)(...Object.values(i)),(e=>e.id))}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/059.js"}],[145,{lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");const s="2020-08-31";r.default={version:60,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=60;const r=function(e){var t;const r=null==e||null===(t=e.NotificationController)||void 0===t?void 0:t.notifications;var i;(0,n.isPlainObject)(r)&&(null===(i=r[2])||void 0===i?void 0:i.date)===s&&delete e.NotificationController.notifications[2];return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/060.js"}],[146,{lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:61,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=61;const r=function(e){const t=(new Date).getTime();e.AppStateController?(e.AppStateController.recoveryPhraseReminderHasBeenShown=!1,e.AppStateController.recoveryPhraseReminderLastShown=t):e.AppStateController={recoveryPhraseReminderHasBeenShown:!1,recoveryPhraseReminderLastShown:t};return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/061.js"}],[147,{lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:62,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=62;const r=function(e){if(e.MetaMetricsController){const{metaMetricsSendCount:t}=e.MetaMetricsController;t!==undefined&&delete e.MetaMetricsController.metaMetricsSendCount}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/062.js"}],[1473,{"./ppom-controller":1474},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./ppom-controller"),r)}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/index.js"}],[1474,{"./ppom-storage":1475,"./util":1476,"@metamask/base-controller":1480,"@metamask/controller-utils":1482,"await-semaphore":2335},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,o,a,c,u,l,d,h,f,p,m,g,y,w,v,b,k,_,S,T,E,A,j,C,P,M,O,R,I,N,x,B,K,D,$,L,U,q,H,F,V,W,J,z,G,Y,Q,X=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},Z=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.PPOMController=r.PPOMInitialisationStatus=r.NETWORK_CACHE_DURATION=r.REFRESH_TIME_INTERVAL=void 0;const ee=e("@metamask/base-controller"),te=e("@metamask/controller-utils"),re=e("await-semaphore"),ne=e("./ppom-storage"),se=e("./util");r.REFRESH_TIME_INTERVAL=72e5;r.NETWORK_CACHE_DURATION=6048e5;const ie=5,oe=2,ae=["eth_call","eth_blockNumber","eth_createAccessList","eth_getLogs","eth_getFilterLogs","eth_getTransactionByHash","eth_chainId","eth_getBlockByHash","eth_getBlockByNumber","eth_getCode","eth_getStorageAt","eth_getBalance","eth_getTransactionCount","trace_call","trace_callMany","debug_traceCall","trace_filter"],ce={versionInfo:{persist:!0,anonymous:!1},chainStatus:{persist:!0,anonymous:!1},storageMetadata:{persist:!0,anonymous:!1},versionFileETag:{persist:!0,anonymous:!1}},ue="PPOMController",le={headers:{"Content-Type":"application/json"}};r.PPOMInitialisationStatus={INPROGRESS:"INPROGRESS",SUCCESS:"SUCCESS",FAIL:"FAIL"};class de extends ee.BaseControllerV2{constructor({chainId:e,messenger:t,provider:_,storageBackend:S,securityAlertsEnabled:T,onPreferencesChange:A,ppomProvider:j,cdnBaseUrl:O,providerRequestLimit:R,dataUpdateDuration:I,fileFetchScheduleDuration:N,state:x,blockaidPublicKey:B,nativeCrypto:K}){const D=(0,se.addHexPrefix)(e),$={versionInfo:x?.versionInfo??[],storageMetadata:x?.storageMetadata??[],chainStatus:x?.chainStatus??{[D]:{chainId:D,lastVisited:(new Date).getTime(),versionInfo:[]}},versionFileETag:x?.versionFileETag??""};super({name:ue,metadata:ce,messenger:t,state:$}),n.add(this),s.set(this,void 0),i.set(this,void 0),o.set(this,void 0),a.set(this,void 0),c.set(this,void 0),u.set(this,void 0),l.set(this,void 0),d.set(this,void 0),h.set(this,void 0),f.set(this,0),p.set(this,void 0),m.set(this,void 0),g.set(this,void 0),y.set(this,void 0),w.set(this,{}),v.set(this,void 0),b.set(this,!1),k.set(this,undefined),X(this,p,D,"f"),X(this,i,_,"f"),X(this,l,j,"f"),X(this,o,new ne.PPOMStorage({storageBackend:S,readMetadata:()=>JSON.parse(JSON.stringify(this.state.storageMetadata)),writeMetadata:e=>{this.update((t=>{t.storageMetadata=e}))}}),"f"),X(this,u,new re.Mutex,"f"),X(this,d,O,"f"),X(this,h,R??300,"f"),X(this,m,I??r.REFRESH_TIME_INTERVAL,"f"),X(this,g,N===undefined?3e5:N,"f"),X(this,y,T,"f"),X(this,v,B,"f"),X(this,k,K,"f"),A(Z(this,n,"m",C).bind(this)),Z(this,n,"m",P).call(this),Z(this,n,"m",M).call(this),T&&Z(this,n,"m",E).call(this)}async updatePPOM(){if(!Z(this,y,"f"))throw Error("User has securityAlertsEnabled set to false");Z(this,n,"m",q).call(this),await Z(this,n,"m",I).call(this)}async usePPOM(e){if(!Z(this,y,"f"))throw Error("User has securityAlertsEnabled set to false");if(!(0,se.blockaidValidationSupportedForNetwork)(Z(this,p,"f")))throw Error(`Blockaid validation not available on network with chainId: ${Z(this,p,"f")}`);return await Z(this,n,"m",L).call(this),X(this,f,0,"f"),X(this,w,{},"f"),await Z(this,u,"f").use((async()=>({...await e(Z(this,s,"f")),providerRequestsCount:{...Z(this,w,"f")}})))}}r.PPOMController=de,s=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,y=new WeakMap,w=new WeakMap,v=new WeakMap,b=new WeakMap,k=new WeakMap,n=new WeakSet,_=async function(){Z(this,y,"f")&&!Z(this,b,"f")&&await Z(this,u,"f").use((async()=>{const{ppomInit:e}=Z(this,l,"f");await e("./ppom_bg.wasm"),X(this,b,!0,"f")})).catch((e=>{throw console.error("Error in trying to initialize PPOM",e),e}))},S=function(){clearInterval(Z(this,a,"f")),clearInterval(Z(this,c,"f")),X(this,a,undefined,"f"),X(this,c,undefined,"f")},T=function(){this.messagingSystem.publish("PPOMController:initialisationStateChangeEvent",r.PPOMInitialisationStatus.INPROGRESS),Z(this,n,"m",R).call(this).then((async()=>{this.messagingSystem.publish("PPOMController:initialisationStateChangeEvent",r.PPOMInitialisationStatus.SUCCESS),Z(this,n,"m",Q).call(this)})).catch((e=>{this.messagingSystem.publish("PPOMController:initialisationStateChangeEvent",r.PPOMInitialisationStatus.FAIL),console.error(`Error in initialising ppom: ${e.message}`)}))},E=function(){Z(this,n,"m",N).call(this).then((()=>{Z(this,n,"m",T).call(this)})).catch((e=>console.error(`Error in fetching version info: ${e.message}`)))},A=function(){Z(this,n,"m",O).call(this).catch((e=>{console.error(`Error in resetting ppom: ${e.message}`)})),Z(this,n,"m",S).call(this),this.update((e=>{e.versionInfo=[];const t={...this.state.chainStatus};Object.keys(t).forEach((e=>{if(t[e]){const r={...t[e],versionInfo:[]};t[e]=r}})),e.chainStatus=t,e.storageMetadata=[],e.versionFileETag=""}))},j=function(e){const t=(0,se.addHexPrefix)(e.providerConfig.chainId);if(t===Z(this,p,"f"))return;if(X(this,p,t,"f"),!(0,se.blockaidValidationSupportedForNetwork)(t))return void Z(this,n,"m",O).call(this).catch((e=>{console.error(`Error in resetting ppom: ${e.message}`)}));let r={...this.state.chainStatus};const s=r[t];r={...r,[t]:{chainId:t,lastVisited:(new Date).getTime(),versionInfo:s?.versionInfo??[]}},this.update((e=>{e.chainStatus=r})),Z(this,n,"m",q).call(this),Z(this,y,"f")&&Z(this,n,"m",T).call(this)},C=function(e){const t=e.securityAlertsEnabled;t!==Z(this,y,"f")&&(X(this,y,t,"f"),t?Z(this,n,"m",E).call(this):Z(this,n,"m",A).call(this))},P=function(){this.messagingSystem.registerActionHandler(`${ue}:usePPOM`,this.usePPOM.bind(this)),this.messagingSystem.registerActionHandler(`${ue}:updatePPOM`,this.updatePPOM.bind(this))},M=function(){const e=Z(this,n,"m",j).bind(this);this.messagingSystem.subscribe("NetworkController:stateChange",e)},O=async function(){await Z(this,u,"f").use((async()=>{Z(this,s,"f")&&(Z(this,s,"f").free(),X(this,s,undefined,"f"))}))},R=async function(){(0,se.blockaidValidationSupportedForNetwork)(Z(this,p,"f"))&&(Z(this,n,"m",D).call(this,Z(this,p,"f")),X(this,s,await Z(this,n,"m",G).call(this,Z(this,p,"f")),"f"))},I=async function(){await Z(this,n,"m",N).call(this),await Z(this,n,"m",H).call(this)},N=async function(){const e=await Z(this,n,"m",W).call(this);return!!e&&(this.update((t=>{t.versionInfo=e})),!0)},x=function(e,t){return e.find((e=>e.name===t.name&&e.chainId===t.chainId&&e.version===t.version&&e.checksum===t.checksum))},B=async function(e){const t=await Promise.all(e.map((async e=>{let t;try{t=await Z(this,n,"m",K).call(this,e)}catch(t){console.error(`Error in getting file ${e.filePath}: ${t.message}`)}return t?[e.name,new Uint8Array(t)]:undefined})));return t?.filter((e=>e?.[1]!==undefined))},K=async function(e){const{storageMetadata:t}=this.state;if(Z(this,n,"m",x).call(this,t,e))try{return await Z(this,o,"f").readFile(e.name,e.chainId)}catch(e){console.error(`Error in reading file: ${e.message}`)}(0,se.checkFilePath)(e.filePath);const r=(0,se.constructURLHref)(Z(this,d,"f"),e.filePath),s=await Z(this,n,"m",J).call(this,r);await(0,se.validateSignature)(s,e.hashSignature,Z(this,v,"f"),e.filePath,Z(this,k,"f"));try{await Z(this,o,"f").writeFile({data:s,...e})}catch(e){console.error(`Error in writing file: ${e.message}`)}return s},D=function(e){const t=this.state.versionInfo.filter((({chainId:t})=>t===e));this.update((r=>{const n=r.chainStatus[e];n&&(r.chainStatus={...r.chainStatus,[e]:{...n,versionInfo:t}})}))},$=async function(){const{chainStatus:e}=this.state;if(!e[Z(this,p,"f")]?.versionInfo?.length){this.state.versionInfo.filter((({chainId:e})=>e===Z(this,p,"f"))).length||await Z(this,n,"m",N).call(this)}},L=async function(){Z(this,s,"f")===undefined&&(await Z(this,n,"m",$).call(this),await Z(this,n,"m",R).call(this))},U=async function(){const{chainStatus:e,storageMetadata:t,versionInfo:r}=this.state,s=Object.keys(e).filter(se.blockaidValidationSupportedForNetwork).map((e=>({chainId:e,versionInfo:r.filter((r=>r.chainId===e&&!Z(this,n,"m",x).call(this,t,r)))}))),i=[];return s.forEach((e=>{const{versionInfo:t}=e;t.forEach(((e,r)=>{i.push({fileVersionInfo:e,isLastFileOfNetwork:r===t.length-1})}))})),i},q=function(){if(Object.keys(this.state.chainStatus)?.length<=oe)return;const e=(new Date).getTime(),t=Object.keys(this.state.chainStatus),n=t.filter((t=>this.state.chainStatus[t].lastVisited<e-r.NETWORK_CACHE_DURATION&&t!==Z(this,p,"f")));if(t.length>ie){const e=t.sort(((e,t)=>Number(this.state.chainStatus[t]?.lastVisited)-Number(this.state.chainStatus[e]?.lastVisited)))[ie];n.push(e)}const s={...this.state.chainStatus};n.forEach((e=>{delete s[e]})),this.update((e=>{e.chainStatus=s}))},H=async function(){Z(this,c,"f")&&clearInterval(Z(this,c,"f"));const e=await Z(this,n,"m",U).call(this);let t=Z(this,g,"f");Z(this,m,"f")/(e.length+1)<Z(this,g,"f")&&(t=Z(this,m,"f")/(e.length+1)),X(this,c,setInterval((()=>{const t=e.pop();if(t){const{chainStatus:e}=this.state,{fileVersionInfo:r,isLastFileOfNetwork:s}=t;e[r.chainId]&&Z(this,n,"m",K).call(this,r).then((async()=>{s&&(Z(this,n,"m",D).call(this,Z(this,p,"f")),Z(this,p,"f")===r.chainId&&await Z(this,n,"m",R).call(this))})).catch((e=>console.error(`Error in getting file ${r.filePath}: ${e.message}`)))}e.length||(clearInterval(Z(this,c,"f")),Z(this,o,"f").syncMetadata(this.state.versionInfo))}),t),"f")},F=async function(e,t={},r="GET"){const n=await(0,te.safelyExecute)((async()=>(0,te.timeoutFetch)(e,{method:r,cache:"no-cache",redirect:"error",...t},1e4)),!0);if(200!==n?.status)throw new Error(`Failed to fetch file with url: ${e}`);return n},V=async function(e){const t=await Z(this,n,"m",F).call(this,e,{headers:le},"HEAD"),{versionFileETag:r}=this.state;return t.headers.get("ETag")!==r&&(this.update((e=>{e.versionFileETag=t.headers.get("ETag")})),!0)},W=async function(){const e=(0,se.constructURLHref)(Z(this,d,"f"),"ppom_version.json");if(!await Z(this,n,"m",V).call(this,e)&&this.state.versionInfo?.length)return undefined;return(await Z(this,n,"m",F).call(this,e,{headers:le})).json()},J=async function(e){const t=await Z(this,n,"m",F).call(this,e);return await t.arrayBuffer()},z=async function(e,t){return new Promise((r=>{Z(this,f,"f")>Z(this,h,"f")?r(se.PROVIDER_ERRORS.limitExceeded()):(X(this,f,Z(this,f,"f")+1,"f"),ae.includes(e)?(Z(this,w,"f")[e]=Z(this,w,"f")[e]?Number(Z(this,w,"f")[e])+1:1,Z(this,i,"f").sendAsync((0,se.createPayload)(e,t),((e,t)=>{r(e?{jsonrpc:"2.0",id:(0,se.IdGenerator)(),error:e}:t)}))):r(se.PROVIDER_ERRORS.methodNotSupported()))}))},G=async function(e){await Z(this,n,"m",_).call(this);const{chainStatus:t}=this.state,r=t[e]?.versionInfo;if(r?.length===undefined||0===r?.length)throw new Error(`Aborting initialising PPOM as no files are found for the network with chainId: ${e}`);const i=await Z(this,n,"m",B).call(this,r);if(i?.length!==r?.length)throw new Error(`Aborting initialising PPOM as not all files could not be downloaded for the network with chainId: ${e}`);return await Z(this,u,"f").use((async()=>{Z(this,s,"f")&&Z(this,s,"f").free();const{PPOM:e}=Z(this,l,"f");return e.new(Z(this,n,"m",z).bind(this),i)}))},Y=function(){this.updatePPOM().catch((e=>{console.error(`Error while trying to update PPOM: ${e.message}`)}))},Q=function(){Z(this,y,"f")&&(Z(this,a,"f")||(Z(this,n,"m",Y).call(this),X(this,a,setInterval(Z(this,n,"m",Y).bind(this),Z(this,m,"f")),"f")))}}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/ppom-controller.js"}],[1475,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,o=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},a=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.PPOMStorage=void 0;r.PPOMStorage=class{constructor({storageBackend:e,readMetadata:t,writeMetadata:r}){n.set(this,void 0),s.set(this,void 0),i.set(this,void 0),o(this,n,e,"f"),o(this,s,t,"f"),o(this,i,r,"f")}async syncMetadata(e){const t=a(this,s,"f").call(this),r=[];for(const n of t){try{await this.readFile(n.name,n.chainId)}catch(e){console.error("Error: ",e);continue}e.find((e=>e.name===n.name&&e.chainId===n.chainId&&e.version===n.version&&e.checksum===n.checksum))&&r.push(n)}const o=await a(this,n,"f").dir();for(const{name:e,chainId:t}of o)r.find((r=>r.name===e&&r.chainId===t))||await a(this,n,"f").delete({name:e,chainId:t});return a(this,i,"f").call(this,r),r}async readFile(e,t){const r=a(this,s,"f").call(this).find((r=>r.name===e&&r.chainId===t));if(!r)throw new Error(`File metadata (${e}, ${t}) not found`);const i=await a(this,n,"f").read({name:e,chainId:t},r.checksum);if(!i)throw new Error(`Storage File (${e}, ${t}) not found`);return i}async writeFile({data:e,name:t,chainId:r,version:o,checksum:c}){await a(this,n,"f").write({name:t,chainId:r},e,c);const u=a(this,s,"f").call(this),l=u.find((e=>e.name===t&&e.chainId===r));l?(l.version=o,l.checksum=c):u.push({name:t,chainId:r,version:o,checksum:c}),a(this,i,"f").call(this,u)}},n=new WeakMap,s=new WeakMap,i=new WeakMap}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/ppom-storage.js"}],[1476,{buffer:2448,"crypto-js":2639,elliptic:2696,"json-rpc-random-id":3252},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return s(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.checkFilePath=r.addHexPrefix=r.constructURLHref=r.validateSignature=r.PROVIDER_ERRORS=r.createPayload=r.IdGenerator=r.blockaidValidationSupportedForNetwork=r.SUPPORTED_NETWORK_CHAINIDS=void 0;const a=i(e("crypto-js")),c=o(e("elliptic")),u=o(e("json-rpc-random-id")),l=c.default.eddsa;r.SUPPORTED_NETWORK_CHAINIDS={MAINNET:"0x1",BSC:"0x38",OPTIMISM:"0xa",POLYGON:"0x89",AVALANCHE:"0xa86a",ARBITRUM:"0xa4b1",LINEA_MAINNET:"0xe708"};r.blockaidValidationSupportedForNetwork=e=>Object.values(r.SUPPORTED_NETWORK_CHAINIDS).some((t=>t===e)),r.IdGenerator=(0,u.default)();r.createPayload=(e,t)=>({id:(0,r.IdGenerator)(),jsonrpc:"2.0",method:e,params:t||[]}),r.PROVIDER_ERRORS={limitExceeded:()=>({jsonrpc:"2.0",id:(0,r.IdGenerator)(),error:{code:-32005,message:"Limit exceeded"}}),methodNotSupported:()=>({jsonrpc:"2.0",id:(0,r.IdGenerator)(),error:{code:-32601,message:"Method not supported"}})};r.validateSignature=async(e,r,n,s,i,o)=>{const c=await(async(e,t,r=!0)=>{if(t)return t.createHash("sha256").update(e).digest("hex");if("crypto"in globalThis&&"object"==typeof globalThis.crypto&&globalThis.crypto.subtle?.digest&&r){const t=await globalThis.crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map((e=>e.toString(16).padStart(2,"0"))).join("")}return(0,a.SHA256)(a.default.lib.WordArray.create(e)).toString()})(e,i,o);if(!new l("ed25519").keyFromPublic(n).verify(t.from(c),r))throw Error(`Signature verification failed for file path: ${s}`)};r.constructURLHref=(e,t)=>new URL(`https://${e}/${t}`.replace(/https:\/\/https:\/\//gu,"https://").replace(/\/\//gu,"/")).href;r.addHexPrefix=e=>"string"!=typeof e||e.match(/^-?0x/u)?e:e.match(/^-?0X/u)?e.replace("0X","0x"):`0x${parseInt(e,10).toString(16)}`;r.checkFilePath=e=>{if(!e.match(/^[\w./]+$/u))throw new Error(`Invalid file path for data file: ${e}`)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/util.js"}],[1477,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BaseController=void 0;class n{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e in this.internalConfig)void 0!==this.internalConfig[e]&&(this[e]=this.internalConfig[e])}else for(const t in e)void 0!==this.internalConfig[t]&&(this.internalConfig[t]=e[t],this[t]=e[t])}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}}r.BaseController=n,r.default=n}}},{package:"@metamask/ppom-validator>@metamask/base-controller",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/base-controller/dist/BaseController.js"}],[1478,{immer:3190},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseController=void 0;const n=e("immer");(0,n.enablePatches)();function s(e,t,r){return Object.keys(e).reduce(((n,s)=>{try{const i=t[s];if(!i)throw new Error(`No metadata found for '${s}'`);const o=i[r],a=e[s];return"function"==typeof o?n[s]=o(a):o&&(n[s]=a),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:n}){this.messagingSystem=e,this.name=r,this.internalState=n,this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state))}get state(){return this.internalState}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,s]=n.produceWithPatches(this.internalState,e);return this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:s}}applyPatches(e){const t=(0,n.applyPatches)(this.internalState,e);this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return s(e,t,"anonymous")},r.getPersistentState=function(e,t){return s(e,t,"persist")}}}},{package:"@metamask/ppom-validator>@metamask/base-controller",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/base-controller/dist/BaseControllerV2.js"}],[1479,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ControllerMessenger=r.RestrictedControllerMessenger=void 0;class n{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:n}){this.controllerMessenger=e,this.controllerName=t,this.allowedActions=r||null,this.allowedEvents=n||null}registerActionHandler(e,t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed registering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.registerActionHandler(e,t)}unregisterActionHandler(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed unregistering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.unregisterActionHandler(e)}call(e,...t){if(null===this.allowedActions)throw new Error("No actions allowed");if(!this.allowedActions.includes(e))throw new Error(`Action missing from allow list: ${e}`);return this.controllerMessenger.call(e,...t)}publish(e,...t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed publishing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.publish(e,...t)}subscribe(e,t,r){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);return r?this.controllerMessenger.subscribe(e,t,r):this.controllerMessenger.subscribe(e,t)}unsubscribe(e,t){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);this.controllerMessenger.unsubscribe(e,t)}clearEventSubscriptions(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed clearing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.clearEventSubscriptions(e)}}r.RestrictedControllerMessenger=n;r.ControllerMessenger=class{constructor(){this.actions=new Map,this.events=new Map,this.eventPayloadCache=new Map}registerActionHandler(e,t){if(this.actions.has(e))throw new Error(`A handler for ${e} has already been registered`);this.actions.set(e,t)}unregisterActionHandler(e){this.actions.delete(e)}clearActions(){this.actions.clear()}call(e,...t){const r=this.actions.get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}publish(e,...t){const r=this.events.get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=this.eventPayloadCache.get(e),s=n(...t);s!==r&&(this.eventPayloadCache.set(e,s),e(s,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=this.events.get(e);n||(n=new Map,this.events.set(e,n)),n.set(t,r)}unsubscribe(e,t){const r=this.events.get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&this.eventPayloadCache.delete(t),r.delete(t)}clearEventSubscriptions(e){this.events.delete(e)}clearSubscriptions(){this.events.clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new n({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/ppom-validator>@metamask/base-controller",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/base-controller/dist/ControllerMessenger.js"}],[148,{lodash:3437},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:63,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=63;const r=function(e){var t,r,n,s,i,o,a,c;const u=null==e||null===(t=e.PreferencesController)||void 0===t?void 0:t.accountTokens,l=null==e||null===(r=e.PreferencesController)||void 0===r?void 0:r.accountHiddenTokens,d={};u&&Object.keys(u).forEach((e=>{Object.keys(u[e]).forEach((t=>{const r=u[e][t];d[t]===undefined?d[t]={[e]:r}:d[t]={...d[t],[e]:r}}))}));const h={};l&&Object.keys(l).forEach((e=>{Object.keys(l[e]).forEach((t=>{const r=l[e][t];h[t]===undefined?h[t]={[e]:r}:h[t]={...h[t],[e]:r}}))}));e.TokensController?(e.TokensController.allTokens=d,e.TokensController.allIgnoredTokens=h):e.TokensController={allTokens:d,allIgnoredTokens:h};return null==e||null===(n=e.PreferencesController)||void 0===n||delete n.accountHiddenTokens,null==e||null===(s=e.PreferencesController)||void 0===s||delete s.accountTokens,null==e||null===(i=e.PreferencesController)||void 0===i||delete i.assetImages,null==e||null===(o=e.PreferencesController)||void 0===o||delete o.hiddenTokens,null==e||null===(a=e.PreferencesController)||void 0===a||delete a.tokens,null==e||null===(c=e.PreferencesController)||void 0===c||delete c.suggestedTokens,e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/063.js"}],[1480,{"./BaseController":1477,"./BaseControllerV2":1478,"./ControllerMessenger":1479},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseControllerV2=r.BaseController=void 0;var i=e("./BaseController");Object.defineProperty(r,"BaseController",{enumerable:!0,get:function(){return i.BaseController}});var o=e("./BaseControllerV2");Object.defineProperty(r,"BaseControllerV2",{enumerable:!0,get:function(){return o.BaseController}}),Object.defineProperty(r,"getAnonymizedState",{enumerable:!0,get:function(){return o.getAnonymizedState}}),Object.defineProperty(r,"getPersistentState",{enumerable:!0,get:function(){return o.getPersistentState}}),s(e("./ControllerMessenger"),r)}}},{package:"@metamask/ppom-validator>@metamask/base-controller",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/base-controller/dist/index.js"}],[1481,{"./types":1485},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=r.ApprovalType=r.ORIGIN_METAMASK=r.OPENSEA_PROXY_URL=r.BUILT_IN_NETWORKS=r.TESTNET_TICKER_SYMBOLS=r.ASSET_TYPES=r.GWEI=r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID=r.ERC1155_METADATA_URI_INTERFACE_ID=r.ERC1155_INTERFACE_ID=r.ERC721_ENUMERABLE_INTERFACE_ID=r.ERC721_METADATA_INTERFACE_ID=r.ERC721_INTERFACE_ID=r.ERC20=r.ERC1155=r.ERC721=r.MAX_SAFE_CHAIN_ID=r.GANACHE_CHAIN_ID=r.IPFS_DEFAULT_GATEWAY_URL=r.FALL_BACK_VS_CURRENCY=r.RPC=void 0;const n=e("./types");r.RPC="rpc",r.FALL_BACK_VS_CURRENCY="ETH",r.IPFS_DEFAULT_GATEWAY_URL="https://cloudflare-ipfs.com/ipfs/",r.GANACHE_CHAIN_ID="0x539",r.MAX_SAFE_CHAIN_ID=0xfffffffffffec,r.ERC721="ERC721",r.ERC1155="ERC1155",r.ERC20="ERC20",r.ERC721_INTERFACE_ID="0x80ac58cd",r.ERC721_METADATA_INTERFACE_ID="0x5b5e139f",r.ERC721_ENUMERABLE_INTERFACE_ID="0x780e9d63",r.ERC1155_INTERFACE_ID="0xd9b67a26",r.ERC1155_METADATA_URI_INTERFACE_ID="0x0e89341c",r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID="0x4e2312e0",r.GWEI="gwei",r.ASSET_TYPES={NATIVE:"NATIVE",TOKEN:"TOKEN",NFT:"NFT",UNKNOWN:"UNKNOWN"},r.TESTNET_TICKER_SYMBOLS={GOERLI:"GoerliETH",SEPOLIA:"SepoliaETH",LINEA_GOERLI:"LineaETH"},r.BUILT_IN_NETWORKS={[n.NetworkType.goerli]:{chainId:n.ChainId.goerli,ticker:n.NetworksTicker.goerli,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.goerli}.etherscan.io`}},[n.NetworkType.sepolia]:{chainId:n.ChainId.sepolia,ticker:n.NetworksTicker.sepolia,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.sepolia}.etherscan.io`}},[n.NetworkType.mainnet]:{chainId:n.ChainId.mainnet,ticker:n.NetworksTicker.mainnet,rpcPrefs:{blockExplorerUrl:"https://etherscan.io"}},[n.NetworkType["linea-goerli"]]:{chainId:n.ChainId["linea-goerli"],ticker:n.NetworksTicker["linea-goerli"],rpcPrefs:{blockExplorerUrl:"https://goerli.lineascan.build"}},[n.NetworkType["linea-mainnet"]]:{chainId:n.ChainId["linea-mainnet"],ticker:n.NetworksTicker["linea-mainnet"],rpcPrefs:{blockExplorerUrl:"https://lineascan.build"}},[n.NetworkType.rpc]:{chainId:undefined,blockExplorerUrl:undefined,ticker:undefined,rpcPrefs:undefined}},r.OPENSEA_PROXY_URL="https://proxy.metafi.codefi.network/opensea/v1/api/v2",r.ORIGIN_METAMASK="metamask",function(e){e.AddEthereumChain="wallet_addEthereumChain",e.ConnectAccounts="connect_accounts",e.EthDecrypt="eth_decrypt",e.EthGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.EthSign="eth_sign",e.EthSignTypedData="eth_signTypedData",e.PersonalSign="personal_sign",e.ResultError="result_error",e.ResultSuccess="result_success",e.SnapDialogAlert="snap_dialog:alert",e.SnapDialogConfirmation="snap_dialog:confirmation",e.SnapDialogPrompt="snap_dialog:prompt",e.SwitchEthereumChain="wallet_switchEthereumChain",e.Transaction="transaction",e.Unlock="unlock",e.WalletConnect="wallet_connect",e.WalletRequestPermissions="wallet_requestPermissions",e.WatchAsset="wallet_watchAsset"}(r.ApprovalType||(r.ApprovalType={})),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP={[n.ChainId.goerli]:n.BuiltInNetworkName.Goerli,[n.ChainId.sepolia]:n.BuiltInNetworkName.Sepolia,[n.ChainId.mainnet]:n.BuiltInNetworkName.Mainnet,[n.ChainId["linea-goerli"]]:n.BuiltInNetworkName.LineaGoerli,[n.ChainId["linea-mainnet"]]:n.BuiltInNetworkName.LineaMainnet,[n.ChainId.aurora]:n.BuiltInNetworkName.Aurora}}}},{package:"@metamask/ppom-validator>@metamask/controller-utils",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/controller-utils/dist/constants.js"}],[1482,{"./constants":1481,"./siwe":1484,"./types":1485,"./util":1486},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./constants"),r),s(e("./util"),r),s(e("./types"),r),s(e("./siwe"),r)}}},{package:"@metamask/ppom-validator>@metamask/controller-utils",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/controller-utils/dist/index.js"}],[1483,{"@metamask/utils":1786},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("controller-utils")}}},{package:"@metamask/ppom-validator>@metamask/controller-utils",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/controller-utils/dist/logger.js"}],[1484,{"./logger":1483,"@spruceid/siwe-parser":1976,buffer:2448,"ethereumjs-util":2816},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.detectSIWE=r.isValidSIWEOrigin=r.parseDomainParts=void 0;const n=e("@spruceid/siwe-parser"),s=e("ethereumjs-util"),i=e("./logger"),o=(0,i.createModuleLogger)(i.projectLogger,"detect-siwe");function a(e){try{const n="string"!=typeof(r=e)?r:(0,s.isHexPrefixed)(r)?r.slice(2):r,i=t.from(n,"hex");return 32===i.length?e:i.toString("utf8")}catch(t){return o(t),e}var r}const c={"http:":"80","https:":"443"};r.parseDomainParts=(e,t)=>e.match(/^[^/:]*:\/\//u)?new URL(e):new URL(`${t}//${e}`);r.isValidSIWEOrigin=e=>{var t;try{const{origin:n,siwe:s}=e;if(!n||!(null===(t=null==s?void 0:s.parsedMessage)||void 0===t?void 0:t.domain))return!1;const i=new URL(n),o=(0,r.parseDomainParts)(s.parsedMessage.domain,i.protocol);return 0===o.hostname.localeCompare(i.hostname,undefined,{sensitivity:"accent"})&&(""!==o.port&&o.port!==i.port?""===i.port&&o.port===c[i.protocol]:""===o.username||o.username===i.username)}catch(e){return o(e),!1}};r.detectSIWE=e=>{try{const{data:t}=e,r=a(t);return{isSIWEMessage:!0,parsedMessage:new n.ParsedMessage(r)}}catch(e){return{isSIWEMessage:!1,parsedMessage:null}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/ppom-validator>@metamask/controller-utils",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/controller-utils/dist/siwe.js"}],[1485,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n;Object.defineProperty(r,"__esModule",{value:!0}),r.NetworksTicker=r.ChainId=r.BuiltInNetworkName=r.isInfuraNetworkType=r.isNetworkType=r.NetworkType=r.InfuraNetworkType=void 0,r.InfuraNetworkType={mainnet:"mainnet",goerli:"goerli",sepolia:"sepolia","linea-goerli":"linea-goerli","linea-mainnet":"linea-mainnet"},r.NetworkType=Object.assign(Object.assign({},r.InfuraNetworkType),{rpc:"rpc"}),r.isNetworkType=function(e){return Object.values(r.NetworkType).includes(e)},r.isInfuraNetworkType=function(e){return Object.keys(r.InfuraNetworkType).includes(e)},function(e){e.Mainnet="mainnet",e.Goerli="goerli",e.Sepolia="sepolia",e.LineaGoerli="linea-goerli",e.LineaMainnet="linea-mainnet",e.Aurora="aurora"}(n=r.BuiltInNetworkName||(r.BuiltInNetworkName={})),r.ChainId={[n.Mainnet]:"0x1",[n.Goerli]:"0x5",[n.Sepolia]:"0xaa36a7",[n.Aurora]:"0x4e454152",[n.LineaGoerli]:"0xe704",[n.LineaMainnet]:"0xe708"},function(e){e.mainnet="ETH",e.goerli="GoerliETH",e.sepolia="SepoliaETH",e["linea-goerli"]="LineaETH",e["linea-mainnet"]="ETH",e.rpc=""}(r.NetworksTicker||(r.NetworksTicker={}))}}},{package:"@metamask/ppom-validator>@metamask/controller-utils",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/controller-utils/dist/types.js"}],[1486,{"./constants":1481,"@metamask/ethjs-unit":1193,"@metamask/utils":1786,buffer:2448,"eth-ens-namehash":2726,"ethereumjs-util":2816,"fast-deep-equal":2896},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.isValidJson=r.isNonEmptyArray=r.isPlainObject=r.convertHexToDecimal=r.query=r.normalizeEnsName=r.timeoutFetch=r.fetchWithErrorHandling=r.handleFetch=r.successfulFetch=r.isSmartContractCode=r.isValidHexAddress=r.toChecksumHexAddress=r.safelyExecuteWithTimeout=r.safelyExecute=r.toHex=r.fromHex=r.hexToText=r.hexToBN=r.getBuyURL=r.weiHexToGweiDec=r.gweiDecToWEIBN=r.fractionBN=r.BNToHex=r.isSafeChainId=void 0;const i=e("@metamask/ethjs-unit"),o=e("@metamask/utils"),a=s(e("eth-ens-namehash")),c=e("ethereumjs-util"),u=s(e("fast-deep-equal")),l=e("./constants"),d=new Error("timeout");function h(e){return e?new c.BN((0,c.stripHexPrefix)(e),16):new c.BN(0)}function f(e,t){return n(this,void 0,void 0,(function*(){const r=yield fetch(e,t);if(!r.ok)throw new Error(`Fetch failed with status '${r.status}' for request '${String(e)}'`);return r}))}function p(e,t){return n(this,void 0,void 0,(function*(){const r=yield f(e,t);return yield r.json()}))}r.isSafeChainId=function(e){if(!(0,c.isHexString)(e))return!1;const t=Number.parseInt(e);return Number.isSafeInteger(t)&&t>0&&t<=l.MAX_SAFE_CHAIN_ID},r.BNToHex=function(e){return(0,c.addHexPrefix)(e.toString(16))},r.fractionBN=function(e,t,r){const n=new c.BN(t),s=new c.BN(r);return e.mul(n).div(s)},r.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new c.BN(0);const t=e.toString().split("."),r=t[0]||"0";let n=t[1]||"";if(!n)return(0,i.toWei)(r,"gwei");if(n.length<=9)return(0,i.toWei)(`${r}.${n}`,"gwei");const s=n.slice(9)[0];n=n.slice(0,9);let o=(0,i.toWei)(`${r}.${n}`,"gwei");return Number(s)>=5&&(o=o.add(new c.BN(1))),o},r.weiHexToGweiDec=function(e){const t=new c.BN((0,c.stripHexPrefix)(e),16);return(0,i.fromWei)(t,"gwei")},r.getBuyURL=function(e="1",t,r=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${r}&address=${t}&crypto_currency=ETH`;case"5":return"https://goerli-faucet.slock.it/";case"11155111":return"https://sepoliafaucet.net/";default:return undefined}},r.hexToBN=h,r.hexToText=function(e){try{const r=(0,c.stripHexPrefix)(e);return t.from(r,"hex").toString("utf8")}catch(t){return e}},r.fromHex=function(e){return c.BN.isBN(e)?e:new c.BN(h(e).toString(10))},r.toHex=function(e){return"string"==typeof e&&(0,o.isStrictHexString)(e)?e:`0x${c.BN.isBN(e)?e.toString(16):new c.BN(e.toString(),10).toString(16)}`},r.safelyExecute=function(e,t=!1){return n(this,void 0,void 0,(function*(){try{return yield e()}catch(e){return t&&console.error(e),undefined}}))},r.safelyExecuteWithTimeout=function(e,t=!1,r=500){return n(this,void 0,void 0,(function*(){try{return yield Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(d)}),r)))])}catch(e){return t&&console.error(e),undefined}}))},r.toChecksumHexAddress=function(e){const t=(0,c.addHexPrefix)(e);return(0,c.isHexString)(t)?(0,c.toChecksumAddress)(t):t},r.isValidHexAddress=function(e,{allowNonPrefixed:t=!0}={}){const r=t?(0,c.addHexPrefix)(e):e;return!!(0,c.isHexString)(r)&&(0,c.isValidAddress)(r)},r.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},r.successfulFetch=f,r.handleFetch=p,r.fetchWithErrorHandling=function({url:e,options:t,timeout:r,errorCodesToCatch:s}){return n(this,void 0,void 0,(function*(){let n;try{n=r?Promise.race([yield p(e,t),new Promise(((e,t)=>setTimeout((()=>{t(d)}),r)))]):yield p(e,t)}catch(e){!function(e,t=[]){var r;if(!e)return;const n=t.some((t=>{var r;return null===(r=e.message)||void 0===r?void 0:r.includes(`Fetch failed with status '${t}'`)}));if(!(e instanceof Error&&(n||(null===(r=e.message)||void 0===r?void 0:r.includes("Failed to fetch"))||e===d)))throw e;console.error(e)}(e,s)}return n}))},r.timeoutFetch=function(e,t,r=500){return n(this,void 0,void 0,(function*(){return Promise.race([f(e,t),new Promise(((e,t)=>setTimeout((()=>{t(d)}),r)))])}))},r.normalizeEnsName=function(e){if(e&&"string"==typeof e)try{const t=a.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},r.query=function(e,t,r=[]){return new Promise(((n,s)=>{const i=(e,t)=>{e?s(e):n(t)};t in e&&"function"==typeof e[t]?e[t](...r,i):e.sendAsync({method:t,params:r},i)}))};r.convertHexToDecimal=(e="0x0")=>(0,c.isHexString)(e)?parseInt(e,16):Number(e)?Number(e):0,r.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)},r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isValidJson=function(e){try{return(0,u.default)(e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/ppom-validator>@metamask/controller-utils",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/controller-utils/dist/util.js"}],[1487,{"@metamask/base-controller":1078},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,o,a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},c=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},u=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.QueuedRequestController=r.QueuedRequestControllerEventTypes=r.QueuedRequestControllerActionTypes=r.controllerName=void 0;const l=e("@metamask/base-controller");r.controllerName="QueuedRequestController",r.QueuedRequestControllerActionTypes={enqueueRequest:`${r.controllerName}:enqueueRequest`},r.QueuedRequestControllerEventTypes={countChanged:`${r.controllerName}:countChanged`};class d extends l.BaseController{constructor({messenger:e}){super({name:r.controllerName,metadata:{},messenger:e,state:{}}),n.add(this),this.currentRequest=Promise.resolve(),s.set(this,0),c(this,n,"m",i).call(this)}length(){return c(this,s,"f")}enqueueRequest(e){return a(this,void 0,void 0,(function*(){c(this,n,"m",o).call(this,1),c(this,s,"f")>1&&(yield this.currentRequest),this.currentRequest=e().then((()=>{c(this,n,"m",o).call(this,-1)})).catch((e=>{throw c(this,n,"m",o).call(this,-1),e})),yield this.currentRequest}))}}r.QueuedRequestController=d,s=new WeakMap,n=new WeakSet,i=function(){this.messagingSystem.registerActionHandler(r.QueuedRequestControllerActionTypes.enqueueRequest,this.enqueueRequest.bind(this))},o=function(e){u(this,s,c(this,s,"f")+e,"f"),this.messagingSystem.publish("QueuedRequestController:countChanged",c(this,s,"f"))}}}},{package:"@metamask/queued-request-controller",file:"node_modules/@metamask/queued-request-controller/dist/QueuedRequestController.js"}],[1488,{"./QueuedRequestController":1487,"@metamask/controller-utils":1491,"@metamask/json-rpc-engine":1217,"@metamask/rpc-errors":1505,"@metamask/selected-network-controller":1521},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.createQueuedRequestMiddleware=void 0;const s=e("@metamask/controller-utils"),i=e("@metamask/json-rpc-engine"),o=e("@metamask/rpc-errors"),a=e("@metamask/selected-network-controller"),c=e("./QueuedRequestController");r.createQueuedRequestMiddleware=({messenger:e,useRequestQueue:t})=>(0,i.createAsyncMiddleware)(((r,i,u)=>n(void 0,void 0,void 0,(function*(){const{origin:l,networkClientId:d}=r;if(!l)throw new Error("Request object is lacking an 'origin'");if(!d)throw new Error("Request object is lacking a 'networkClientId'");var h;t()&&(h=r.method,["eth_sendTransaction","wallet_watchAsset","wallet_switchEthereumChain","eth_signTypedData_v4","wallet_addEthereumChain","wallet_requestPermissions","wallet_requestSnaps","personal_sign","eth_sign","eth_requestAccounts"].includes(h))?yield e.call(c.QueuedRequestControllerActionTypes.enqueueRequest,(()=>n(void 0,void 0,void 0,(function*(){if("wallet_switchEthereumChain"===r.method||"wallet_addEthereumChain"===r.method)return u();const t=e.call("NetworkController:getNetworkClientById",d).configuration,n=e.call("NetworkController:getState"),c=(0,s.isNetworkType)(d);let h;h=c?t:n.networkConfigurations[d];const f=n.providerConfig;if(f.chainId===h.chainId)return u();const p={toNetworkConfiguration:h,fromNetworkConfiguration:f};try{yield e.call("ApprovalController:addRequest",{origin:l,type:s.ApprovalType.SwitchEthereumChain,requestData:p},!0);const t=c?"setProviderType":"setActiveNetwork";yield e.call(`NetworkController:${t}`,d),e.call(a.SelectedNetworkControllerActionTypes.setNetworkClientIdForDomain,l,d)}catch(e){return i.error=(0,o.serializeError)(e),e}return u()})))):u()}))))}}},{package:"@metamask/queued-request-controller",file:"node_modules/@metamask/queued-request-controller/dist/QueuedRequestMiddleware.js"}],[1489,{"./QueuedRequestController":1487,"./QueuedRequestMiddleware":1488},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createQueuedRequestMiddleware=r.QueuedRequestController=r.QueuedRequestControllerEventTypes=r.QueuedRequestControllerActionTypes=void 0;var n=e("./QueuedRequestController");Object.defineProperty(r,"QueuedRequestControllerActionTypes",{enumerable:!0,get:function(){return n.QueuedRequestControllerActionTypes}}),Object.defineProperty(r,"QueuedRequestControllerEventTypes",{enumerable:!0,get:function(){return n.QueuedRequestControllerEventTypes}}),Object.defineProperty(r,"QueuedRequestController",{enumerable:!0,get:function(){return n.QueuedRequestController}});var s=e("./QueuedRequestMiddleware");Object.defineProperty(r,"createQueuedRequestMiddleware",{enumerable:!0,get:function(){return s.createQueuedRequestMiddleware}})}}},{package:"@metamask/queued-request-controller",file:"node_modules/@metamask/queued-request-controller/dist/index.js"}]],[],{});